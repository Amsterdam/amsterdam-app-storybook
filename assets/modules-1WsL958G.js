import{e as escape,q as queryStringExports,d as PiwikSessionDimension,a as useTrackEvents,P as PiwikAction}from"./usePiwikTrackCustomEventFromProps-BdxlxOn2.js";import{r as reactExports}from"./index-B-xgG2PE.js";import{M as ModuleSlug,u as useTrackException,E as ExceptionLogKey,j as Environment,C as CHAT_DEVELOPER_NAME_PROD,p as CHAT_ORGANIZATION_ID_PROD,q as CHAT_URL_PROD,r as CHAT_DEVELOPER_NAME_ACC,s as CHAT_ORGANIZATION_ID_ACC,t as CHAT_URL_ACC,v as CHAT_DEVELOPER_NAME_TEST,w as CHAT_ORGANIZATION_ID_TEST,x as CHAT_URL_TEST,y as CHAT_DEVELOPER_NAME_DEV,z as CHAT_ORGANIZATION_ID_DEV,B as CHAT_URL_DEV,o as devLog,f as devError,l as isDevApp,G as GlobalApiSlug}from"./useTrackException-9O1tSVBj.js";import{c as createSlice,R as ReduxKey,G as SalesforceMessagingInApp,H as ConversationEntrySenderRole,I as ConversationEntryFormat,J as ConversationEntryStatus,P as ParticipantChangedOperationType,K as ConversationEntryRoutingType,u as useSelector,L as ConversationEntryRoutingWorkType,a as useThemable,M as ConnectionState}from"./useThemable-DhqiuDXa.js";import{P as Platform}from"./index-BiinuClr.js";import{j as jsxRuntimeExports}from"./jsx-runtime-DNHyKP0h.js";import{K as withTiming,A as Animated,u as useSharedValue,J as withSequence,aA as withSpring,M as Easing}from"./Animated-B-EeeCNv.js";import{u as useDispatch}from"./useDispatch-jiStvVFn.js";import{u as useTheme}from"./useTheme-6yZg5PNu.js";import{s as stylesheet}from"./index-Cm4QxXoK.js";import{u as useAnimatedStyle,U as UnavailabilityError,w as withRepeat,l as interpolate,m as interpolateColor,g as SlideOutDown,S as SlideInDown,P as Platform$1,o as CodedError}from"./UnavailabilityError-D1Pw28Ey.js";import{u as useDeviceContext}from"./useDeviceContext-BsghPmC5.js";import{P as PopUpMenu,a as PopupMenuOrientation,u as useScreen}from"./types-tjdJSigr.js";import{u as useOpenWebUrl,I as InlineLink,a as useOpenUrl}from"./useOpenUrl-BeGnwVpY.js";import{k as selectEnvironment,h as baseApi,C as CacheLifetime,l as selectSecureItemUpdatedTimestamp,g as getSecureItem,S as SecureItemKey,e as setSecureItem,m as setSecureItemUpdatedTimestamp,r as removeSecureItems,n as deleteSecureItemUpdatedTimestamp,o as deviceIdHeader,q as generateRequestUrl,t as createSelector,v as usePermitsQuery,w as logout$1}from"./service-WJV-h9HB.js";import{u as useBoolean}from"./useBoolean-DwbfAoJh.js";import{A as AppLifecycle}from"./useIsReduceMotionEnabled-DgxyvoI2.js";import{a as NativeModules}from"./NativeEventEmitter-CjF4_R2K.js";import{a as dayjs,d as dayjsFromUnix}from"./dayjs-C6sMkNK9.js";import{A as Alert}from"./index-DKdc_Qc3.js";import{u as useBottomSheet}from"./bottomSheet-J_Dmw7vY.js";import{I as IconButton}from"./IconButton-DegN8Sbh.js";import{P as PressableBase}from"./PressableBase-Ckv_YgXs.js";import{B as Box}from"./Box-BMU6-bxk.js";import{R as Row}from"./Row-Dh2-J0Np.js";import{I as Icon}from"./Icon-DAsf4uQg.js";import{M as MeatballsMenuIcon}from"./MeatballsMenuIcon-cmScu-76.js";import{T as Title}from"./Title-Ca05Y8rM.js";import{s as simplur}from"./index-CqtUk6fw.js";import{B as Badge}from"./Badge-CBvhjSlJ.js";import{V as View}from"./index-DoMT7H_C.js";import{K as Keyboard}from"./index-C8evIbG0.js";import{C as Column}from"./Column-BPGSL0lA.js";import{G as Gutter}from"./Gutter-DZNZA9AL.js";import{C as ChatSystemEntry}from"./ChatSystemEntry-PrtDc35k.js";import{P as Phrase}from"./Phrase-Cg83-Ng3.js";import{S as Svg,C as Circle,P as Path}from"./index-s4hYfBOP.js";import{P as Pressable}from"./Pressable-B-IBiFyM.js";import{I as ImageWithStatics}from"./index-u-pG-eXf.js";import{M as Modal,K as KeyboardAvoidingView}from"./index-DTPcT9v4.js";import{B as Button}from"./Button-BiW9nxY2.js";import{a as ForwardedScrollView}from"./index-DoCTQWjN.js";import{u as useIsScreenReaderEnabled}from"./useIsScreenReaderEnabled-BS8Rdef4.js";import{u as useKeyboardHeight}from"./useKeyboardHeight-JBYHU1xz.js";import{u as useAccessibilityFocus}from"./useAccessibilityFocus-aDK5TXuR.js";import{D as Duration}from"./duration-BV61i-wJ.js";import{T as TextInput}from"./index-shQJSbQb.js";import{P as Paragraph}from"./Paragraph-DKl-dubi.js";import{S as SvgAmsterdamFacades}from"./amsterdam-facades-CVV8Iin9.js";import{C as Center}from"./Center-Bb_w82DD.js";import{E as ErrorFigure}from"./ErrorFigure-ZyhN2CfV.js";import{A as ActionButton}from"./ActionButton-BZnlMBUj.js";import{u as useNavigation}from"./useNavigation-B9qK-iPd.js";import{A as AlertVariant}from"./Alert.types-B-Yctuek.js";import{s as setAlertAction}from"./alert-BbIKbIk5.js";import{f as useCurrentParkingPermitReportCode,p as parkingSlice,g as selectIsLoginStepsActive,h as setLoginStepsActive$1}from"./slice-Dyl77IZ5.js";import{u as useParkingAccount}from"./useParkingAccount-GO__-8Ic.js";import{P as ParkingRouteName}from"./routes-CtH9nUKh.js";import{a as ParkingPermitScope,P as PermitType}from"./types-C2OYdTo_.js";const useAppLifecycle=()=>{const[e,t]=reactExports.useState(AppLifecycle.currentState);return reactExports.useEffect(()=>{const n=AppLifecycle.addEventListener("change",s=>{t(s)});return()=>n.remove()},[]),e};function findFocusedRoute(e){var t,n;let s=e;for(;((r=s)===null||r===void 0?void 0:r.routes[s.index??0].state)!=null;){var r;s=s.routes[s.index??0].state}return(t=s)===null||t===void 0?void 0:t.routes[((n=s)===null||n===void 0?void 0:n.index)??0]}function getActionFromState(e,t){var n;const s=t?createNormalizedConfigItem(t):{},r=e.index!=null?e.routes.slice(0,e.index+1):e.routes;if(r.length===0)return;if(!(r.length===1&&r[0].key===void 0||r.length===2&&r[0].key===void 0&&r[0].name===(s==null?void 0:s.initialRouteName)&&r[1].key===void 0))return{type:"RESET",payload:e};const i=e.routes[e.index??e.routes.length-1];let a=i==null?void 0:i.state,o=s==null||(n=s.screens)===null||n===void 0?void 0:n[i==null?void 0:i.name],l={...i.params},u=i?{name:i.name,path:i.path,params:l}:void 0;for(;a;){var c,d,p;if(a.routes.length===0)return;const m=a.index!=null?a.routes.slice(0,a.index+1):a.routes,g=m[m.length-1];if(Object.assign(l,{initial:void 0,screen:void 0,params:void 0,state:void 0}),m.length===1&&m[0].key===void 0)l.initial=!0,l.screen=g.name;else if(m.length===2&&m[0].key===void 0&&m[0].name===((c=o)===null||c===void 0?void 0:c.initialRouteName)&&m[1].key===void 0)l.initial=!1,l.screen=g.name;else{l.state=a;break}g.state?(l.params={...g.params},l=l.params):(l.path=g.path,l.params=g.params),a=g.state,o=(d=o)===null||d===void 0||(p=d.screens)===null||p===void 0?void 0:p[g.name]}if(u)return{type:"NAVIGATE",payload:u}}const createNormalizedConfigItem=e=>typeof e=="object"&&e!=null?{initialRouteName:e.initialRouteName,screens:e.screens!=null?createNormalizedConfigs$1(e.screens):void 0}:{},createNormalizedConfigs$1=e=>Object.entries(e).reduce((t,n)=>{let[s,r]=n;return t[s]=createNormalizedConfigItem(r),t},{}),CHILD_STATE=Symbol("CHILD_STATE");function getFocusedRouteNameFromRoute(e){const t=e[CHILD_STATE]??e.state,n=e.params;return t?t.routes[t.index??(typeof t.type=="string"&&t.type!=="stack"?0:t.routes.length-1)].name:typeof(n==null?void 0:n.screen)=="string"?n.screen:void 0}const formatToList=e=>e.map(t=>`- ${t}`).join(`
`);function validatePathConfig(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["initialRouteName","screens"];t||n.push("path","exact","stringify","parse");const s=Object.keys(e).filter(r=>!n.includes(r));if(s.length)throw new Error(`Found invalid properties in the configuration:
${formatToList(s)}

Did you forget to specify them under a 'screens' property?

You can only specify the following properties:
${formatToList(n)}

See https://reactnavigation.org/docs/configuring-links for more details on how to specify a linking configuration.`);e.screens&&Object.entries(e.screens).forEach(r=>{let[i,a]=r;typeof a!="string"&&validatePathConfig(a,!1)})}function getStateFromPath(e,t){t&&validatePathConfig(t);let n=[];t!=null&&t.initialRouteName&&n.push({initialRouteName:t.initialRouteName,parentScreens:[]});const s=t==null?void 0:t.screens;let r=e.replace(/\/+/g,"/").replace(/^\//,"").replace(/\?.*$/,"");if(r=r.endsWith("/")?r:`${r}/`,s===void 0){const c=r.split("/").filter(Boolean).map(d=>({name:decodeURIComponent(d)}));return c.length?createNestedStateObject(e,c,n):void 0}const i=[].concat(...Object.keys(s).map(c=>createNormalizedConfigs(c,s,[],n,[]))).sort((c,d)=>{if(c.pattern===d.pattern)return d.routeNames.join(">").localeCompare(c.routeNames.join(">"));if(c.pattern.startsWith(d.pattern))return-1;if(d.pattern.startsWith(c.pattern))return 1;const p=c.pattern.split("/"),m=d.pattern.split("/");for(let g=0;g<Math.max(p.length,m.length);g++){if(p[g]==null)return 1;if(m[g]==null)return-1;const h=p[g]==="*"||p[g].startsWith(":"),y=m[g]==="*"||m[g].startsWith(":");if(!(h&&y)){if(h)return 1;if(y)return-1}}return m.length-p.length});if(i.reduce((c,d)=>{if(c[d.pattern]){const p=c[d.pattern].routeNames,m=d.routeNames;if(!(p.length>m.length?m.every((h,y)=>p[y]===h):p.every((h,y)=>m[y]===h)))throw new Error(`Found conflicting screens with the same pattern. The pattern '${d.pattern}' resolves to both '${p.join(" > ")}' and '${m.join(" > ")}'. Patterns must be unique and cannot resolve to more than one screen.`)}return Object.assign(c,{[d.pattern]:d})},{}),r==="/"){const c=i.find(d=>d.path===""&&d.routeNames.every(p=>{var m;return!((m=i.find(g=>g.screen===p))!==null&&m!==void 0&&m.path)}));return c?createNestedStateObject(e,c.routeNames.map(d=>({name:d})),n,i):void 0}let a,o;const{routes:l,remainingPath:u}=matchAgainstConfigs(r,i.map(c=>({...c,regex:c.regex?new RegExp(c.regex.source+"$"):void 0})));if(l!==void 0&&(o=createNestedStateObject(e,l,n,i),r=u,a=o),!(o==null||a==null))return a}const joinPaths=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[].concat(...t.map(s=>s.split("/"))).filter(Boolean).join("/")},matchAgainstConfigs=(e,t)=>{let n,s=e;for(const i of t){if(!i.regex)continue;const a=s.match(i.regex);if(a){var r;const l=((r=i.pattern)===null||r===void 0?void 0:r.split("/").reduce((u,c,d)=>{if(!c.startsWith(":"))return u;u.pos+=1;const p=decodeURIComponent(a[(u.pos+1)*2].replace(/\/$/,""));return Object.assign(u.matchedParams,{[c]:Object.assign(u.matchedParams[c]||{},{[d]:p})}),u},{pos:-1,matchedParams:{}})).matchedParams||{};n=i.routeNames.map(u=>{var c;const d=t.find(h=>h.screen===u&&i.pattern.startsWith(h.pattern)),p=d==null?void 0:d.path.split("/").filter(Boolean).join("/"),m=d==null||(c=d.pattern.replace(new RegExp(`${escape(p)}$`),""))===null||c===void 0?void 0:c.split("/").length,g=p==null?void 0:p.split("/").reduce((h,y,I)=>{var E;if(!y.startsWith(":"))return h;const S=m?m-1:0,b=(E=l[y])===null||E===void 0?void 0:E[I+S];if(b){var j;const R=y.replace(/^:/,"").replace(/\?$/,"");h[R]=d!=null&&(j=d.parse)!==null&&j!==void 0&&j[R]?d.parse[R](b):b}return h},{});return g&&Object.keys(g).length?{name:u,params:g}:{name:u}}),s=s.replace(a[1],"");break}}return{routes:n,remainingPath:s}},createNormalizedConfigs=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;const a=[];n.push(e),r.push(e);const o=t[e];if(typeof o=="string"){const l=i?joinPaths(i,o):o;a.push(createConfigItem(e,n,l,o))}else if(typeof o=="object"){let l;if(typeof o.path=="string"){if(o.exact&&o.path===void 0)throw new Error("A 'path' needs to be specified when specifying 'exact: true'. If you don't want this screen in the URL, specify it as empty string, e.g. `path: ''`.");l=o.exact!==!0?joinPaths(i||"",o.path||""):o.path||"",a.push(createConfigItem(e,n,l,o.path,o.parse))}o.screens&&(o.initialRouteName&&s.push({initialRouteName:o.initialRouteName,parentScreens:r}),Object.keys(o.screens).forEach(u=>{const c=createNormalizedConfigs(u,o.screens,n,s,[...r],l??i);a.push(...c)}))}return n.pop(),a},createConfigItem=(e,t,n,s,r)=>{n=n.split("/").filter(Boolean).join("/");const i=n?new RegExp(`^(${n.split("/").map(a=>a.startsWith(":")?`(([^/]+\\/)${a.endsWith("?")?"?":""})`:`${a==="*"?".*":escape(a)}\\/`).join("")})`):void 0;return{screen:e,regex:i,pattern:n,path:s,routeNames:[...t],parse:r}},findParseConfigForRoute=(e,t)=>{for(const n of t)if(e===n.routeNames[n.routeNames.length-1])return n.parse},findInitialRoute=(e,t,n)=>{for(const s of n)if(t.length===s.parentScreens.length){let r=!0;for(let i=0;i<t.length;i++)if(t[i].localeCompare(s.parentScreens[i])!==0){r=!1;break}if(r)return e!==s.initialRouteName?s.initialRouteName:void 0}},createStateObject=(e,t,n)=>n?e?{index:1,routes:[{name:e},t]}:{routes:[t]}:e?{index:1,routes:[{name:e},{...t,state:{routes:[]}}]}:{routes:[{...t,state:{routes:[]}}]},createNestedStateObject=(e,t,n,s)=>{let r,i=t.shift();const a=[];let o=findInitialRoute(i.name,a,n);if(a.push(i.name),r=createStateObject(o,i,t.length===0),t.length>0){let u=r;for(;i=t.shift();){o=findInitialRoute(i.name,a,n);const c=u.index||u.routes.length-1;u.routes[c].state=createStateObject(o,i,t.length===0),t.length>0&&(u=u.routes[c].state),a.push(i.name)}}i=findFocusedRoute(r),i.path=e;const l=parseQueryParams(e,s?findParseConfigForRoute(i.name,s):void 0);return l&&(i.params={...i.params,...l}),r},parseQueryParams=(e,t)=>{const n=e.split("?")[1],s=queryStringExports.parse(n);return t&&Object.keys(s).forEach(r=>{Object.hasOwnProperty.call(t,r)&&typeof s[r]=="string"&&(s[r]=t[r](s[r]))}),Object.keys(s).length?s:void 0},LinkingContext=reactExports.createContext({options:void 0});LinkingContext.displayName="LinkingContext";const notifee={displayNotification:()=>{},createChannel:()=>{},onForegroundEvent:()=>()=>{}};var EventType=(e=>(e[e.UNKNOWN=-1]="UNKNOWN",e[e.DISMISSED=0]="DISMISSED",e[e.PRESS=1]="PRESS",e[e.ACTION_PRESS=2]="ACTION_PRESS",e[e.DELIVERED=3]="DELIVERED",e[e.APP_BLOCKED=4]="APP_BLOCKED",e[e.CHANNEL_BLOCKED=5]="CHANNEL_BLOCKED",e[e.CHANNEL_GROUP_BLOCKED=6]="CHANNEL_GROUP_BLOCKED",e[e.TRIGGER_NOTIFICATION_CREATED=7]="TRIGGER_NOTIFICATION_CREATED",e[e.FG_ALREADY_EXIST=8]="FG_ALREADY_EXIST",e))(EventType||{});const messaging=()=>({getToken:()=>Promise.resolve()}),aboutModule={alwaysEnabled:!0,name:"AboutModule",slug:ModuleSlug.about};var AccessCodeType=(e=>(e.codeConfirmed="codeConfirmed",e.codeEntered="codeEntered",e.codeSet="codeSet",e))(AccessCodeType||{});const MAX_ATTEMPTS=5,initialValue$1={attemptsLeft:MAX_ATTEMPTS,[AccessCodeType.codeEntered]:[],[AccessCodeType.codeConfirmed]:[],[AccessCodeType.codeSet]:[],codeValidTimestamp:void 0,error:void 0,isCodeSet:!1,isCodeConfirmed:!1,isCodeValid:!1,isEnteringCode:!1,isForgotCode:!1,useBiometrics:void 0},accessCodeSlice=createSlice({name:"accessCode",initialState:initialValue$1,reducers:{addDigit:(e,{payload:{digit:t,type:n}})=>{e[n].push(t)},removeDigit:(e,{payload:t})=>{e[t].pop()},reset:()=>initialValue$1,setCode:(e,{payload:{code:t,type:n}})=>{e[n]=t},resetAttemptsLeft:e=>{e.attemptsLeft=initialValue$1.attemptsLeft},setAttemptsLeft:(e,{payload:t})=>{e.attemptsLeft=t},setError:(e,{payload:t})=>{e.error=t},setIsCodeSet:(e,{payload:t})=>{e.isCodeSet=t},setIsCodeConfirmed:(e,{payload:t})=>{e.isCodeConfirmed=t},setIsCodeValid:(e,{payload:t})=>{t?(e.isCodeValid=!0,e.codeValidTimestamp=Date.now()):(e.isCodeValid=!1,e.codeValidTimestamp=void 0)},setIsEnteringCode:(e,{payload:t})=>{e.isEnteringCode=t},setIsForgotCode:(e,{payload:t})=>{e.isForgotCode=t},setUseBiometrics:(e,{payload:t})=>{e.useBiometrics=t}}}),{reset,resetAttemptsLeft,setAttemptsLeft,setError,setIsCodeValid}=accessCodeSlice.actions,persistWhitelist$5=["attemptsLeft","useBiometrics"],accessCodeModule={hiddenInMenu:!0,name:"AccessCodeModule",reduxConfigs:[{key:ReduxKey.accessCode,persistVersion:0,persistWhitelist:persistWhitelist$5,slice:accessCodeSlice}],slug:ModuleSlug["access-code"],alwaysEnabled:!0},getAddition=(e,t)=>{if(!(!e&&!t))return e||t},getAddressLine2=(e,t)=>!e||!t?"":`${e.slice(0,4)} ${e.slice(4)} ${t.toUpperCase()}`,parseCentroid=(e,t)=>t||(e?{lat:e[1],lon:e[0]}:void 0),migrations={0:e=>{const{adres:t,bag_huisletter:n,bag_toevoeging:s,bagNummeraanduidingId:r,woonplaats:i,centroid:a,coordinates:o,huisnummer:l,postcode:u,straatnaam:c}=e;return[t,n,s,r,i,l,u,c].some(p=>p===void 0)?{}:{address:{addition:getAddition(n,s),additionLetter:n||void 0,additionNumber:s||void 0,addressLine1:t,addressLine2:getAddressLine2(u,i),bagId:r,city:i,coordinates:parseCentroid(a,o),number:l,postcode:u,street:c},locationType:"address"}}};var HighAccuracyPurposeKey=(e=>(e.PreciseLocationAddressConstructionWork="PreciseLocationAddressConstructionWork",e.PreciseLocationAddressLookup="PreciseLocationAddressLookup",e.PreciseLocationAddressWasteGuide="PreciseLocationAddressWasteGuide",e))(HighAccuracyPurposeKey||{});const initialState$8={},permissionsSlice=createSlice({name:ReduxKey.permissions,initialState:initialState$8,reducers:{setPermission:(e,{payload:{permission:t,granted:n}})=>{e[t]=n}}}),{setPermission}=permissionsSlice.actions,selectIsPermissionGranted=e=>t=>t[ReduxKey.permissions][e]??!1,RESULTS=Object.freeze({UNAVAILABLE:"unavailable",BLOCKED:"blocked",DENIED:"denied",GRANTED:"granted",LIMITED:"limited"}),check=async()=>RESULTS.UNAVAILABLE,checkNotifications=async()=>({status:RESULTS.UNAVAILABLE,settings:{}}),methods={request:check,requestNotifications:checkNotifications},PERMISSIONS=Object.freeze({ANDROID:{},IOS:{},WINDOWS:{}}),request=methods.request,requestNotifications=methods.requestNotifications,Permissions={biometrics:PERMISSIONS.IOS.FACE_ID,bluetooth:Platform.OS==="android"?PERMISSIONS.ANDROID.BLUETOOTH_SCAN:PERMISSIONS.IOS.BLUETOOTH,bluetoothConnect:Platform.OS==="android"?PERMISSIONS.ANDROID.BLUETOOTH_CONNECT:PERMISSIONS.IOS.BLUETOOTH,camera:Platform.OS==="android"?PERMISSIONS.ANDROID.CAMERA:PERMISSIONS.IOS.CAMERA,location:Platform.OS==="android"?PERMISSIONS.ANDROID.ACCESS_FINE_LOCATION:PERMISSIONS.IOS.LOCATION_WHEN_IN_USE,photos:Platform.OS==="android"?PERMISSIONS.ANDROID.READ_MEDIA_IMAGES:PERMISSIONS.IOS.PHOTO_LIBRARY,notifications:"PERMISSION_NOTIFICATIONS"};Permissions.biometrics,PiwikSessionDimension.hasBiometricsPermission,Permissions.location,PiwikSessionDimension.hasLocationPermission,Permissions.camera,PiwikSessionDimension.hasCameraPermission,Permissions.photos,PiwikSessionDimension.hasPhotosPermission,Permissions.notifications,PiwikSessionDimension.hasNotificationPermission;const initialState$7={highAccuracyPurposeKey:HighAccuracyPurposeKey.PreciseLocationAddressLookup,locationType:void 0,startGettingLocation:void 0,getLocationIsError:void 0,isGettingLocation:void 0},addressSlice=createSlice({name:ReduxKey.address,initialState:initialState$7,reducers:{addAddress:(e,{payload:t})=>({...e,address:t}),addLocation:(e,{payload:t})=>({...e,location:t,getLocationIsError:!1}),removeAddress:({address:e,...t})=>t,setStartGettingLocation:(e,{payload:t})=>({...e,highAccuracyPurposeKey:t??initialState$7.highAccuracyPurposeKey,startGettingLocation:!0,getLocationIsError:!1}),setGetLocationIsError:(e,{payload:t})=>({...e,getLocationIsError:t,...t&&{startGettingLocation:!1}}),setIsGettingLocation:(e,{payload:t})=>({...e,isGettingLocation:t,...t&&{startGettingLocation:!1,getLocationIsError:!1}}),setLocationType:(e,{payload:{locationType:t}})=>({...e,locationType:t})}}),{addAddress,addLocation,removeAddress,setStartGettingLocation,setGetLocationIsError,setIsGettingLocation,setLocationType}=addressSlice.actions,persistWhitelist$4=["address","locationType"],addressModule={name:"AddressModule",slug:ModuleSlug.address,reduxConfigs:[{key:ReduxKey.address,migrations,persistVersion:0,slice:addressSlice,persistWhitelist:persistWhitelist$4}]},useListenerStatus=e=>{const[t,n]=reactExports.useState(null),s=reactExports.useRef(null);return reactExports.useEffect(()=>{var r;return(r=s.current)==null||r.remove(),s.current=e(i=>{n(i)}),()=>{var i;(i=s.current)==null||i.remove(),s.current=null}},[e]),t},createCoreClient=({developerName:e,organizationId:t,url:n})=>SalesforceMessagingInApp.createCoreClient(n,t,e),createConversationClient=e=>SalesforceMessagingInApp.createConversationClient(e??null),markAsRead=e=>SalesforceMessagingInApp.markAsRead(e),sendMessage=e=>SalesforceMessagingInApp.sendMessage(e),sendReply=e=>SalesforceMessagingInApp.sendReply(e),sendTypingEvent=()=>SalesforceMessagingInApp.sendTypingEvent(),sendPDF=(e,t)=>SalesforceMessagingInApp.sendPDF(e,t),sendImage=(e,t,n)=>SalesforceMessagingInApp.sendImage(e,t,n),retrieveRemoteConfiguration=()=>SalesforceMessagingInApp.retrieveRemoteConfiguration(),retrieveTranscript=()=>SalesforceMessagingInApp.retrieveTranscript(),generateUUID=()=>SalesforceMessagingInApp.generateUUID(),submitRemoteConfiguration=(e,t)=>SalesforceMessagingInApp.submitRemoteConfiguration(e,t),useCreateChat=({developerName:e,organizationId:t,url:n,conversationId:s=generateUUID()})=>{const[r,i]=reactExports.useState(!1),[a,o]=reactExports.useState(s),l=reactExports.useRef(null),u=reactExports.useRef(null),c=reactExports.useRef(null),d=reactExports.useRef(null),p=reactExports.useRef(null),[m,g]=reactExports.useState([]),[h,y]=reactExports.useState(!1),[I,E]=reactExports.useState(),[S,b]=reactExports.useState(null),j=useListenerStatus(SalesforceMessagingInApp.onNetworkStatusChanged),R=useListenerStatus(SalesforceMessagingInApp.onConnectionStatusChanged),[T,w]=reactExports.useState([]),[L,M]=reactExports.useState(!1),D=useTrackException(),N=reactExports.useMemo(()=>T.some(P=>P.role===ConversationEntrySenderRole.agent),[T]);return reactExports.useEffect(()=>{const P=[l,u,c,d,p];return e&&t&&n&&(w([]),g([]),E(void 0),createCoreClient({developerName:e,organizationId:t,url:n}).then(()=>{retrieveRemoteConfiguration().then(E,()=>{retrieveRemoteConfiguration().then(E,()=>{b({message:"Failed to retrieve remote configuration"})}).catch(x=>D(ExceptionLogKey.chatRetrieveRemoteConfiguration,"useCreateChat (index.tsx)",{error:x}))}),P.forEach(x=>{x.current&&(x.current.remove(),x.current=null)}),u.current=SalesforceMessagingInApp.onNewMessage(x=>{const C=x;C.format===ConversationEntryFormat.deliveryAcknowledgement?g(A=>A.map(v=>v.entryId===C.acknowledgedConversationEntryIdentifier?{...v,status:v.status!==ConversationEntryStatus.read?ConversationEntryStatus.delivered:ConversationEntryStatus.read}:v)):C.format===ConversationEntryFormat.readAcknowledgement?g(A=>A.map(v=>v.entryId===C.acknowledgedConversationEntryIdentifier?{...v,status:ConversationEntryStatus.read}:v)):g(A=>A.some(v=>v.entryId===C.entryId)?A.map(v=>v.entryId===C.entryId?C:v):[...A,C]),C.format===ConversationEntryFormat.participantChanged?C.operations.forEach(({participant:A,type:v})=>{v===ParticipantChangedOperationType.add?(w(k=>[...k,A]),A.role===ConversationEntrySenderRole.agent&&M(!1)):w(k=>k.filter(_=>!(_.displayName===A.displayName&&_.local===A.local&&_.role===A.role)))}):C.format===ConversationEntryFormat.routingResult&&C.routingType===ConversationEntryRoutingType.transfer&&M(!0)}),c.current=SalesforceMessagingInApp.onUpdatedMessage(x=>{const C=x;g(A=>A.map(v=>v.entryId===C.entryId?C:v))}),l.current=SalesforceMessagingInApp.onError(x=>{b(x)}),d.current=SalesforceMessagingInApp.onTypingStarted(x=>{y(x)}),p.current=SalesforceMessagingInApp.onTypingStopped(x=>{y(!1)}),createConversationClient(s??a).then(x=>{o(x),i(!0)}).catch(x=>D(ExceptionLogKey.chatCreateConversationClient,"useCreateChat (index.tsx)",{error:x}))})),()=>{P.forEach(x=>{var C;(C=x.current)==null||C.remove(),x.current=null})}},[s,e,t,n]),{agentInChat:N,connectionStatus:R,conversationId:a,isTyping:h,isWaitingForAgent:L,error:S,messages:m,networkStatus:j,participants:T,ready:r,remoteConfiguration:I}};var ChatVisibility=(e=>(e.maximized="maximized",e.minimized="minimized",e))(ChatVisibility||{});const initialState$6={headerHeight:0,isMenuOpen:!1,isOpen:!1,minimizedHeight:0,visibility:ChatVisibility.maximized,conversationId:void 0},chatSlice=createSlice({name:ReduxKey.chat,initialState:initialState$6,reducers:{closeChat:e=>({...e,isOpen:!1}),maximizeChat:e=>({...e,visibility:ChatVisibility.maximized}),minimizeChat:e=>({...e,visibility:ChatVisibility.minimized}),setHeightMinimized:(e,{payload:t})=>({...e,minimizedHeight:t}),openChat:e=>({...e,isOpen:!0,visibility:ChatVisibility.maximized}),clearChatMessages:e=>({...e,messages:[]}),toggleChatIsOpen:e=>({...e,isOpen:!e.isOpen}),toggleChatVisibility:e=>({...e,visibility:e.visibility===ChatVisibility.maximized?ChatVisibility.minimized:ChatVisibility.maximized}),setChatConversationId:(e,{payload:t})=>({...e,conversationId:t}),setChatHeaderHeight:(e,{payload:t})=>({...e,headerHeight:t}),setIsChatMenuOpen:(e,{payload:t})=>({...e,isMenuOpen:t})}}),{closeChat,openChat,minimizeChat,setHeightMinimized,toggleChatIsOpen,toggleChatVisibility,setChatConversationId,setChatHeaderHeight,setIsChatMenuOpen}=chatSlice.actions,{maximizeChat}=chatSlice.actions,selectChatIsOpen=e=>e[ReduxKey.chat].isOpen,selectChatVisibility=e=>e[ReduxKey.chat].visibility,selectChatMinimizedHeight=e=>e[ReduxKey.chat].minimizedHeight,selectChatConversationId=e=>e[ReduxKey.chat].conversationId,selectChatHeaderHeight=e=>e[ReduxKey.chat].headerHeight,selectIsMenuOpen=e=>e[ReduxKey.chat].isMenuOpen,useChat=()=>{const e=useSelector(selectChatIsOpen),t=useSelector(selectIsMenuOpen),n=useSelector(selectChatHeaderHeight),s=useSelector(selectChatConversationId),r=useSelector(selectChatVisibility),i=r===ChatVisibility.maximized,a=r===ChatVisibility.minimized,o=useSelector(selectChatMinimizedHeight),l=useDispatch(),u=reactExports.useCallback(()=>l(openChat()),[l]),c=reactExports.useCallback(()=>l(closeChat()),[l]),d=reactExports.useCallback(()=>l(maximizeChat()),[l]),p=reactExports.useCallback(()=>l(minimizeChat()),[l]),m=reactExports.useCallback(S=>l(setChatConversationId(S)),[l]),g=reactExports.useCallback(S=>l(setChatHeaderHeight(S)),[l]),h=reactExports.useCallback(S=>l(setIsChatMenuOpen(S)),[l]),y=reactExports.useCallback(S=>l(setHeightMinimized(S)),[l]),I=reactExports.useCallback(()=>l(toggleChatIsOpen()),[l]),E=reactExports.useCallback(()=>l(toggleChatVisibility()),[l]);return{close:c,conversationId:s,headerHeight:n,isMaximized:i,isMenuOpen:t,isMinimized:a,isOpen:e,open:u,maximize:d,minimize:p,minimizedHeight:o,setConversationId:m,setMinimizedHeight:y,setHeaderHeight:g,setIsMenuOpen:h,toggleIsOpen:I,toggleVisibility:E,visibility:r}},ChatAnimatedContentWrapper=({children:e})=>{const{isMaximized:t}=useChat(),{duration:n}=useTheme(),s=createStyles$d(),r=useAnimatedStyle(()=>({opacity:withTiming(t?1:0,{duration:n.transition.short})}));return jsxRuntimeExports.jsx(Animated.View,{style:[s.container,r],children:e})},createStyles$d=()=>stylesheet.create({container:{flexGrow:1}});try{ChatAnimatedContentWrapper.displayName="ChatAnimatedContentWrapper",ChatAnimatedContentWrapper.__docgenInfo={description:"",displayName:"ChatAnimatedContentWrapper",props:{}}}catch{}const useSafeAreaInsets=()=>({bottom:0,left:0,right:0,top:0}),CLOSE_CHAT_MESSAGE="Gebruiker heeft het gesprek verlaten",useCoreConfig=()=>{const{environment:e}=useSelector(selectEnvironment),t={};switch(e){case Environment.development:case Environment.custom:t.developerName=CHAT_DEVELOPER_NAME_DEV,t.organizationId=CHAT_ORGANIZATION_ID_DEV,t.url=CHAT_URL_DEV;break;case Environment.test:t.developerName=CHAT_DEVELOPER_NAME_TEST,t.organizationId=CHAT_ORGANIZATION_ID_TEST,t.url=CHAT_URL_TEST;break;case Environment.acceptance:t.developerName=CHAT_DEVELOPER_NAME_ACC,t.organizationId=CHAT_ORGANIZATION_ID_ACC,t.url=CHAT_URL_ACC;break;case Environment.production:t.developerName=CHAT_DEVELOPER_NAME_PROD,t.organizationId=CHAT_ORGANIZATION_ID_PROD,t.url=CHAT_URL_PROD;break}return t},isChatEnded=(e,t,n,s)=>{const r=e.filter(a=>a.format!==ConversationEntryFormat.transcript),i=r[r.length-1];return(i==null?void 0:i.format)===ConversationEntryFormat.routingWorkResult&&i.workType===ConversationEntryRoutingWorkType.closed&&!t||n&&!s},useIsChatEnded=(e,t,n)=>{const{value:s,enable:r}=useBoolean(!1),[i,a]=reactExports.useState(n);return reactExports.useEffect(()=>{n&&a(!0)},[n]),{isEnded:s||isChatEnded(e,t,i,n),endChat:r}},useMarkAsRead=e=>{const{isMaximized:t}=useChat(),n=e.filter(s=>s.sender.role!==ConversationEntrySenderRole.user&&s.format!==ConversationEntryFormat.readAcknowledgement);reactExports.useEffect(()=>{t&&n.length>0&&markAsRead(n[n.length-1])},[n,n.length,t])},useAsync=(e,t)=>{const n=reactExports.useCallback(()=>{e()},t);reactExports.useEffect(n,[n])},isNewMessage=e=>e===ConversationEntryFormat.attachments||e===ConversationEntryFormat.carousel||e===ConversationEntryFormat.imageMessage||e===ConversationEntryFormat.inputs||e===ConversationEntryFormat.listPicker||e===ConversationEntryFormat.richLink||e===ConversationEntryFormat.quickReplies||e===ConversationEntryFormat.selections||e===ConversationEntryFormat.text,useSendNotificationWhenInBackground=e=>{const t=useAppLifecycle(),{trackCustomEvent:n}=useTrackEvents();useAsync(async()=>{var s;if(t!=="active"&&!(Platform.OS==="ios"&&t==="background")&&isNewMessage((s=e[e.length-1])==null?void 0:s.format)){const r=await notifee.createChannel({id:"default",name:"Default Channel"});notifee.displayNotification({title:e[e.length-1].senderDisplayName,body:e[e.length-1].text,android:{channelId:r,pressAction:{id:"default"}},data:{maximizeChat:1,module:ModuleSlug.chat}}).then(()=>{n("chat-push-notification",PiwikAction.pushNotificationDisplay,{})})}},[e.length])},useSubmitRemoteConfiguration=e=>{const t=useTrackException();reactExports.useEffect(()=>{var n;if(e){const s=JSON.parse(JSON.stringify(e));(n=s.preChatConfiguration[0])==null||n.hiddenPreChatFields.forEach(r=>{r.name==="Origin"||r.name==="Chat_Origin"?r.value="App":r.name==="Start_Location"&&(r.value="contact")}),submitRemoteConfiguration(s,!0).catch(r=>t(ExceptionLogKey.chatSubmitRemoteConfiguration,"useSubmitRemoteConfiguration.ts",{error:r}))}},[e,t])},filterOutCloseChatMessage=e=>e.filter(({format:t,text:n,sender:{role:s}})=>!(t===ConversationEntryFormat.text&&n===CLOSE_CHAT_MESSAGE&&s===ConversationEntrySenderRole.user)),filterOutDeliveryAcknowledgements=e=>e.filter(({format:t})=>t!==ConversationEntryFormat.deliveryAcknowledgement&&t!==ConversationEntryFormat.readAcknowledgement),initialValue={addDownloadedTranscriptId:()=>null,agentInChat:!1,downloadedTranscriptIds:[],connectionStatus:null,endChat:()=>null,isEnded:!1,isWaitingForAgent:!1,messages:[],newMessagesCount:0,ready:!1,remoteConfiguration:void 0},ChatContext=reactExports.createContext(initialValue),ChatProvider=({children:e})=>{const{isMaximized:t,isMinimized:n}=useChat(),[s,r]=reactExports.useState(),[i,a]=reactExports.useState(0),[o,l]=reactExports.useState([]),u=useCoreConfig(),{messages:c,isTyping:d,conversationId:p,ready:m,agentInChat:g,remoteConfiguration:h,connectionStatus:y,isWaitingForAgent:I}=useCreateChat({...u,conversationId:s}),{isEnded:E,endChat:S}=useIsChatEnded(c,I,g),b=reactExports.useCallback(R=>{l(T=>[...T,R])},[]);reactExports.useEffect(()=>{var R;n&&isNewMessage((R=c[c.length-1])==null?void 0:R.format)&&a(T=>T+1)},[c.length]),reactExports.useEffect(()=>{t&&a(0)},[t]),reactExports.useEffect(()=>{r(p??s)},[s,p,r]),useSendNotificationWhenInBackground(c),useMarkAsRead(c),useSubmitRemoteConfiguration(h);const j=reactExports.useMemo(()=>{const R=filterOutCloseChatMessage(filterOutDeliveryAcknowledgements(c)),T=d&&!E?[...R,d]:R;return{addDownloadedTranscriptId:b,agentInChat:g,connectionStatus:y,downloadedTranscriptIds:o,endChat:S,isEnded:E,isWaitingForAgent:I,messages:T,newMessagesCount:i,ready:m&&(!!d||c.some(w=>w.format===ConversationEntryFormat.text)),remoteConfiguration:h}},[b,g,y,o,S,E,I,d,c,i,m,h]);return jsxRuntimeExports.jsx(ChatContext.Provider,{value:j,children:e})};try{ChatProvider.displayName="ChatProvider",ChatProvider.__docgenInfo={description:"",displayName:"ChatProvider",props:{}}}catch{}class EventEmitter{addListener(t,n){var r,i,a,o;this.listeners||(this.listeners=new Map),(r=this.listeners)!=null&&r.has(t)||(i=this.listeners)==null||i.set(t,new Set);const s=this.listenerCount(t);return(o=(a=this.listeners)==null?void 0:a.get(t))==null||o.add(n),s===0&&this.listenerCount(t)===1&&this.startObserving(t),{remove:()=>{this.removeListener(t,n)}}}removeListener(t,n){var r,i;const s=(i=(r=this.listeners)==null?void 0:r.get(t))==null?void 0:i.delete(n);this.listenerCount(t)===0&&s&&this.stopObserving(t)}removeAllListeners(t){var s,r;const n=this.listenerCount(t);(r=(s=this.listeners)==null?void 0:s.get(t))==null||r.clear(),n>0&&this.stopObserving(t)}emit(t,...n){var r;new Set((r=this.listeners)==null?void 0:r.get(t)).forEach(i=>{try{i(...n)}catch(a){console.error(a)}})}listenerCount(t){var n,s;return((s=(n=this.listeners)==null?void 0:n.get(t))==null?void 0:s.size)??0}startObserving(t){}stopObserving(t){}}let NativeModule$1=class extends EventEmitter{};class SharedObject extends EventEmitter{release(){}}class SharedRef extends SharedObject{constructor(){super(...arguments),this.nativeRefType="unknown"}}function f(e,t,n,s){switch(e){case 0:return t&n^~t&s;case 1:return t^n^s;case 2:return t&n^t&s^n&s;case 3:return t^n^s;default:return 0}}function ROTL(e,t){return e<<t|e>>>32-t}function sha1(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const a=unescape(encodeURIComponent(e));e=new Array(a.length);for(let o=0;o<a.length;o++)e[o]=a.charCodeAt(o)}e.push(128);const s=e.length/4+2,r=Math.ceil(s/16),i=new Array(r);for(let a=0;a<r;a++){i[a]=new Array(16);for(let o=0;o<16;o++)i[a][o]=e[a*64+o*4]<<24|e[a*64+o*4+1]<<16|e[a*64+o*4+2]<<8|e[a*64+o*4+3]}i[r-1][14]=(e.length-1)*8/Math.pow(2,32),i[r-1][14]=Math.floor(i[r-1][14]),i[r-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<r;a++){const o=new Array(80);for(let m=0;m<16;m++)o[m]=i[a][m];for(let m=16;m<80;m++)o[m]=ROTL(o[m-3]^o[m-8]^o[m-14]^o[m-16],1);let l=n[0],u=n[1],c=n[2],d=n[3],p=n[4];for(let m=0;m<80;m++){const g=Math.floor(m/20),h=ROTL(l,5)+f(g,u,c,d)+p+t[g]+o[m]>>>0;p=d,d=c,c=ROTL(u,30)>>>0,u=l,l=h}n[0]=n[0]+l>>>0,n[1]=n[1]+u>>>0,n[2]=n[2]+c>>>0,n[3]=n[3]+d>>>0,n[4]=n[4]+p>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}const byteToHex=[];for(let e=0;e<256;++e)byteToHex[e]=(e+256).toString(16).substr(1);function bytesToUuid(e,t){let n=0;const s=byteToHex;return[s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]]].join("")}function uuidToBytes(e){const t=[];return e.replace(/[a-fA-F0-9]{2}/g,n=>(t.push(parseInt(n,16)),"")),t}function stringToBytes(e){e=unescape(encodeURIComponent(e));const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function v35(e,t,n){const s=function(r,i,a,o){const l=a&&o||0;if(typeof r=="string"&&(r=stringToBytes(r)),typeof i=="string"&&(i=uuidToBytes(i)),!Array.isArray(r))throw TypeError("value must be an array of bytes");if(!Array.isArray(i)||i.length!==16)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const u=n(i.concat(r));if(u[6]=u[6]&15|t,u[8]=u[8]&63|128,a)for(let c=0;c<16;++c)a[l+c]=u[c];return bytesToUuid(u)};try{s.name=e}catch{}return s.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",s}function uuidv4(){return typeof crypto>"u"&&typeof window>"u"?eval("require")("node:crypto").randomUUID():crypto.randomUUID()}const uuid={v4:uuidv4,v5:v35("v5",80,sha1)};function registerWebGlobals(){var e;globalThis.expo||(globalThis.expo={EventEmitter,NativeModule:NativeModule$1,SharedObject,SharedRef,modules:((e=globalThis.ExpoDomWebView)==null?void 0:e.expoModulesProxy)??{},uuidv4:uuid.v4,uuidv5:uuid.v5,getViewConfig:()=>{throw new Error("Method not implemented.")},reloadAppAsync:async()=>{window.location.reload()}})}registerWebGlobals();function ensureNativeModulesAreInstalled(){var e;if(!globalThis.expo)try{Platform.OS==="web"?registerWebGlobals():(e=NativeModules.ExpoModulesCore)==null||e.installModules()}catch(t){console.error(`Unable to install Expo modules: ${t}`)}}ensureNativeModulesAreInstalled();const NativeModule=globalThis.expo.NativeModule;var PermissionStatus=(e=>(e.GRANTED="granted",e.UNDETERMINED="undetermined",e.DENIED="denied",e))(PermissionStatus||{});class FileSystemShim extends NativeModule{constructor(){super(...arguments),this.documentDirectory=null,this.cacheDirectory=null,this.bundleDirectory=null}}var FileSystemSessionType=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e))(FileSystemSessionType||{}),EncodingType=(e=>(e.UTF8="utf8",e.Base64="base64",e))(EncodingType||{});FileSystemShim||console.warn("No native ExponentFileSystem module found, are you sure the expo-file-system's module is linked properly?");function normalizeEndingSlash(e){return e!=null?e.replace(/\/*$/,"")+"/":null}const documentDirectory=normalizeEndingSlash(FileSystemShim.documentDirectory);normalizeEndingSlash(FileSystemShim.cacheDirectory);normalizeEndingSlash(FileSystemShim.bundleDirectory);async function readAsStringAsync(e,t={}){if(!FileSystemShim.readAsStringAsync)throw new UnavailabilityError("expo-file-system","readAsStringAsync");return await FileSystemShim.readAsStringAsync(e,t)}async function writeAsStringAsync(e,t,n={}){if(!FileSystemShim.writeAsStringAsync)throw new UnavailabilityError("expo-file-system","writeAsStringAsync");return await FileSystemShim.writeAsStringAsync(e,t,n)}async function deleteAsync(e,t={}){if(!FileSystemShim.deleteAsync)throw new UnavailabilityError("expo-file-system","deleteAsync");return await FileSystemShim.deleteAsync(e,t)}async function moveAsync(e){if(!FileSystemShim.moveAsync)throw new UnavailabilityError("expo-file-system","moveAsync");return await FileSystemShim.moveAsync(e)}async function copyAsync(e){if(!FileSystemShim.copyAsync)throw new UnavailabilityError("expo-file-system","copyAsync");return await FileSystemShim.copyAsync(e)}async function downloadAsync(e,t,n={}){if(!FileSystemShim.downloadAsync)throw new UnavailabilityError("expo-file-system","downloadAsync");return await FileSystemShim.downloadAsync(e,t,{sessionType:FileSystemSessionType.BACKGROUND,...n})}const baseReadAsStringAsync=readAsStringAsync,baseWriteAsStringAsync=writeAsStringAsync,baseDeleteAsync=deleteAsync,baseMoveAsync=moveAsync,baseCopyAsync=copyAsync;var StorageAccessFramework;(e=>{function t(a){return`content://com.android.externalstorage.documents/tree/primary:${a}/document/primary:${a}`}e.getUriForDirectoryInRoot=t;async function n(a=null){if(!FileSystemShim.requestDirectoryPermissionsAsync)throw new UnavailabilityError("expo-file-system","StorageAccessFramework.requestDirectoryPermissionsAsync");return await FileSystemShim.requestDirectoryPermissionsAsync(a)}e.requestDirectoryPermissionsAsync=n;async function s(a){if(!FileSystemShim.readSAFDirectoryAsync)throw new UnavailabilityError("expo-file-system","StorageAccessFramework.readDirectoryAsync");return await FileSystemShim.readSAFDirectoryAsync(a)}e.readDirectoryAsync=s;async function r(a,o){if(!FileSystemShim.makeSAFDirectoryAsync)throw new UnavailabilityError("expo-file-system","StorageAccessFramework.makeDirectoryAsync");return await FileSystemShim.makeSAFDirectoryAsync(a,o)}e.makeDirectoryAsync=r;async function i(a,o,l){if(!FileSystemShim.createSAFFileAsync)throw new UnavailabilityError("expo-file-system","StorageAccessFramework.createFileAsync");return await FileSystemShim.createSAFFileAsync(a,o,l)}e.createFileAsync=i,e.writeAsStringAsync=baseWriteAsStringAsync,e.readAsStringAsync=baseReadAsStringAsync,e.deleteAsync=baseDeleteAsync,e.moveAsync=baseMoveAsync,e.copyAsync=baseCopyAsync})(StorageAccessFramework||(StorageAccessFramework={}));const Sharing={async isAvailableAsync(){return typeof navigator>"u"?!1:!!navigator.share},async shareAsync(e,t={}){if(navigator.share)await navigator.share({...t,url:e});else throw new UnavailabilityError("navigator","share")}};async function shareAsync(e,t={}){if(!Sharing||!Sharing.shareAsync)throw new UnavailabilityError("Sharing","shareAsync");return await Sharing.shareAsync(e,t)}const contentTypeToUTI={"application/pdf":"com.adobe.pdf","image/png":"public.png","image/jpeg":"public.jpeg","image/gif":"com.compuserve.gif","image/bmp":"com.microsoft.bmp","image/svg+xml":"public.svg-image"},downloadFile=async(e,t)=>{const{headers:n,uri:s}=await downloadAsync(e,documentDirectory+t);return{uri:s,mimeType:n["content-type"]}},fileExtensionToMimeType={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",pdf:"application/pdf",txt:"text/plain",mp4:"video/mp4",mp3:"audio/mpeg",json:"application/json"},saveFile=async({base64:e,downloadUri:t,fileName:n,localUri:s})=>{try{if(t){const{mimeType:r,uri:i}=await downloadFile(t,n),a=await readContentsAsBase64(i);await saveFileOnDevice(a,n,r)}else if(e)await saveFileOnDevice(e.data,n,e.mimeType);else if(s){const r=await readContentsAsBase64(s);await saveFileOnDevice(r,n)}else throw"Give either base64 or downloadUri as an argument to saveFile."}catch(r){throw devLog(r),r}},requestDirectoryPermission=async()=>{try{const e=await StorageAccessFramework.requestDirectoryPermissionsAsync();if(e.granted)return e.directoryUri;throw"Not granted directory permission."}catch{throw"Requesting directory permission failed."}},createEmptyFile=async(e,t,n="application/pdf")=>{try{return await StorageAccessFramework.createFileAsync(e,t,n)}catch{throw"Creating empty file failed."}},readContentsAsBase64=async e=>{try{return await StorageAccessFramework.readAsStringAsync(e,{encoding:EncodingType.Base64})}catch{throw"Reading file as base64 string failed."}},writeFileContentsAsBase64String=async(e,t)=>{try{await StorageAccessFramework.writeAsStringAsync(e,t,{encoding:EncodingType.Base64}),devLog(`saved to file ${e}`)}catch{throw"Writing base64 string to file failed."}},shareFile=async(e,t,n)=>{const s=`${documentDirectory}${t}`;try{await writeAsStringAsync(s,e,{encoding:EncodingType.Base64}),await shareAsync(s,{mimeType:n,UTI:n?contentTypeToUTI[n]:void 0}),devLog(`saved to file ${s}`)}catch{throw"Failed to share file with other applications."}},saveOnAndroid=async(e,t,n)=>{try{const s=await requestDirectoryPermission(),r=await createEmptyFile(s,t,n);await writeFileContentsAsBase64String(r,e)}catch(s){throw await shareFile(e,t,n),s}},saveFileOnDevice=async(e,t,n)=>{const s=fileExtensionToMimeType[t.split(".").pop()||""]||n;Platform.OS==="android"?await saveOnAndroid(e,t,s):await shareFile(e,t,s)},formatDateTime=e=>e==null||e===""?"":dayjs(e).format("D MMMM YYYY HH.mm:ss"),downloadChat=async()=>{try{const{transcript:e,entryId:t}=await retrieveTranscript(),n=`Chatgeschiedenis ${formatDateTime(dayjs()).replaceAll("."," ").replaceAll(":"," ")}.pdf`;return await saveFile({base64:{data:e,mimeType:"application/pdf"},fileName:n}),t}catch(e){devError(e,JSON.stringify(e)),Alert.alert("Chat downloaden mislukt.")}};var RedirectEndpointName=(e=>(e.getRedirectUrls="getRedirectUrls",e))(RedirectEndpointName||{});const redirectApi=baseApi.injectEndpoints({endpoints:e=>({[RedirectEndpointName.getRedirectUrls]:e.query({query:()=>({slug:ModuleSlug.contact,url:"/links"}),keepUnusedDataFor:CacheLifetime.hour})}),overrideExisting:!0}),{useGetRedirectUrlsQuery}=redirectApi,useChatMenuItems=()=>{const{setIsMenuOpen:e,close:t}=useChat(),{addDownloadedTranscriptId:n,endChat:s,ready:r,isEnded:i}=reactExports.useContext(ChatContext),a=useOpenWebUrl(),{data:o,isLoading:l,isError:u}=useGetRedirectUrlsQuery(),c=useTrackException();return reactExports.useMemo(()=>{const d=[];return d.push({color:"link",label:"Chat downloaden",onPress:()=>{e(!1),downloadChat().then(p=>p&&n(p))},testID:"ChatMenuPressableDownloadChatMenuItem"}),!l&&!u&&d.push({color:"link",label:"Privacy",onPress:()=>{o!=null&&o.chatPrivacy?(e(!1),a(o.chatPrivacy)):(Alert.alert("Sorry, deze functie is nu niet beschikbaar. Probeer het later nog eens."),c(ExceptionLogKey.getRedirectsUrl,"ChatMenu.ts",{redirectsKey:"chatPrivacy"}))},testID:"ChatMenuPressableChatPrivacyMenuItem"}),i||d.push({color:"warning",label:"Chat stoppen",onPress:()=>{e(!1),r?(sendMessage(CLOSE_CHAT_MESSAGE).catch(p=>c(ExceptionLogKey.chatSendMessage,"useChatMenuItems.ts",{error:p})),s()):t()},testID:"ChatMenuPressableStopChatMenuItem"}),d},[n,t,s,i,u,l,a,r,o==null?void 0:o.chatPrivacy,e,c])},ChatMenu=()=>{const{headerHeight:e,isMenuOpen:t}=useChat(),n=useChatMenuItems(),s=useSafeAreaInsets();return jsxRuntimeExports.jsx(PopUpMenu,{isVisible:t,menuItems:n,orientation:PopupMenuOrientation.left,topInset:e+s.top})},CHAT_MINIMIZED_HEIGHT=60,HEIGHT_CORRECTION=8,ChatAnimatedWrapper=({children:e})=>{const t=useTheme(),{isOpen:n}=useBottomSheet(),{isMaximized:s}=useChat(),[r,i]=reactExports.useState(0),a=useSharedValue(0),o=useSharedValue(0),l=useSharedValue(s?1:0),u=useSafeAreaInsets(),{fontScale:c}=useDeviceContext(),{newMessagesCount:d}=reactExports.useContext(ChatContext),{setSpaceBottom:p}=useScreen(),m=createStyles$c(t,u),g=CHAT_MINIMIZED_HEIGHT*c+u.bottom;reactExports.useEffect(()=>{l.value=withTiming(s?1:0)},[s,l]),reactExports.useEffect(()=>(p(g-HEIGHT_CORRECTION),()=>{p(0)}),[g,p]),reactExports.useEffect(()=>{d>0&&!s&&!n?o.value=withRepeat(withSequence(withTiming(-25,{duration:400}),withSpring(0,{duration:1e3,dampingRatio:.3}),withTiming(0,{duration:3e3})),-1):o.value=0},[o,s,n,d]),reactExports.useEffect(()=>{a.value=withTiming(s?0:r-(n?0:g))},[s,a,r,n,g]);const h=useAnimatedStyle(()=>({transform:[{translateY:a.value+o.value}],backgroundColor:interpolateColor(l.value,[0,1],[t.color.chat.minimized.background,t.color.chat.maximized.background]),borderTopColor:interpolateColor(l.value,[0,1],[t.color.chat.border,"transparent"]),borderTopWidth:interpolate(l.value,[0,1],[t.border.width.md,0])})),y=useAnimatedStyle(()=>({transform:[{translateY:interpolate(l.value,[0,1],[-u.top,0])}]}));return jsxRuntimeExports.jsxs(Animated.View,{entering:SlideInDown,exiting:SlideOutDown,onLayout:I=>{i(I.nativeEvent.layout.height)},style:[stylesheet.absoluteFill,m.container,h],children:[jsxRuntimeExports.jsx(ChatMenu,{}),jsxRuntimeExports.jsx(Animated.View,{style:[m.inner,y],children:e})]})},createStyles$c=({z:e},t)=>stylesheet.create({container:{paddingTop:t.top,paddingRight:t.right,paddingBottom:t.bottom,paddingLeft:t.left,zIndex:e.overlay-1},inner:{flexGrow:1}});try{ChatAnimatedWrapper.displayName="ChatAnimatedWrapper",ChatAnimatedWrapper.__docgenInfo={description:"",displayName:"ChatAnimatedWrapper",props:{}}}catch(e){}const ScreenHeaderTitle=({accessibilityLanguage:e="nl-NL",text:t})=>jsxRuntimeExports.jsx(Title,{accessibilityLanguage:e,level:"h5",numberOfLines:1,testID:"HeaderTitle",text:t,textAlign:"center"});try{ScreenHeaderTitle.displayName="ScreenHeaderTitle",ScreenHeaderTitle.__docgenInfo={description:"",displayName:"ScreenHeaderTitle",props:{accessibilityLanguage:{defaultValue:{value:"nl-NL"},description:"",name:"accessibilityLanguage",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}}}}}catch(e){}const NewMessageIndicator=()=>{const{newMessagesCount:e}=reactExports.useContext(ChatContext);return e?jsxRuntimeExports.jsx(Badge,{accessibilityLabel:e+" "+simplur`[nieuw bericht|nieuwe berichten]${[e]} `,testID:"ChatNewMessageIndicatorBadge",value:e,variant:"small"}):null},PressableWhenMinimized=({children:e,isMaximized:t,onPress:n,style:s,...r})=>t?e:jsxRuntimeExports.jsx(PressableBase,{...r,onPress:n,style:s,children:e}),ChatHeader=()=>{const{isMaximized:e,isMenuOpen:t,setHeaderHeight:n,setIsMenuOpen:s,toggleVisibility:r}=useChat(),{setHideFromAccessibility:i}=useScreen(),{color:a}=useTheme(),o=createStyles$b(),l=useAnimatedStyle(()=>({transform:[{rotate:withTiming(e?"0deg":"-180deg")}]})),u=useAnimatedStyle(()=>({opacity:withTiming(e?1:0)})),c=()=>{r(),Keyboard.dismiss(),s(!1)};return reactExports.useEffect(()=>(i(e),()=>{i(!1)}),[e,i]),jsxRuntimeExports.jsx(View,{onLayout:d=>n(d.nativeEvent.layout.height),style:o.container,children:jsxRuntimeExports.jsx(PressableWhenMinimized,{accessibilityHint:"Activeer om de chat te maximaliseren",isMaximized:e,onPress:r,style:o.pressableWhenMinimized,testID:"ChatHeaderMaximizeButton",children:jsxRuntimeExports.jsx(Box,{testID:"ChatHeader",children:jsxRuntimeExports.jsxs(Row,{align:"between",children:[jsxRuntimeExports.jsx(Animated.View,{style:u,children:jsxRuntimeExports.jsx(IconButton,{accessibilityLabel:`Chat menu ${t?"sluiten":"openen"}.`,icon:jsxRuntimeExports.jsx(MeatballsMenuIcon,{color:a.pressable.secondary.default.icon}),onPress:()=>s(!t),pointerEvents:e?"auto":"none",testID:"ChatHeaderMeatballsMenuButton"})}),jsxRuntimeExports.jsx(View,{accessible:!0,children:jsxRuntimeExports.jsxs(Row,{gutter:"xs",children:[jsxRuntimeExports.jsx(ScreenHeaderTitle,{text:"Chat"}),jsxRuntimeExports.jsx(NewMessageIndicator,{})]})}),jsxRuntimeExports.jsx(Animated.View,{style:l,children:jsxRuntimeExports.jsx(IconButton,{accessibilityLabel:`Chat ${e?"minimaliseren":"maximaliseren"}`,icon:jsxRuntimeExports.jsx(Icon,{color:"link",name:"chevron-down",size:"lg",testID:"ChatHeaderToggleVisibilityButtonIcon"}),onPress:c,testID:"ChatHeaderToggleVisibilityButton"})})]})})})})},createStyles$b=()=>stylesheet.create({container:{zIndex:1},pressableWhenMinimized:{flexGrow:1}}),ChatStartTime=({firstMessage:e})=>jsxRuntimeExports.jsx(ChatSystemEntry,{icon:"chat",testID:"ChatStartingTimeEntry",text:"Chat gestart",timestamp:(e==null?void 0:e.timestamp)??dayjs().unix()});try{ChatStartTime.displayName="ChatStartTime",ChatStartTime.__docgenInfo={description:"",displayName:"ChatStartTime",props:{firstMessage:{defaultValue:null,description:"",name:"firstMessage",required:!1,type:{name:"ConversationEntry"}}}}}catch(e){}const BOT_NAME="Chatbot Gemeente Amsterdam",getMessageStatus=e=>{switch(e){case ConversationEntryStatus.sent:return"Verzonden";case ConversationEntryStatus.delivered:return"Bezorgd";case ConversationEntryStatus.read:return"Gelezen";case ConversationEntryStatus.error:return"Mislukt";case ConversationEntryStatus.sending:return"Wordt verzonden...";default:return"Onbekend"}},getChatAgentInfo=(e,t,n,s,r)=>{const i=dayjsFromUnix(n).format("HH:mm");return t===ConversationEntrySenderRole.user?r?`${i} - ${getMessageStatus(s)}`:i:t===ConversationEntrySenderRole.chatbot?`${BOT_NAME} - ${i}`:`${e} - ${i}`},ChatAgentInfo=({message:{sender:{role:e},senderDisplayName:t,timestamp:n,status:s},isLastOfGroup:r})=>{const i=useThemable(o=>createStyles$a(o,e===ConversationEntrySenderRole.user)),{agentInChat:a}=reactExports.useContext(ChatContext);return e===ConversationEntrySenderRole.system?null:!!r&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Gutter,{height:"xs"}),jsxRuntimeExports.jsx(View,{style:i.container,children:jsxRuntimeExports.jsx(Phrase,{color:"secondary",testID:`ChatHistoryGroupName${e}Phrase`,variant:"extraSmall",children:getChatAgentInfo(t,e,n,s,a)})})]})},AVATAR_DIMENSION=40,createStyles$a=({size:e},t)=>stylesheet.create({container:{paddingLeft:t?void 0:AVATAR_DIMENSION+e.spacing.sm,alignItems:t?"flex-end":"flex-start"}});try{ChatAgentInfo.displayName="ChatAgentInfo",ChatAgentInfo.__docgenInfo={description:"",displayName:"ChatAgentInfo",props:{isLast:{defaultValue:null,description:"",name:"isLast",required:!0,type:{name:"boolean"}},isLastOfGroup:{defaultValue:null,description:"",name:"isLastOfGroup",required:!0,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntry"}}}}}catch(e){}const AvatarAgent=()=>{const{color:e}=useTheme();return jsxRuntimeExports.jsxs(Svg,{fill:"none",height:"40",viewBox:"0 0 40 40",width:"40",children:[jsxRuntimeExports.jsx(Circle,{cx:"20",cy:"20",fill:e.chat.avatar.background,r:"19.5",stroke:e.chat.avatar.border}),jsxRuntimeExports.jsx(Path,{"clip-rule":"evenodd",d:"M20 35C13.5 35 9 30.5 9 30.1981C9 24.5731 12.15 21.625 16.5 21.625H24C28.35 21.625 31.5 24.0062 31.5 29.6312C31.5 30.1981 26.5 35 20 35ZM20.25 19.75C23.3397 19.7096 25.8346 17.2147 25.875 14.125C25.875 11.0184 23.3566 8.5 20.25 8.5C17.1434 8.5 14.625 11.0184 14.625 14.125C14.6654 17.2147 17.1603 19.7096 20.25 19.75Z",fill:e.chat.avatar.foreground,"fill-rule":"evenodd"})]})},AvatarBot=()=>{const{color:e}=useTheme();return jsxRuntimeExports.jsxs(Svg,{fill:"none",height:"40",viewBox:"0 0 40 40",width:"40",children:[jsxRuntimeExports.jsx(Circle,{cx:"20",cy:"20",fill:e.chat.avatar.background,r:"19.5",stroke:e.chat.avatar.border}),jsxRuntimeExports.jsx(Path,{d:"M16.3604 30.9196L18.5404 28.7396L16.3604 26.5396L17.8204 25.0996L20.0004 27.2796L22.1804 25.0996L23.6404 26.5396L21.4604 28.7396L23.6404 30.9196L22.1804 32.3596L20.0004 30.1796L17.8204 32.3596L16.3604 30.9196Z",fill:e.logo}),jsxRuntimeExports.jsx(Path,{d:"M16.3604 22.1799L18.5404 19.9999L16.3604 17.8199L17.8204 16.3799L20.0004 18.5599L22.1804 16.3799L23.6404 17.8199L21.4604 19.9999L23.6404 22.1799L22.1804 23.6399L20.0004 21.4599L17.8204 23.6399L16.3604 22.1799Z",fill:e.logo}),jsxRuntimeExports.jsx(Path,{d:"M16.3604 13.4596L18.5404 11.2596L16.3604 9.07965L17.8204 7.63965L20.0004 9.81965L22.1804 7.63965L23.6404 9.07965L21.4604 11.2596L23.6404 13.4596L22.1804 14.8996L20.0004 12.7196L17.8204 14.8996L16.3604 13.4596Z",fill:e.logo})]})},ChatMessageBubble=({children:e,senderRole:t})=>{const n=useThemable(s=>createStyles$9(s,t));return jsxRuntimeExports.jsx(View,{accessible:!0,style:n.bubble,children:e})},createStyles$9=({color:e,size:t},n)=>{const s=n===ConversationEntrySenderRole.user,r=12;return stylesheet.create({bubble:{flexShrink:1,borderRadius:r,borderBottomRightRadius:s?0:r,borderBottomLeftRadius:s?r:0,backgroundColor:e.chat.message[n].background,paddingHorizontal:t.spacing.md,paddingVertical:t.spacing.sm}})};try{ChatMessageBubble.displayName="ChatMessageBubble",ChatMessageBubble.__docgenInfo={description:"",displayName:"ChatMessageBubble",props:{senderRole:{defaultValue:null,description:"",name:"senderRole",required:!0,type:{name:"enum",value:[{value:'"Agent"'},{value:'"Chatbot"'},{value:'"System"'},{value:'"USER"'}]}}}}}catch(e){}const isAgent=e=>e.sender.role===ConversationEntrySenderRole.agent||e.sender.role===ConversationEntrySenderRole.system&&e.format===ConversationEntryFormat.text,ChatMessageEntry=({message:e,children:t,isText:n=!0})=>{const s=e.sender.role===ConversationEntrySenderRole.user;return jsxRuntimeExports.jsxs(Row,{align:s?"end":"start",gutter:"sm",valign:"end",children:[e.sender.role===ConversationEntrySenderRole.chatbot&&jsxRuntimeExports.jsx(AvatarBot,{}),isAgent(e)&&jsxRuntimeExports.jsx(AvatarAgent,{}),n?jsxRuntimeExports.jsx(ChatMessageBubble,{senderRole:e.sender.role,children:t}):t]})};try{ChatMessageEntry.displayName="ChatMessageEntry",ChatMessageEntry.__docgenInfo={description:"",displayName:"ChatMessageEntry",props:{isText:{defaultValue:{value:"true"},description:"",name:"isText",required:!1,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntry"}}}}}catch(e){}const ThumbnailViewer=({accessibilityLabel:e="Afbeelding, miniatuurweergave.",fileName:t="afbeelding.jpg",imageSource:n,thumbnailSize:s,headerTitle:r,...i})=>{const[a,o]=reactExports.useState(!1),[l,u]=reactExports.useState(),c=useSafeAreaInsets(),d=()=>{o(!a)},p=reactExports.useMemo(()=>{if(typeof n!="number")return n&&typeof n=="object"&&"uri"in n?n.uri:void 0},[n]);reactExports.useEffect(()=>{ImageWithStatics.getSize(p??"",(h,y)=>u(h/y),h=>devLog(h))},[p]);const m=useThemable(h=>createStyles$8(h,s,c,l)),g=p==null?void 0:p.startsWith("file://");return jsxRuntimeExports.jsxs(View,{children:[jsxRuntimeExports.jsx(Pressable,{...i,accessibilityLabel:e,onPress:d,testID:"ThumbnailViewerThumbnailButton",children:jsxRuntimeExports.jsx(ImageWithStatics,{source:n,style:m.thumbnail,testID:"ThumbnailViewerThumbnailImage"})}),jsxRuntimeExports.jsx(Modal,{animationType:"fade",onRequestClose:d,supportedOrientations:["portrait","landscape"],testID:"ThumbnailViewerModal",transparent:!0,visible:a,children:jsxRuntimeExports.jsxs(View,{style:m.overlay,children:[jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsxs(Row,{align:"between",children:[jsxRuntimeExports.jsx(IconButton,{accessibilityLabel:"Terug",icon:jsxRuntimeExports.jsx(Icon,{color:"link",name:"chevron-left",size:"lg",testID:"ThumbnailViewerCloseIcon"}),onPress:d,testID:"ThumbnailViewerCloseButton"}),!!r&&jsxRuntimeExports.jsx(ScreenHeaderTitle,{text:r}),jsxRuntimeExports.jsx(IconButton,{accessibilityLabel:"Download de afbeelding.",icon:jsxRuntimeExports.jsx(Icon,{color:"link",name:"download",size:"lg",testID:"ThumbnailViewerDownloadIcon"}),onPress:()=>saveFile({localUri:g?p:void 0,downloadUri:g?void 0:p,fileName:t}),testID:"ThumbnailViewerDownloadButton"})]})}),jsxRuntimeExports.jsx(ImageWithStatics,{accessibilityLabel:"Afbeelding",accessible:!0,resizeMode:"contain",source:n,style:m.fullImage,testID:"ThumbnailViewerFullImage"})]})})]})},createStyles$8=({color:e,size:t,z:n},s,r,i)=>stylesheet.create({thumbnail:{width:s,height:s},overlay:{flex:1,backgroundColor:e.box.background.distinct,justifyContent:"center",zIndex:n.overlay,paddingTop:Platform.OS==="android"?0:r.top,paddingRight:r.right,paddingBottom:t.spacing.md+r.bottom,paddingLeft:r.left},fullImage:{aspectRatio:i,alignSelf:"center",maxWidth:"100%",maxHeight:"100%",flex:1}});try{ThumbnailViewer.displayName="ThumbnailViewer",ThumbnailViewer.__docgenInfo={description:"",displayName:"ThumbnailViewer",props:{fileName:{defaultValue:{value:"afbeelding.jpg"},description:"",name:"fileName",required:!1,type:{name:"string"}},headerTitle:{defaultValue:null,description:"",name:"headerTitle",required:!1,type:{name:"string"}},imageSource:{defaultValue:null,description:"",name:"imageSource",required:!0,type:{name:"ImageSourcePropType | undefined"}},thumbnailSize:{defaultValue:null,description:"",name:"thumbnailSize",required:!0,type:{name:"DimensionValue"}},"logging-label":{defaultValue:null,description:"",name:"logging-label",required:!1,type:{name:"string"}},inset:{defaultValue:null,description:"The amount of inner spacing.",name:"inset",required:!1,type:{name:"enum",value:[{value:'"no"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"xxl"'},{value:'"xxs"'},{value:'"xs"'},{value:'"smd"'}]}},insetHorizontal:{defaultValue:null,description:"The amount of inner spacing at the left and right.",name:"insetHorizontal",required:!1,type:{name:"enum",value:[{value:'"no"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"xxl"'},{value:'"xxs"'},{value:'"xs"'},{value:'"smd"'}]}},insetVertical:{defaultValue:null,description:"The amount of inner spacing at the top and bottom.",name:"insetVertical",required:!1,type:{name:"enum",value:[{value:'"no"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"xxl"'},{value:'"xxs"'},{value:'"xs"'},{value:'"smd"'}]}},border:{defaultValue:null,description:"",name:"border",required:!1,type:{name:"boolean"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"transparent"'},{value:'"tertiary"'},{value:'"primary"'}]}},logAction:{defaultValue:null,description:"",name:"logAction",required:!1,type:{name:"enum",value:[{value:'"accessibilityAction"'},{value:'"accessibilityChange"'},{value:'"addressAdd"'},{value:'"addressChange"'},{value:'"blur"'},{value:'"buttonPress"'},{value:'"deviceInfoChange"'},{value:'"finishedReport"'},{value:'"locationOrAddressSelectionChange"'},{value:'"moduleChange"'},{value:'"pushNotificationDisplay"'},{value:'"pushNotificationTap"'},{value:'"radioChange"'},{value:'"startUp"'},{value:'"swipeOut"'},{value:'"toForeground"'},{value:'"toggle"'}]}},logCategory:{defaultValue:null,description:"",name:"logCategory",required:!1,type:{name:"enum",value:[{value:'"about"'},{value:'"access-code"'},{value:'"address"'},{value:'"chat"'},{value:'"city-pass"'},{value:'"construction-work"'},{value:'"construction-work-editor"'},{value:'"contact"'},{value:'"home"'},{value:'"notification-history"'},{value:'"onboarding"'},{value:'"parking"'},{value:'"redirects"'},{value:'"report-problem"'},{value:'"user"'},{value:'"waste-container"'},{value:'"waste-guide"'},{value:'"general"'}]}},logDimensions:{defaultValue:null,description:"Custom dimensions to log with the event.",name:"logDimensions",required:!1,type:{name:"Partial<Record<CustomDimensionKeys, string>>"}},logName:{defaultValue:null,description:"",name:"logName",required:!1,type:{name:"string"}},logValue:{defaultValue:null,description:"",name:"logValue",required:!1,type:{name:"number"}}}}}catch(e){}const THUMBNAIL_SIZE=220,ChatMessageImage=({image:e,message:{sender:t,senderDisplayName:n}})=>{const s=t.role===ConversationEntrySenderRole.user,r=createStyles$7(s);return jsxRuntimeExports.jsx(View,{style:r.container,children:jsxRuntimeExports.jsx(ThumbnailViewer,{accessibilityLabel:`Miniatuurweergave van door ${s?"u":n} gedeelde afbeelding.`,fileName:e.name,imageSource:{uri:e.url},thumbnailSize:THUMBNAIL_SIZE})})},createStyles$7=e=>stylesheet.create({container:{overflow:"hidden",alignItems:"center",justifyContent:"center",borderRadius:12,borderBottomRightRadius:e?0:12,borderBottomLeftRadius:e?12:0}});try{ChatMessageImage.displayName="ChatMessageImage",ChatMessageImage.__docgenInfo={description:"",displayName:"ChatMessageImage",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"Attachment"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntry"}}}}}catch(e){}const EntryAttachments=({message:e})=>{const t=e.attachments[0].mimeType.startsWith("image"),n=e.sender.role===ConversationEntrySenderRole.agent;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e.attachments.map(s=>t?jsxRuntimeExports.jsx(ChatMessageEntry,{isText:!1,message:e,children:jsxRuntimeExports.jsx(ChatMessageImage,{image:s,message:e})},s.id):jsxRuntimeExports.jsx(ChatMessageEntry,{message:e,children:jsxRuntimeExports.jsxs(Row,{grow:1,gutter:"sm",children:[jsxRuntimeExports.jsx(Icon,{color:n?"link":"inverse",name:"document",size:"lg",testID:"EntryAttachmentsIcon"}),n?jsxRuntimeExports.jsx(InlineLink,{accessibilityLabel:`Bijlage gedeeld door ${e.senderDisplayName}. Dubbeltik om bijlage te downloaden.`,ellipsizeMode:"middle",emphasis:"strong",inverse:e.sender.role===ConversationEntrySenderRole.user,numberOfLines:1,onPress:()=>{saveFile({downloadUri:s.url,fileName:s.name})},testID:"ChatEntryAttachmentsInlineLink",children:s.name}):jsxRuntimeExports.jsx(Phrase,{color:"inverse",testID:"ChatEntryAttachmentFileNamePhrase",textAlign:"center",children:s.name})]})},s.id))})};try{EntryAttachments.displayName="EntryAttachments",EntryAttachments.__docgenInfo={description:"",displayName:"EntryAttachments",props:{message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntryAttachments"}}}}}catch(e){}const EntryGutter=({isLastOfGroup:e})=>jsxRuntimeExports.jsx(Gutter,{height:e?"md":"sm"});try{EntryGutter.displayName="EntryGutter",EntryGutter.__docgenInfo={description:"",displayName:"EntryGutter",props:{isLastOfGroup:{defaultValue:null,description:"",name:"isLastOfGroup",required:!0,type:{name:"boolean"}}}}}catch(e){}const EntryChoices=({message:{choices:e},isLastOfGroup:t})=>{const n=useTrackException(),[s,r]=reactExports.useState(!1),i=reactExports.useCallback(a=>{sendReply(a).then(()=>r(!0)).catch(o=>n(ExceptionLogKey.chatSendReply,"EntryChoices.tsx",{error:o}))},[n]);return e&&!s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Gutter,{height:"sm"}),jsxRuntimeExports.jsx(Row,{align:"end",gutter:"sm",wrap:!0,children:e.map(({optionId:a,title:o,optionValue:l,parentEntryId:u})=>jsxRuntimeExports.jsx(Button,{accessibilityLabel:`Keuzeknop: ${o}`,label:o,onPressOut:()=>{i({optionId:a,title:o,optionValue:l,parentEntryId:u})},testID:`ChatHistoryChoices${o}Button`,variant:"secondary"},a))}),jsxRuntimeExports.jsx(EntryGutter,{isLastOfGroup:t})]}):null};try{EntryChoices.displayName="EntryChoices",EntryChoices.__docgenInfo={description:"",displayName:"EntryChoices",props:{isLastOfGroup:{defaultValue:null,description:"",name:"isLastOfGroup",required:!0,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntryQuickReplies"}}}}}catch(e){}const hasDisplayname=e=>!!e&&e!=="User",EntryParticipantChanged=({message:e,isLastOfGroup:t})=>{const n=e.operations.find(i=>i.type===ParticipantChangedOperationType.add&&i.participant.role===ConversationEntrySenderRole.agent),s=e.operations.find(i=>i.type===ParticipantChangedOperationType.remove&&i.participant.role===ConversationEntrySenderRole.agent);if(!n&&!s)return null;const r=n?n.participant.displayName:s==null?void 0:s.participant.displayName;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ChatSystemEntry,{icon:"person",testID:`ChatSystemMessage${e.format}Entry`,text:n?`U chat nu met ${hasDisplayname(r)?r:"een medewerker"}`:`${hasDisplayname(r)?r:"Medewerker"} heeft het gesprek verlaten`,timestamp:e.timestamp}),jsxRuntimeExports.jsx(EntryGutter,{isLastOfGroup:t})]})};try{EntryParticipantChanged.displayName="EntryParticipantChanged",EntryParticipantChanged.__docgenInfo={description:"",displayName:"EntryParticipantChanged",props:{isLastOfGroup:{defaultValue:null,description:"",name:"isLastOfGroup",required:!0,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntryParticipantChanged"}}}}}catch(e){}const getDomainName=e=>{if(!e)return null;const n=RegExp(/https?:\/\/([^/?]+)/).exec(e);return n!=null&&n[1]?n[1]:e},EntryRichLink=({message:e})=>{const t=useOpenUrl(),{title:n,url:s}=e,r=getDomainName(s),i=reactExports.useCallback(()=>{s&&t(s,!1)},[t,s]);return jsxRuntimeExports.jsxs(ChatMessageEntry,{message:e,children:[jsxRuntimeExports.jsx(PressableBase,{onPressOut:i,testID:"ChatMessageRichLinkTitleLink",children:jsxRuntimeExports.jsx(Phrase,{color:e.sender.role===ConversationEntrySenderRole.user?"inverse":"link",emphasis:"strong",testID:"ChatMessageRichLinkTitle",underline:!0,children:n})}),!!r&&jsxRuntimeExports.jsx(PressableBase,{onPressOut:i,testID:"ChatMessageRichLinkUrlLink",children:jsxRuntimeExports.jsx(Phrase,{color:e.sender.role===ConversationEntrySenderRole.user?"inverse":"link",testID:"ChatMessageRichLinkUrlPhrase",underline:!0,children:r})})]})};try{EntryRichLink.displayName="EntryRichLink",EntryRichLink.__docgenInfo={description:"",displayName:"EntryRichLink",props:{message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntryRichLink"}}}}}catch(e){}const DEFAULT_DOT_ACTIVE_SIZE=10,DEFAULT_DOT_INACTIVE_SIZE=8,DOT_BORDER_RADIUS=8,Dot=({activeSize:e,inactiveSize:t,index:n,sharedValue:s})=>{const{color:r}=useTheme(),i=createStyles$6(e,t),a=useAnimatedStyle(()=>{const o=n===Math.floor(s.value);return{backgroundColor:o?r.chat.loading.active:r.chat.loading.inactive,height:withTiming(o?e:t),width:withTiming(o?e:t)}},[n,s]);return jsxRuntimeExports.jsx(View,{style:i.loadingDot,children:jsxRuntimeExports.jsx(Animated.View,{style:[i.loadingDotInner,a]})})},LoadingDots=({dotActiveSize:e=DEFAULT_DOT_ACTIVE_SIZE,dotInactiveSize:t=DEFAULT_DOT_INACTIVE_SIZE})=>{const n=useSharedValue(0);return reactExports.useEffect(()=>{n.value=withRepeat(withTiming(4,{duration:1e3,easing:Easing.bezier(.5,.5,.5,1)}),-1)},[n]),jsxRuntimeExports.jsx(Row,{align:"center",gutter:"xs",children:Array.from({length:3}).map((s,r)=>jsxRuntimeExports.jsx(Dot,{activeSize:e,inactiveSize:t,index:r,sharedValue:n},r))})},createStyles$6=(e,t)=>stylesheet.create({loadingDot:{justifyContent:"center",alignItems:"center",marginHorizontal:t*3/4-e/2,borderRadius:DOT_BORDER_RADIUS,height:e,width:e},loadingDotInner:{borderRadius:DOT_BORDER_RADIUS}});try{LoadingDots.displayName="LoadingDots",LoadingDots.__docgenInfo={description:"",displayName:"LoadingDots",props:{dotActiveSize:{defaultValue:{value:"10"},description:"",name:"dotActiveSize",required:!1,type:{name:"number"}},dotInactiveSize:{defaultValue:{value:"8"},description:"",name:"dotInactiveSize",required:!1,type:{name:"number"}}}}}catch(e){}const getWaitingTimePhrase=e=>e<=60?"minder dan een minuut":`${Math.ceil(e/60)} minuten`,EntryRoutingResult=({message:e,isLastOfGroup:t})=>{const{isEWTAvailable:n,estimatedWaitTime:s,routingType:r}=e,{isWaitingForAgent:i,messages:a}=reactExports.useContext(ChatContext),l=a.slice(a.indexOf(e)+1).filter(u=>u.format===ConversationEntryFormat.text).length>0;return r!==ConversationEntryRoutingType.transfer||!i||l?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Column,{gutter:"sm",halign:"center",children:[jsxRuntimeExports.jsx(LoadingDots,{dotActiveSize:15,dotInactiveSize:12}),jsxRuntimeExports.jsx(Phrase,{emphasis:"strong",testID:"ChatEntryRoutingResultPhrase",children:"Een medewerker neemt het gesprek over."}),!!n&&jsxRuntimeExports.jsxs(Phrase,{testID:"ChatEntryRoutingResultEstimatedWaitingTimePhrase",children:["Geschatte wachttijd: ",getWaitingTimePhrase(s)]})]}),jsxRuntimeExports.jsx(EntryGutter,{isLastOfGroup:t})]})};try{EntryRoutingResult.displayName="EntryRoutingResult",EntryRoutingResult.__docgenInfo={description:"",displayName:"EntryRoutingResult",props:{isLastOfGroup:{defaultValue:null,description:"",name:"isLastOfGroup",required:!0,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntryRoutingResult"}}}}}catch(e){}const EntryRoutingWorkResult=({message:e,isLastOfGroup:t})=>{const{messages:n,isEnded:s}=reactExports.useContext(ChatContext),i=n.slice(n.indexOf(e)+1).filter(a=>a.format===ConversationEntryFormat.routingWorkResult).length>0;return e.workType!==ConversationEntryRoutingWorkType.closed||!s||i?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ChatSystemEntry,{icon:"chat",testID:"ChatEntryRoutingWorkResultEntry",text:"Chat gestopt",timestamp:e.timestamp}),jsxRuntimeExports.jsx(EntryGutter,{isLastOfGroup:t})]})};try{EntryRoutingWorkResult.displayName="EntryRoutingWorkResult",EntryRoutingWorkResult.__docgenInfo={description:"",displayName:"EntryRoutingWorkResult",props:{isLast:{defaultValue:null,description:"",name:"isLast",required:!0,type:{name:"boolean"}},isLastOfGroup:{defaultValue:null,description:"",name:"isLastOfGroup",required:!0,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntryRoutingWorkResult"}}}}}catch(e){}const parseTextToComponentsForLinks=(e,t,n=s=>s)=>{const s=/((?:(?:https?:\/\/)|(?:www.))[^\s]+)/g;return e.split(s).filter(i=>i.length>0).map(i=>s.test(i)?t(i.startsWith("http")?i:`http://${i}`):n(i))},parseTextToComponentsWithInlineLinks=(e,t,n)=>parseTextToComponentsForLinks(e,s=>jsxRuntimeExports.jsx(InlineLink,{inverse:n,onPress:()=>t(s),testID:`InlineLink${s}Link`,children:s})),MessagePhrase=({children:e,message:t,testID:n,...s})=>{const r=useOpenWebUrl();return jsxRuntimeExports.jsx(Phrase,{...s,color:t.sender.role===ConversationEntrySenderRole.user?"inverse":void 0,testID:n,children:parseTextToComponentsWithInlineLinks(e,r,t.sender.role===ConversationEntrySenderRole.user)})};try{MessagePhrase.displayName="MessagePhrase",MessagePhrase.__docgenInfo={description:"",displayName:"MessagePhrase",props:{message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntry"}},color:{defaultValue:null,description:"Defines the color of the phrase. Maps with the text color tokens.",name:"color",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"link"'},{value:'"cityPass"'},{value:'"confirm"'},{value:'"inverse"'},{value:'"secondary"'},{value:'"tertiary"'},{value:'"warning"'}]}},emphasis:{defaultValue:null,description:"Allows the phrase to convey more emphasis.",name:"emphasis",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"strong"'}]}},flexShrink:{defaultValue:null,description:"Defines how to shrink the phrase in case the parent container is smaller than the phrase.",name:"flexShrink",required:!1,type:{name:"number"}},"logging-label":{defaultValue:null,description:"Label used for logging to Piwik and AppInsights.",name:"logging-label",required:!1,type:{name:"string"}},textAlign:{defaultValue:null,description:"Defines the alignment of the text. Maps with the textAlign style prop options.",name:"textAlign",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"center"'},{value:'"left"'},{value:'"right"'},{value:'"justify"'}]}},underline:{defaultValue:null,description:"Whether the phrase is underlined. Use this for a link only.",name:"underline",required:!1,type:{name:"boolean"}},variant:{defaultValue:null,description:"Which variation of a phrase to display.",name:"variant",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"body"'},{value:'"intro"'},{value:'"quote"'},{value:'"extraSmall"'}]}}}}}catch(e){}const EntrySelections=({message:e})=>{var t;return jsxRuntimeExports.jsx(ChatMessageEntry,{message:e,children:jsxRuntimeExports.jsx(MessagePhrase,{message:e,testID:"ChatEntrySelectionsPhrase",children:(t=e.selections)==null?void 0:t.map(n=>n.title).join(", ")})})};try{EntrySelections.displayName="EntrySelections",EntrySelections.__docgenInfo={description:"",displayName:"EntrySelections",props:{message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntrySelections"}}}}}catch(e){}const EntryText=({message:e})=>{const t=e.sender.role===ConversationEntrySenderRole.user;return jsxRuntimeExports.jsx(ChatMessageEntry,{message:e,children:jsxRuntimeExports.jsx(MessagePhrase,{accessibilityLabel:t?`Uw bericht: ${e.text}`:`${e.text} ontvangen van ${e.senderDisplayName}`,message:e,testID:"ChatEntryText",children:e.text})})};try{EntryText.displayName="EntryText",EntryText.__docgenInfo={description:"",displayName:"EntryText",props:{message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntryText"}}}}}catch(e){}const EntryTranscript=({message:e})=>{const{downloadedTranscriptIds:t}=reactExports.useContext(ChatContext);return t.includes(e.entryId)?jsxRuntimeExports.jsx(ChatSystemEntry,{icon:"download",testID:"ChatEntryTranscriptEntry",text:"Chat gedownload",timestamp:e.timestamp}):null};try{EntryTranscript.displayName="EntryTranscript",EntryTranscript.__docgenInfo={description:"",displayName:"EntryTranscript",props:{message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntry"}}}}}catch(e){}const EntryTypingIndicator=({dotActiveSize:e,dotInactiveSize:t,message:n})=>jsxRuntimeExports.jsx(ChatMessageEntry,{message:n,children:jsxRuntimeExports.jsx(Box,{insetVertical:"xs",children:jsxRuntimeExports.jsx(LoadingDots,{dotActiveSize:e,dotInactiveSize:t})})});try{EntryTypingIndicator.displayName="EntryTypingIndicator",EntryTypingIndicator.__docgenInfo={description:"",displayName:"EntryTypingIndicator",props:{dotActiveSize:{defaultValue:null,description:"",name:"dotActiveSize",required:!1,type:{name:"number"}},dotInactiveSize:{defaultValue:null,description:"",name:"dotInactiveSize",required:!1,type:{name:"number"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntryTypingStartedIndicator"}}}}}catch(e){}const options={[ConversationEntryFormat.selections]:{Component:EntrySelections,agentInfo:!0,LastComponent:EntryGutter},[ConversationEntryFormat.text]:{Component:EntryText,agentInfo:!0,LastComponent:EntryGutter},[ConversationEntryFormat.attachments]:{Component:EntryAttachments,agentInfo:!1,LastComponent:EntryGutter},[ConversationEntryFormat.carousel]:{Component:void 0,LastComponent:void 0,agentInfo:void 0},[ConversationEntryFormat.deliveryAcknowledgement]:{Component:void 0,LastComponent:void 0,agentInfo:void 0},[ConversationEntryFormat.imageMessage]:{Component:void 0,LastComponent:void 0,agentInfo:void 0},[ConversationEntryFormat.inputs]:{Component:void 0,LastComponent:void 0,agentInfo:void 0},[ConversationEntryFormat.listPicker]:{Component:EntryText,LastComponent:EntryChoices,agentInfo:!0},[ConversationEntryFormat.participantChanged]:{Component:EntryParticipantChanged,agentInfo:!1},[ConversationEntryFormat.quickReplies]:{Component:EntryText,LastComponent:EntryChoices,agentInfo:!0},[ConversationEntryFormat.readAcknowledgement]:{Component:void 0,LastComponent:void 0,agentInfo:void 0},[ConversationEntryFormat.result]:{Component:void 0,LastComponent:void 0,agentInfo:void 0},[ConversationEntryFormat.richLink]:{Component:EntryRichLink,agentInfo:!0,LastComponent:EntryGutter},[ConversationEntryFormat.routingResult]:{Component:EntryRoutingResult,agentInfo:!1},[ConversationEntryFormat.routingWorkResult]:{Component:EntryRoutingWorkResult,agentInfo:!1},[ConversationEntryFormat.typingStartedIndicator]:{Component:EntryTypingIndicator,agentInfo:!1,LastComponent:EntryGutter},[ConversationEntryFormat.typingStoppedIndicator]:{Component:void 0,LastComponent:void 0,agentInfo:void 0},[ConversationEntryFormat.unspecified]:{Component:void 0,LastComponent:void 0,agentInfo:void 0},[ConversationEntryFormat.webview]:{Component:void 0,LastComponent:void 0,agentInfo:void 0},[ConversationEntryFormat.transcript]:{Component:EntryTranscript,LastComponent:EntryGutter}},Entry=({message:e,isLast:t,isLastOfGroup:n})=>{const s=options[e.format];if(!s)return null;const{Component:r,agentInfo:i,LastComponent:a}=s;return!r&&!a&&!i?null:jsxRuntimeExports.jsxs(Animated.View,{entering:SlideInDown,children:[!!r&&jsxRuntimeExports.jsx(r,{isLast:t,isLastOfGroup:n,message:e}),!!i&&jsxRuntimeExports.jsx(ChatAgentInfo,{isLast:t,isLastOfGroup:n,message:e}),!!a&&jsxRuntimeExports.jsx(a,{isLast:t,isLastOfGroup:n,message:e})]})};try{Entry.displayName="Entry",Entry.__docgenInfo={description:"",displayName:"Entry",props:{isLast:{defaultValue:null,description:"",name:"isLast",required:!0,type:{name:"boolean"}},isLastOfGroup:{defaultValue:null,description:"",name:"isLastOfGroup",required:!0,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"ConversationEntry"}}}}}catch(e){}const checkIsMessageLastOfGroup=(e,t,n)=>{var s,r,i;return((s=n[t+1])==null?void 0:s.sender.role)!==e.sender.role||e.sender.role===ConversationEntrySenderRole.user&&((r=n[t+1])==null?void 0:r.status)!==e.status||dayjsFromUnix((i=n[t+1])==null?void 0:i.timestamp).format("HH:mm")!==dayjsFromUnix(e.timestamp).format("HH:mm")},ChatHistory=()=>{const e=reactExports.useRef(null),t=createStyles$5(),{messages:n}=reactExports.useContext(ChatContext);return jsxRuntimeExports.jsx(ForwardedScrollView,{contentContainerStyle:t.contentContainer,keyboardShouldPersistTaps:"handled",onContentSizeChange:()=>{var s;return(s=e==null?void 0:e.current)==null?void 0:s.scrollToEnd()},onScrollBeginDrag:Keyboard.dismiss,ref:e,style:t.scrollView,testID:"ChatHistoryScrollView",children:jsxRuntimeExports.jsx(Box,{grow:!0,insetHorizontal:"md",children:jsxRuntimeExports.jsxs(Column,{children:[jsxRuntimeExports.jsx(ChatStartTime,{firstMessage:n[0]}),jsxRuntimeExports.jsx(Gutter,{height:"md"}),n.map((s,r)=>{const i=checkIsMessageLastOfGroup(s,r,n);return jsxRuntimeExports.jsx(Entry,{isLast:r===n.length-1,isLastOfGroup:i,message:s},s.entryId+r)})]})})})},createStyles$5=()=>stylesheet.create({contentContainer:{flexGrow:1},scrollView:{flex:1}}),ExpoDocumentPicker={async getDocumentAsync({type:e="*/*",multiple:t=!1}){if(!Platform$1.isDOMAvailable)return{canceled:!0,assets:null};const n=document.createElement("input");return n.style.display="none",n.setAttribute("type","file"),n.setAttribute("accept",Array.isArray(e)?e.join(","):e),n.setAttribute("id",String(Math.random())),t&&n.setAttribute("multiple","multiple"),document.body.appendChild(n),new Promise((s,r)=>{n.addEventListener("change",async()=>{if(n.files){const a=[];for(let o=0;o<n.files.length;o++)a.push(readFileAsync(n.files[o]));try{const o=await Promise.all(a);s({canceled:!1,assets:o,output:n.files})}catch(o){r(o)}}else s({canceled:!0,assets:null});document.body.removeChild(n)}),n.addEventListener("cancel",()=>{s({canceled:!0,assets:null})});const i=new MouseEvent("click");n.dispatchEvent(i)})}};function readFileAsync(e){return new Promise((t,n)=>{const s=e.type,r=new FileReader;r.onerror=()=>{n(new Error("Failed to read the selected media because the operation failed."))},r.onload=({target:i})=>{const a=i.result;t({uri:a,mimeType:s,name:e.name,lastModified:e.lastModified,size:e.size,file:e})},r.readAsDataURL(e)})}async function getDocumentAsync({type:e="*/*",copyToCacheDirectory:t=!0,multiple:n=!1}={}){return typeof e=="string"&&(e=[e]),await ExpoDocumentPicker.getDocumentAsync({type:e,copyToCacheDirectory:t,multiple:n})}var MediaTypeOptions;(function(e){e.All="All",e.Videos="Videos",e.Images="Images"})(MediaTypeOptions||(MediaTypeOptions={}));var VideoExportPreset;(function(e){e[e.Passthrough=0]="Passthrough",e[e.LowQuality=1]="LowQuality",e[e.MediumQuality=2]="MediumQuality",e[e.HighestQuality=3]="HighestQuality",e[e.H264_640x480=4]="H264_640x480",e[e.H264_960x540=5]="H264_960x540",e[e.H264_1280x720=6]="H264_1280x720",e[e.H264_1920x1080=7]="H264_1920x1080",e[e.H264_3840x2160=8]="H264_3840x2160",e[e.HEVC_1920x1080=9]="HEVC_1920x1080",e[e.HEVC_3840x2160=10]="HEVC_3840x2160"})(VideoExportPreset||(VideoExportPreset={}));var UIImagePickerControllerQualityType;(function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low",e[e.VGA640x480=3]="VGA640x480",e[e.IFrame1280x720=4]="IFrame1280x720",e[e.IFrame960x540=5]="IFrame960x540"})(UIImagePickerControllerQualityType||(UIImagePickerControllerQualityType={}));var UIImagePickerPresentationStyle;(function(e){e.FULL_SCREEN="fullScreen",e.PAGE_SHEET="pageSheet",e.FORM_SHEET="formSheet",e.CURRENT_CONTEXT="currentContext",e.OVER_FULL_SCREEN="overFullScreen",e.OVER_CURRENT_CONTEXT="overCurrentContext",e.POPOVER="popover",e.AUTOMATIC="automatic"})(UIImagePickerPresentationStyle||(UIImagePickerPresentationStyle={}));var UIImagePickerPreferredAssetRepresentationMode;(function(e){e.Automatic="automatic",e.Compatible="compatible",e.Current="current"})(UIImagePickerPreferredAssetRepresentationMode||(UIImagePickerPreferredAssetRepresentationMode={}));var CameraType;(function(e){e.back="back",e.front="front"})(CameraType||(CameraType={}));function parseMediaTypes(e){const t={Images:["images"],Videos:["videos"],All:["images","videos"]};return e===MediaTypeOptions.Images||e===MediaTypeOptions.Videos||e===MediaTypeOptions.All?(console.warn("[expo-image-picker] `ImagePicker.MediaTypeOptions` have been deprecated. Use `ImagePicker.MediaType` or an array of `ImagePicker.MediaType` instead."),t[e]):typeof e=="string"?[e]:e}function mapDeprecatedOptions(e){return e.mediaTypes?{...e,mediaTypes:parseMediaTypes(e.mediaTypes??[])}:e}const MediaTypeInput={images:"image/*",videos:"video/mp4,video/quicktime,video/x-m4v,video/*",livePhotos:""},ExponentImagePicker={async launchImageLibraryAsync({mediaTypes:e=["images"],allowsMultipleSelection:t=!1,base64:n=!1}){return Platform$1.isDOMAvailable?await openFileBrowserAsync({mediaTypes:e,allowsMultipleSelection:t,base64:n}):{canceled:!0,assets:null}},async launchCameraAsync({mediaTypes:e=MediaTypeOptions.Images,allowsMultipleSelection:t=!1,base64:n=!1}){return Platform$1.isDOMAvailable?await openFileBrowserAsync({mediaTypes:e,allowsMultipleSelection:t,capture:!0,base64:n}):{canceled:!0,assets:null}},async getCameraPermissionsAsync(){return permissionGrantedResponse()},async requestCameraPermissionsAsync(){return permissionGrantedResponse()},async getMediaLibraryPermissionsAsync(e){return permissionGrantedResponse()},async requestMediaLibraryPermissionsAsync(e){return permissionGrantedResponse()}};function permissionGrantedResponse(){return{status:PermissionStatus.GRANTED,expires:"never",granted:!0,canAskAgain:!0}}function openFileBrowserAsync({mediaTypes:e,capture:t=!1,allowsMultipleSelection:n=!1,base64:s}){const r=parseMediaTypes(e),i=createMediaTypeFormat(r),a=document.createElement("input");return a.style.display="none",a.setAttribute("type","file"),a.setAttribute("accept",i),a.setAttribute("id",String(Math.random())),a.setAttribute("data-testid","file-input"),n&&a.setAttribute("multiple","multiple"),t&&a.setAttribute("capture","camera"),document.body.appendChild(a),new Promise(o=>{a.addEventListener("change",async()=>{var u;if((u=a.files)!=null&&u.length){const c=n?a.files:[a.files[0]],d=await Promise.all(Array.from(c).map(p=>readFile(p,{base64:s})));o({canceled:!1,assets:d})}else o({canceled:!0,assets:null});document.body.removeChild(a)}),a.addEventListener("cancel",()=>{a.dispatchEvent(new Event("change"))});const l=new MouseEvent("click");a.dispatchEvent(l)})}function readFile(e,t){return new Promise((n,s)=>{const r=new FileReader;r.onerror=()=>{s(new Error("Failed to read the selected media because the operation failed."))},r.onload=({target:i})=>{const a=i.result,o=()=>n({uri:a,width:0,height:0}),l=u=>{n({...u,...t.base64&&{base64:a.substr(a.indexOf(",")+1)},file:e})};if(typeof a=="string")if(e.type.startsWith("image/")){const u=new Image;u.src=a,u.onload=()=>{l({uri:a,width:u.naturalWidth??u.width,height:u.naturalHeight??u.height,type:"image",mimeType:e.type,fileName:e.name,fileSize:e.size})},u.onerror=()=>o()}else if(e.type.startsWith("video/")){const u=document.createElement("video");u.preload="metadata",u.src=a,u.onloadedmetadata=()=>{l({uri:a,width:u.videoWidth,height:u.videoHeight,type:"video",mimeType:e.type,fileName:e.name,fileSize:e.size,duration:u.duration})},u.onerror=()=>o()}else o();else o()},r.readAsDataURL(e)})}function createMediaTypeFormat(e){const t=e.filter(s=>s!=="livePhotos");if(t.length===0)return"image/*";let n="";for(const s of t)n.includes(MediaTypeInput[s])||(n=n.concat(",",MediaTypeInput[s]));return n}function validateOptions(e){const{aspect:t,quality:n,videoMaxDuration:s}=e;if(t!=null){const[r,i]=t;if(r<=0||i<=0)throw new CodedError("ERR_INVALID_ARGUMENT",`Invalid aspect ratio values ${r}:${i}. Provide positive numbers.`)}if(n&&(n<0||n>1))throw new CodedError("ERR_INVALID_ARGUMENT",`Invalid 'quality' value ${n}. Provide a value between 0 and 1.`);if(s&&s<0)throw new CodedError("ERR_INVALID_ARGUMENT",`Invalid 'videoMaxDuration' value ${s}. Provide a non-negative number.`);return e}async function launchCameraAsync(e={}){if(!ExponentImagePicker.launchCameraAsync)throw new UnavailabilityError("ImagePicker","launchCameraAsync");const t=mapDeprecatedOptions(e);return await ExponentImagePicker.launchCameraAsync(validateOptions(t))}async function launchImageLibraryAsync(e={}){const t=mapDeprecatedOptions(e);if(!ExponentImagePicker.launchImageLibraryAsync)throw new UnavailabilityError("ImagePicker","launchImageLibraryAsync");return t!=null&&t.allowsEditing&&t.allowsMultipleSelection&&console.warn("[expo-image-picker] `allowsEditing` is not supported when `allowsMultipleSelection` is enabled and will be ignored.Disable either 'allowsEditing' or 'allowsMultipleSelection' in 'launchImageLibraryAsync' to fix this warning."),await ExponentImagePicker.launchImageLibraryAsync(t)}const requestPermission=async e=>{if(e===Permissions.notifications)return(await requestNotifications(["alert","badge","carPlay","sound"])).status;if(e)return request(e)},usePermission=e=>{const t=useSelector(selectIsPermissionGranted(e)),n=useDispatch(),s=useTrackException(),r=reactExports.useCallback(()=>new Promise((i,a)=>{requestPermission(e).then(o=>{const l=o===RESULTS.GRANTED;n(setPermission({permission:e,granted:l})),i(l)}).catch(o=>{n(setPermission({permission:e,granted:!1})),s(ExceptionLogKey.updatePermission,"usePermission.ts",{error:o,permission:e,request:!0}),a(o)})}),[n,e,s]);return{hasPermission:t,requestPermission:r}},ChatAttachmentButton=reactExports.forwardRef(({onPress:e,iconName:t,testID:n,label:s},r)=>{const i=useThemable(createStyles$4);return jsxRuntimeExports.jsx(PressableBase,{onPress:e,ref:r,testID:n,children:jsxRuntimeExports.jsxs(Column,{gutter:"xs",halign:"center",children:[jsxRuntimeExports.jsx(View,{style:i.circle,children:jsxRuntimeExports.jsx(Icon,{color:"link",name:t,size:"xl",testID:`${n}Icon`})}),jsxRuntimeExports.jsx(Phrase,{testID:`${n}Phrase`,children:s})]})})}),createStyles$4=({color:e,size:t})=>stylesheet.create({circle:{backgroundColor:e.chat.attachmentButtonCircle.background,borderRadius:50,padding:t.spacing.md}});try{ChatAttachmentButton.displayName="ChatAttachmentButton",ChatAttachmentButton.__docgenInfo={description:"",displayName:"ChatAttachmentButton",props:{iconName:{defaultValue:null,description:"",name:"iconName",required:!0,type:{name:"enum",value:[{value:'"search"'},{value:'"alert"'},{value:'"list"'},{value:'"document"'},{value:'"parkingSession"'},{value:'"accessCode"'},{value:'"add"'},{value:'"alarm"'},{value:'"alarmFilled"'},{value:'"announcement"'},{value:'"api"'},{value:'"asterisk"'},{value:'"attachment"'},{value:'"biometrics"'},{value:'"chat"'},{value:'"circle-check-mark"'},{value:'"clock"'},{value:'"backspace"'},{value:'"camera"'},{value:'"car"'},{value:'"card"'},{value:'"chatting"'},{value:'"check-mark"'},{value:'"chevron-down"'},{value:'"chevron-left"'},{value:'"chevron-right"'},{value:'"chevron-up"'},{value:'"child"'},{value:'"circle"'},{value:'"city-office"'},{value:'"city-pass-pass"'},{value:'"city-pass"'},{value:'"close"'},{value:'"collaborate"'},{value:'"construction-work"'},{value:'"copy"'},{value:'"documentCheckmark"'},{value:'"document-text"'},{value:'"download"'},{value:'"edit"'},{value:'"euroCoins"'},{value:'"email"'},{value:'"enlarge"'},{value:'"error"'},{value:'"external-link"'},{value:'"eye"'},{value:'"facade"'},{value:'"faceId"'},{value:'"housing"'},{value:'"park-sign"'},{value:'"info"'},{value:'"keyboard"'},{value:'"location"'},{value:'"lock"'},{value:'"login"'},{value:'"organic-waste-container"'},{value:'"parking"'},{value:'"parkingCar"'},{value:'"person"'},{value:'"person-desk"'},{value:'"phone"'},{value:'"picture"'},{value:'"pointer"'},{value:'"question-mark-circle"'},{value:'"settings"'},{value:'"spinner"'},{value:'"touchId"'},{value:'"trash-bin"'},{value:'"vote"'},{value:'"wasteCard"'},{value:'"whatsapp"'},{value:'"wifi-disconnect"'}]}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},onPress:{defaultValue:null,description:"",name:"onPress",required:!0,type:{name:"() => void"}},testID:{defaultValue:null,description:"",name:"testID",required:!0,type:{name:"`${string}Button` | `${string}Alert` | `${string}Icon` | `${string}Label` | `${string}Value` | `${string}Subtitle` | `${string}ProgressStep` | `${string}Preview` | `${string}OpenImagePicker` | `${string}Sections` | `${string}Entry` | `${string}FullScreenError` | `${string}Screen` | `${string}Field` | `${string}Fract..."}}}}}catch(e){}const fileName="ChatAttachment.tsx",ChatAttachment=({onSelect:e,minHeight:t})=>{const n=useAccessibilityFocus(Duration.long),s=useThemable(createStyles$3),r=useTrackException(),{hasPermission:i,requestPermission:a}=usePermission(Permissions.camera),o=reactExports.useCallback(()=>{launchImageLibraryAsync({mediaTypes:MediaTypeOptions.Images,allowsMultipleSelection:!1,allowsEditing:!1,base64:!0}).then(c=>{var d,p;if((d=c.assets)!=null&&d[0].uri){const m=(p=c.assets)==null?void 0:p[0];sendImage(m.base64,m.fileName??"image.png",m.uri).then(e,g=>{Alert.alert("Sorry, opsturen van de afbeelding is mislukt. Probeer het later nog eens."),r(ExceptionLogKey.chatSendImageFromLibrary,fileName,{error:g})})}},c=>{Alert.alert("Afbeelding kiezen is mislukt","Sorry, kiezen van een afbeelding is mislukt. Probeer het later nog eens."),r(ExceptionLogKey.chatPickImageFromLibrary,fileName,{error:c})})},[e,r]),l=reactExports.useCallback(async()=>{i||await a(),launchCameraAsync({mediaTypes:MediaTypeOptions.Images,allowsMultipleSelection:!1,allowsEditing:!1,base64:!0}).then(c=>{var d,p;if((d=c.assets)!=null&&d[0].uri){const m=(p=c.assets)==null?void 0:p[0];sendImage(m.base64,m.fileName??"image.png",m.uri).then(e,g=>{Alert.alert("Foto opsturen is niet gelukt","Sorry, opsturen van de afbeelding is mislukt. Probeer het later nog eens."),r(ExceptionLogKey.chatSendImageFromCamera,fileName,{error:g})})}},c=>{Alert.alert("Foto maken is niet gelukt","Sorry, maken van een foto is mislukt. Probeer het later nog eens."),r(ExceptionLogKey.chatTakeImageWithCamera,fileName,{error:c})})},[i,a,e,r]),u=reactExports.useCallback(()=>{getDocumentAsync({type:"application/pdf"}).then(c=>{var p;const d=(p=c.assets)==null?void 0:p[0];if(d){const{uri:m,name:g}=d;sendPDF(m,g).then(e,h=>{Alert.alert("PDF opsturen is mislukt","Sorry, opsturen van het PDF document is mislukt. Probeer het later nog eens."),r(ExceptionLogKey.chatSendPDF,fileName,{error:h})})}},c=>{Alert.alert("PDF kiezen is mislukt","Sorry, kiezen van een PDF document is mislukt. Probeer het later nog eens."),r(ExceptionLogKey.chatPickPDF,fileName,{error:c})})},[e,r]);return jsxRuntimeExports.jsx(Animated.View,{entering:SlideInDown,style:[s.attachments,{minHeight:Math.round(t??0)}],children:jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsxs(Row,{align:"evenly",gutter:"sm",children:[jsxRuntimeExports.jsx(ChatAttachmentButton,{iconName:"picture",label:"Foto",onPress:o,ref:n,testID:"ChatAttachmentLibraryButton"}),jsxRuntimeExports.jsx(ChatAttachmentButton,{iconName:"camera",label:"Camera",onPress:l,testID:"ChatAttachmentCameraButton"}),jsxRuntimeExports.jsx(ChatAttachmentButton,{iconName:"document",label:"PDF",onPress:u,testID:"ChatAttachmentPdfButton"})]})})})},createStyles$3=({color:e})=>stylesheet.create({attachments:{backgroundColor:e.chat.attachment.background}});try{ChatAttachment.displayName="ChatAttachment",ChatAttachment.__docgenInfo={description:"",displayName:"ChatAttachment",props:{minHeight:{defaultValue:null,description:"",name:"minHeight",required:!1,type:{name:"number"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"() => void"}}}}}catch(e){}const ChatEnded=()=>{const{close:e}=useChat(),{addDownloadedTranscriptId:t}=reactExports.useContext(ChatContext);return jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsxs(Column,{gutter:"smd",children:[jsxRuntimeExports.jsx(Button,{label:"Chat downloaden",onPress:()=>{downloadChat().then(n=>n&&t(n))},testID:"ChatEndedDownloadButton",variant:"secondary"}),jsxRuntimeExports.jsx(Button,{label:"Chat sluiten",onPress:e,testID:"ChatEndedCloseButton"})]})})},ChatInput=({onSubmit:e})=>{const t=useIsScreenReaderEnabled(),n=useSafeAreaInsets(),s=useTrackException(),r=useThemable(createStyles$2),i=useThemable(createTextInputProps),[a,o]=reactExports.useState(""),l=reactExports.useRef(null),{value:u,disable:c,enable:d}=useBoolean(!1),p=reactExports.useCallback(E=>{o(E),sendTypingEvent().catch(S=>s(ExceptionLogKey.chatSendTypingEvent,"ChatInput.tsx",{error:S}))},[s]),m=reactExports.useCallback(E=>{e(E),o("")},[e]),{height:g,visible:h}=useKeyboardHeight(),{agentInChat:y,isEnded:I}=reactExports.useContext(ChatContext);return I?jsxRuntimeExports.jsx(ChatEnded,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(KeyboardAvoidingView,{behavior:Platform.OS==="ios"?"padding":"height",keyboardVerticalOffset:n.top,children:jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsxs(Row,{gutter:"sm",children:[!!y&&jsxRuntimeExports.jsx(IconButton,{accessibilityLabel:u?"Naar toetsenbord":"Naar bijlages",hitSlop:16,icon:jsxRuntimeExports.jsx(Icon,{color:"link",name:u?"keyboard":"attachment",size:"xl",testID:"ChatAttachmentsIcon"}),onPress:()=>{var E;u?((E=l.current)==null||E.focus(),c()):(Keyboard.dismiss(),setTimeout(d,300))},testID:"ChatAttachmentsButton"}),jsxRuntimeExports.jsxs(View,{style:r.container,testID:"ChatTextInputContainer",children:[jsxRuntimeExports.jsx(TextInput,{...i,autoFocus:t,multiline:!0,onChangeText:p,onFocus:c,placeholder:"Typ uw bericht",ref:l,style:r.textInput,testID:"ChatTextInput",value:a}),a.length>0&&jsxRuntimeExports.jsxs(View,{style:r.buttonWrapper,children:[jsxRuntimeExports.jsx(View,{style:r.spacePlaceholder}),jsxRuntimeExports.jsx(PressableBase,{accessibilityLabel:"Verstuur bericht",onPress:()=>m(a),style:r.button,testID:"ChatTextInputSendButton",children:jsxRuntimeExports.jsx(Icon,{color:"inverse",name:"chevron-right",testID:"ChatTextInputSendButtonIcon"})})]})]})]})})}),!!u&&!h&&jsxRuntimeExports.jsx(ChatAttachment,{minHeight:g,onSelect:c})]})},SEND_BUTTON_DIMENSION=40,createStyles$2=({border:e,color:t,text:n,size:s})=>stylesheet.create({button:{backgroundColor:t.pressable.primary.default.background,alignItems:"center",justifyContent:"center",height:SEND_BUTTON_DIMENSION,width:SEND_BUTTON_DIMENSION},buttonWrapper:{height:"100%"},spacePlaceholder:{flexGrow:1},container:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderWidth:e.width.sm,padding:s.spacing.xs,columnGap:s.spacing.sm,flex:1},textInput:{flex:1,color:t.text.default,fontFamily:n.fontFamily.regular,fontSize:n.fontSize.body,padding:0,paddingLeft:s.spacing.md,paddingTop:s.spacing.sm,paddingBottom:s.spacing.sm}}),createTextInputProps=({color:e})=>({placeholderTextColor:e.text.secondary});try{ChatInput.displayName="ChatInput",ChatInput.__docgenInfo={description:"",displayName:"ChatInput",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(message: string) => void"}}}}}catch(e){}const DEFAULT_ERROR_CODE="0",isFetchBaseQueryError=e=>!!(e!=null&&e.status),getErrorCode=e=>!e||!isFetchBaseQueryError(e)?DEFAULT_ERROR_CODE:typeof e.status=="string"&&e.status==="PARSING_ERROR"?e.originalStatus??DEFAULT_ERROR_CODE:e.status??DEFAULT_ERROR_CODE,FullScreenErrorHeader=({error:e,isPortrait:t,testID:n,text:s,title:r,TopComponent:i})=>jsxRuntimeExports.jsxs(Box,{grow:!t,variant:t?"default":"distinct",children:[!!i&&i,jsxRuntimeExports.jsxs(Column,{align:"center",grow:1,gutter:"md",children:[jsxRuntimeExports.jsx(Title,{level:"h3",testID:`${n}Title`,text:r,textAlign:"center"}),(!!e||!!s)&&jsxRuntimeExports.jsxs(Column,{children:[!!s&&jsxRuntimeExports.jsx(Paragraph,{testID:`${n}Paragraph`,textAlign:"center",children:s??""}),!!e&&jsxRuntimeExports.jsx(Paragraph,{testID:`${n}Error`,textAlign:"center",children:`Foutcode is ${getErrorCode(e)}`})]})]})]});try{FullScreenErrorHeader.displayName="FullScreenErrorHeader",FullScreenErrorHeader.__docgenInfo={description:"",displayName:"FullScreenErrorHeader",props:{isPortrait:{defaultValue:null,description:"",name:"isPortrait",required:!0,type:{name:"boolean"}},testID:{defaultValue:null,description:"",name:"testID",required:!0,type:{name:"`${string}Button` | `${string}Alert` | `${string}Icon` | `${string}Label` | `${string}Value` | `${string}Subtitle` | `${string}ProgressStep` | `${string}Preview` | `${string}OpenImagePicker` | `${string}Sections` | `${string}Entry` | `${string}FullScreenError` | `${string}Screen` | `${string}Field` | `${string}Fract..."}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"ErrorType"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},TopComponent:{defaultValue:null,description:"",name:"TopComponent",required:!1,type:{name:"ReactNode"}}}}}catch(e){}const HideOnSmallSize=({children:e,minHeight:t,minWidth:n,...s})=>{const[r,i]=reactExports.useState(),a=reactExports.useMemo(()=>r?r.height>=(t??0)&&r.width>=(n??0):!0,[r,t,n]),o=createStyles$1(a);return jsxRuntimeExports.jsx(View,{collapsable:!1,onLayout:l=>i(l.nativeEvent.layout),...s,style:o.wrapper,children:e})},createStyles$1=e=>stylesheet.create({wrapper:{opacity:e?1:0}});try{HideOnSmallSize.displayName="HideOnSmallSize",HideOnSmallSize.__docgenInfo={description:"",displayName:"HideOnSmallSize",props:{minHeight:{defaultValue:null,description:"",name:"minHeight",required:!1,type:{name:"number"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"number"}}}}}catch(e){}const MIN_IMAGE_HEIGHT=200,ImageWithBackground=({backgroundPosition:e,isImageFullSize:t=!0,Image:n,testID:s,withFacadesBackground:r,isPortrait:i})=>{const a=useThemable(createStyles({backgroundPosition:e,isImageFullSize:t,isPortrait:i}));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!!r&&jsxRuntimeExports.jsx(View,{style:a.figureBackground,testID:`${s}BackgroundImage`,children:jsxRuntimeExports.jsx(View,{style:a.facade,children:jsxRuntimeExports.jsx(SvgAmsterdamFacades,{})})}),i?jsxRuntimeExports.jsx(View,{style:a.figureForeground,children:jsxRuntimeExports.jsx(HideOnSmallSize,{minHeight:MIN_IMAGE_HEIGHT,testID:`${s}Image`,children:jsxRuntimeExports.jsx(Box,{inset:"md",children:jsxRuntimeExports.jsx(n,{height:"100%",width:t?"100%":void 0})})})}):jsxRuntimeExports.jsx(View,{style:a.figureForeground,testID:`${s}Image`,children:jsxRuntimeExports.jsx(n,{height:"100%",width:"100%"})})]})},createStyles=({backgroundPosition:e="bottom",isPortrait:t,isImageFullSize:n})=>({media:s,size:r})=>stylesheet.create({figureBackground:{position:"absolute",bottom:e==="center"&&t?"50%":"20%",width:"100%",alignContent:"flex-start",overflow:"hidden"},figureForeground:{flexGrow:1,alignSelf:!n&&t?"center":void 0,justifyContent:"center",paddingBottom:t?void 0:r.spacing.md},facade:{aspectRatio:s.illustrationAspectRatio.facades,height:s.figureHeight.lg*(3/4),alignSelf:"center"}});try{ImageWithBackground.displayName="ImageWithBackground",ImageWithBackground.__docgenInfo={description:"",displayName:"ImageWithBackground",props:{Image:{defaultValue:null,description:"",name:"Image",required:!0,type:{name:"ComponentType<SvgProps>"}},backgroundPosition:{defaultValue:{value:"bottom"},description:"",name:"backgroundPosition",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"bottom"'}]}},isImageFullSize:{defaultValue:{value:"true"},description:"",name:"isImageFullSize",required:!1,type:{name:"boolean"}},isPortrait:{defaultValue:null,description:"",name:"isPortrait",required:!0,type:{name:"boolean"}},withFacadesBackground:{defaultValue:null,description:"",name:"withFacadesBackground",required:!0,type:{name:"boolean | undefined"}},testID:{defaultValue:null,description:"",name:"testID",required:!0,type:{name:"`${string}Button` | `${string}Alert` | `${string}Icon` | `${string}Label` | `${string}Value` | `${string}Subtitle` | `${string}ProgressStep` | `${string}Preview` | `${string}OpenImagePicker` | `${string}Sections` | `${string}Entry` | `${string}FullScreenError` | `${string}Screen` | `${string}Field` | `${string}Fract..."}}}}}catch(e){}const FullScreenErrorContent=({backgroundPosition:e,error:t,isImageFullSize:n,text:s,Image:r,isPortrait:i,testID:a,title:o,TopComponent:l,withFacadesBackground:u})=>{const c=reactExports.useMemo(()=>jsxRuntimeExports.jsx(ImageWithBackground,{backgroundPosition:e,Image:r,isImageFullSize:n,isPortrait:i,testID:a,withFacadesBackground:u}),[r,e,n,i,a,u]);return i?jsxRuntimeExports.jsx(Column,{flex:1,children:c}):jsxRuntimeExports.jsxs(Row,{flex:1,children:[jsxRuntimeExports.jsx(Column,{flex:1,children:jsxRuntimeExports.jsx(FullScreenErrorHeader,{error:t,isPortrait:i,testID:a,text:s,title:o,TopComponent:l})}),jsxRuntimeExports.jsx(Column,{flex:1,children:c})]})};try{FullScreenErrorContent.displayName="FullScreenErrorContent",FullScreenErrorContent.__docgenInfo={description:"",displayName:"FullScreenErrorContent",props:{isPortrait:{defaultValue:null,description:"",name:"isPortrait",required:!0,type:{name:"boolean"}},testID:{defaultValue:null,description:"",name:"testID",required:!0,type:{name:"`${string}Button` | `${string}Alert` | `${string}Icon` | `${string}Label` | `${string}Value` | `${string}Subtitle` | `${string}ProgressStep` | `${string}Preview` | `${string}OpenImagePicker` | `${string}Sections` | `${string}Entry` | `${string}FullScreenError` | `${string}Screen` | `${string}Field` | `${string}Fract..."}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"ErrorType"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},TopComponent:{defaultValue:null,description:"",name:"TopComponent",required:!1,type:{name:"ReactNode"}},Image:{defaultValue:null,description:"",name:"Image",required:!0,type:{name:"ComponentType<SvgProps>"}},backgroundPosition:{defaultValue:null,description:"",name:"backgroundPosition",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"center"'},{value:'"bottom"'}]}},isImageFullSize:{defaultValue:null,description:"",name:"isImageFullSize",required:!0,type:{name:"boolean | undefined"}},withFacadesBackground:{defaultValue:null,description:"",name:"withFacadesBackground",required:!0,type:{name:"boolean | undefined"}}}}}catch(e){}const FullScreenError=({backgroundPosition:e,buttonAccessibilityLabel:t,buttonLabel:n,error:s,isImageFullSize:r,text:i,Image:a,onPress:o,testID:l,title:u,TopComponent:c,withFacadesBackground:d=!0,...p})=>{const{isPortrait:m}=useDeviceContext();return jsxRuntimeExports.jsxs(Column,{grow:1,...p,children:[!!m&&jsxRuntimeExports.jsx(FullScreenErrorHeader,{error:s,isPortrait:m,testID:`${l}Header`,text:i,title:u,TopComponent:c}),jsxRuntimeExports.jsx(FullScreenErrorContent,{backgroundPosition:e,error:s,Image:a,isImageFullSize:r,isPortrait:m,testID:`${l}Content`,text:i,title:u,TopComponent:c,withFacadesBackground:d}),jsxRuntimeExports.jsx(Box,{inset:"md",children:jsxRuntimeExports.jsx(Button,{accessibilityLabel:t,label:n,onPress:o,testID:`${l}Button`})})]})};try{FullScreenError.displayName="FullScreenError",FullScreenError.__docgenInfo={description:"",displayName:"FullScreenError",props:{Image:{defaultValue:null,description:"",name:"Image",required:!0,type:{name:"ComponentType<SvgProps>"}},TopComponent:{defaultValue:null,description:"",name:"TopComponent",required:!1,type:{name:"ReactNode"}},backgroundPosition:{defaultValue:null,description:"",name:"backgroundPosition",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"bottom"'}]}},buttonAccessibilityLabel:{defaultValue:null,description:"",name:"buttonAccessibilityLabel",required:!1,type:{name:"string"}},buttonLabel:{defaultValue:null,description:"",name:"buttonLabel",required:!0,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"ErrorType"}},isImageFullSize:{defaultValue:null,description:"",name:"isImageFullSize",required:!1,type:{name:"boolean"}},onPress:{defaultValue:null,description:"",name:"onPress",required:!0,type:{name:"() => void"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},withFacadesBackground:{defaultValue:{value:"true"},description:"",name:"withFacadesBackground",required:!1,type:{name:"boolean"}},align:{defaultValue:null,description:"The vertical alignment of the items in the column.",name:"align",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'},{value:'"around"'},{value:'"between"'},{value:'"center"'},{value:'"evenly"'}]}},grow:{defaultValue:null,description:"Whether the column should grow to fill the available space.",name:"grow",required:!1,type:{name:"number"}},gutter:{defaultValue:null,description:"The amount of vertical spacing between the items in the column.",name:"gutter",required:!1,type:{name:"enum",value:[{value:'"no"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"xxl"'},{value:'"xxs"'},{value:'"xs"'},{value:'"smd"'}]}},reverse:{defaultValue:null,description:"Whether the items in the column should be reversed.",name:"reverse",required:!1,type:{name:"boolean"}},shrink:{defaultValue:null,description:"Whether the column should shrink to fill the available space.",name:"shrink",required:!1,type:{name:"number"}},zIndex:{defaultValue:null,description:"Sets the zIndex style property",name:"zIndex",required:!1,type:{name:"number"}},basis:{defaultValue:null,description:"The flex basis factor of the column.",name:"basis",required:!1,type:{name:"number"}},halign:{defaultValue:null,description:"The horizontal alignment of the items in the column.",name:"halign",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'},{value:'"center"'},{value:'"baseline"'},{value:'"stretch"'}]}},testID:{defaultValue:null,description:"",name:"testID",required:!0,type:{name:"`${string}Button` | `${string}Alert` | `${string}Icon` | `${string}Label` | `${string}Value` | `${string}Subtitle` | `${string}ProgressStep` | `${string}Preview` | `${string}OpenImagePicker` | `${string}Sections` | `${string}Entry` | `${string}FullScreenError` | `${string}Screen` | `${string}Field` | `${string}Fract..."}}}}}catch(e){}const ChatWaitToStart=({children:e})=>{const[t,n]=reactExports.useState(!1),{ready:s,connectionStatus:r}=reactExports.useContext(ChatContext),{close:i}=useChat();return reactExports.useEffect(()=>{setTimeout(()=>{n(!0)},6e4)},[]),s?e:r!==ConnectionState.closed&&!t?jsxRuntimeExports.jsxs(Center,{grow:!0,children:[jsxRuntimeExports.jsx(LoadingDots,{dotActiveSize:15,dotInactiveSize:12}),jsxRuntimeExports.jsx(Title,{level:"h4",testID:"ChatWaitToStartTitle",text:"De chat wordt geladen",textAlign:"center"})]}):jsxRuntimeExports.jsx(ChatAnimatedContentWrapper,{children:jsxRuntimeExports.jsx(FullScreenError,{backgroundPosition:"center",buttonLabel:"Chat sluiten",Image:ErrorFigure,isImageFullSize:!1,onPress:i,testID:"ChatWaitToStartErrorTitle",text:isDevApp?"Switchen van omgeving: verander eerst van omgeving en herstart dan de app":"Probeer het later nog eens.",title:"De chat kon niet geladen worden"})})};try{ChatWaitToStart.displayName="ChatWaitToStart",ChatWaitToStart.__docgenInfo={description:"",displayName:"ChatWaitToStart",props:{}}}catch(e){}const Chat=()=>{const{isOpen:e}=useChat(),t=useTrackException(),n=reactExports.useCallback(s=>{sendMessage(s).catch(r=>t(ExceptionLogKey.chatSendMessage,"Chat.tsx",{error:r}))},[t]);return e?jsxRuntimeExports.jsx(ChatProvider,{children:jsxRuntimeExports.jsxs(ChatAnimatedWrapper,{children:[jsxRuntimeExports.jsx(ChatHeader,{}),jsxRuntimeExports.jsxs(ChatWaitToStart,{children:[jsxRuntimeExports.jsx(ChatAnimatedContentWrapper,{children:jsxRuntimeExports.jsx(ChatHistory,{})}),jsxRuntimeExports.jsx(ChatInput,{onSubmit:n})]})]})}):null},onNotificationEvent=(e,t,n)=>{var s,r;e===EventType.PRESS&&((r=(s=t.notification)==null?void 0:s.data)!=null&&r.maximizeChat)&&n(maximizeChat())},persistWhitelist$3=["conversationId"],chatModule={hiddenInMenu:!0,onNotificationEvent,name:"ChatModule",PostRenderComponent:Chat,reduxConfigs:[{key:ReduxKey.chat,persistVersion:0,persistWhitelist:persistWhitelist$3,slice:chatSlice}],slug:ModuleSlug.chat,alwaysEnabled:!0},useGetSecureItem=e=>{const[t,n]=reactExports.useState(!0),[s,r]=reactExports.useState(null),i=useSelector(selectSecureItemUpdatedTimestamp(e));return reactExports.useEffect(()=>{getSecureItem(e).then(a=>{r(a),n(!1)}).catch(()=>{r(null),n(!1)})},[e,i]),{item:s,isLoading:t}},transformResponse=e=>e.map(t=>({dateEndFormatted:t.d,firstname:t.f,infix:t.i,lastname:t.l,passNumberComplete:t.p})),useGetSecureCityPasses=()=>{const{item:e}=useGetSecureItem(SecureItemKey.cityPasses);return reactExports.useMemo(()=>e?transformResponse(JSON.parse(e)):[],[e])};var CityPassRouteName=(e=>(e.budget="Budget",e.cityPassDetails="CityPassDetails",e.cityPassLogout="CityPassLogout",e.cityPasses="CityPasses",e.dashboard="Dashboard",e.forgotAccessCode="ForgotAccessCode",e.login="Login",e.loginSteps="LoginSteps",e.securityCode="SecurityCode",e))(CityPassRouteName||{});const initialState$5={isCityPassOwnerRegistered:!1,isLoginStepsActive:!1,shouldShowLoginScreen:!1,startIndex:0,accessTokenExpiration:void 0,refreshTokenExpiration:void 0},cityPassSlice=createSlice({name:ReduxKey.cityPass,initialState:initialState$5,reducers:{setIsCityPassOwnerRegistered:(e,{payload:t})=>{e.isCityPassOwnerRegistered=t},setLoginStepsActive:(e,{payload:t})=>{e.isLoginStepsActive=t},setShouldShowLoginScreen:(e,{payload:t})=>{e.shouldShowLoginScreen=t},setStartIndex:(e,{payload:t})=>{e.startIndex=t??0},setTokenExpiration:(e,{payload:t})=>{const{accessTokenExpiration:n,refreshTokenExpiration:s}=t;n&&(e.accessTokenExpiration=n),s&&(e.refreshTokenExpiration=s)}}}),{setIsCityPassOwnerRegistered,setLoginStepsActive,setShouldShowLoginScreen:setShouldShowLoginScreenAction,setStartIndex,setTokenExpiration}=cityPassSlice.actions,selectIsCityPassOwnerRegistered=e=>e[ReduxKey.cityPass].isCityPassOwnerRegistered,selectAccessTokenExpiration=e=>e[ReduxKey.cityPass].accessTokenExpiration,selectRefreshTokenExpiration=e=>e[ReduxKey.cityPass].refreshTokenExpiration,CityPassActionButton=()=>{const{navigate:e}=useNavigation(),t=useGetSecureCityPasses(),n=useSelector(selectIsCityPassOwnerRegistered),s=reactExports.useCallback(()=>{e(ModuleSlug["city-pass"],{screen:CityPassRouteName.cityPasses})},[e]);return!(t!=null&&t.length)||!n?null:jsxRuntimeExports.jsxs(Column,{children:[jsxRuntimeExports.jsx(ActionButton,{iconName:"city-pass-pass",label:"Stadspas tonen",onPress:s,testID:"CityPassActionButton"}),jsxRuntimeExports.jsx(Gutter,{height:"lg"})]})},LOGOUT_ALERT={text:"Je Stadspas gegevens zijn niet meer zichtbaar in de app. Je kunt je Stadspas gegevens altijd weer zien door in te loggen.",title:"Uitgelogd",hasIcon:!0,hasCloseIcon:!0,testID:"CityPassLoggedOutAlert"},alerts={logoutWarning:{variant:AlertVariant.warning,...LOGOUT_ALERT},logoutSuccess:{variant:AlertVariant.positive,...LOGOUT_ALERT},logoutFailed:{variant:AlertVariant.negative,text:"Er is iets misgegaan. Probeer het opnieuw.",title:"Uitloggen mislukt",hasIcon:!0,hasCloseIcon:!0,testID:"CityPassLogoutFailedAlert"},retrievePassesFailed:{variant:AlertVariant.negative,text:"Er ging iets fout bij het ophalen van de Stadspas gegevens. Probeer het later nog eens.",title:"Inloggen mislukt",hasIcon:!0,hasCloseIcon:!0,testID:"CityPassLoggedInNegativeAlert"},noPassesInfo:{variant:AlertVariant.information,text:"De Stadspas is voor Amsterdammers met een laag inkomen en weinig vermogen.",title:"U hebt geen Stadspas",hasIcon:!0,hasCloseIcon:!0,testID:"CityPassNoPassesInformationAlert"}};var CityPassEndpointName=(e=>(e.getAccessToken="getAccessToken",e.getBudgetTransactions="getBudgetTransactions",e.getCityPasses="getCityPasses",e.getDiscountTransactions="getDiscountTransactions",e.logout="logout",e.refreshToken="refreshToken",e))(CityPassEndpointName||{}),CityPassError401Codes=(e=>(e.apiKeyInvalid="API_KEY_INVALID",e.tokenExpired="TOKEN_EXPIRED",e.tokenInvalid="TOKEN_INVALID",e.tokenNotReady="TOKEN_NOT_READY",e))(CityPassError401Codes||{});const getSecureTokens=async()=>{try{const e=await getSecureItem(SecureItemKey.cityPassAccessToken),t=await getSecureItem(SecureItemKey.cityPassRefreshToken);return{accessToken:e,refreshToken:t}}catch(e){return devLog(e),Promise.reject(e)}},setSecureTokens=async(e,t)=>{try{const n=await setSecureItem(SecureItemKey.cityPassAccessToken,e),s=await setSecureItem(SecureItemKey.cityPassRefreshToken,t);return{accessTokenSet:n,refreshTokenSet:s}}catch(n){return n}},saveTokens=(e,t,n,s,r,i,a,o)=>{r(setTokenExpiration({accessTokenExpiration:n,refreshTokenExpiration:s})),setSecureTokens(e,t).then(()=>{r(setSecureItemUpdatedTimestamp(SecureItemKey.cityPassAccessToken)),r(setSecureItemUpdatedTimestamp(SecureItemKey.cityPassRefreshToken)),devLog("Tokens successful refreshed"),o==null||o("New tokens, so old request should fail"),i({accessToken:e,refreshToken:t})},()=>{devError("refresh tokens save failed"),a(new Error("New tokens could not be saved"))})},refreshTokens=(e,t)=>new Promise((n,s)=>{getSecureTokens().then(({refreshToken:r})=>{r&&e(cityPassApi.endpoints[CityPassEndpointName.refreshToken].initiate(r)).unwrap().then(({access_token:i,refresh_token:a,access_token_expiration:o,refresh_token_expiration:l})=>saveTokens(i,a,o,l,e,n,s,t),async()=>{devError("Token refresh failed, you are now logged out"),await logout("logoutWarning",e),t==null||t("Session ended"),s(new Error("Token refresh failed"))})})}),afterError=async({error:e},{dispatch:t},n)=>{if((e==null?void 0:e.status)===401){const{code:s}=e.data;if(s===CityPassError401Codes.tokenExpired)return refreshTokens(t,n).then(()=>Promise.resolve());await logout("logoutWarning",t),n("no access")}},prepareHeaders=async(e,{dispatch:t,getState:n})=>{const s=n(),r=dayjs(selectAccessTokenExpiration(s)),i=dayjs(selectRefreshTokenExpiration(s));let a=await getSecureItem(SecureItemKey.cityPassAccessToken);const o=dayjs().add(1,"minute");if(r.isBefore(o)||i.isBefore(o)){const{accessToken:l}=await refreshTokens(t);a=l}return a&&e.set("Access-Token",a),e},cityPassApi=baseApi.injectEndpoints({endpoints:e=>({[CityPassEndpointName.getAccessToken]:e.mutation({query:()=>({method:"POST",slug:ModuleSlug["city-pass"],url:"/session/init"})}),[CityPassEndpointName.getCityPasses]:e.query({query:()=>({prepareHeaders,slug:ModuleSlug["city-pass"],url:"/data/passes",afterError})}),[CityPassEndpointName.getBudgetTransactions]:e.query({query:({passNumber:t,budgetCode:n})=>({prepareHeaders,params:{passNumber:t,budgetCode:n},slug:ModuleSlug["city-pass"],url:"/data/budget-transactions",afterError})}),[CityPassEndpointName.getDiscountTransactions]:e.query({query:({passNumber:t})=>({prepareHeaders,params:{passNumber:t},slug:ModuleSlug["city-pass"],url:"/data/aanbieding-transactions"})}),[CityPassEndpointName.logout]:e.mutation({query:()=>({prepareHeaders,method:"POST",slug:ModuleSlug["city-pass"],url:"/session/logout",afterError})}),[CityPassEndpointName.refreshToken]:e.mutation({query:t=>({method:"POST",slug:ModuleSlug["city-pass"],url:"/session/refresh",body:{refresh_token:t}})})}),overrideExisting:!0}),{useGetAccessTokenMutation,useGetBudgetTransactionsQuery,useGetDiscountTransactionsQuery,useGetCityPassesQuery,useLogoutMutation}=cityPassApi,logout=async(e,t)=>{await getSecureItem(SecureItemKey.cityPassAccessToken)&&(t(cityPassApi.endpoints.logout.initiate()),await removeSecureItems([SecureItemKey.cityPassAccessToken,SecureItemKey.cityPassRefreshToken,SecureItemKey.cityPasses]),t(deleteSecureItemUpdatedTimestamp(SecureItemKey.cityPassAccessToken)),t(deleteSecureItemUpdatedTimestamp(SecureItemKey.cityPassRefreshToken)),t(setIsCityPassOwnerRegistered(!1)),e&&setTimeout(()=>t(setAlertAction(alerts[e])),100),setTimeout(()=>{t(cityPassApi.util.resetApiState())},1e3))},persistWhitelist$2=["isCityPassOwnerRegistered","accessTokenExpiration","refreshTokenExpiration"],cityPassModule={ActionButton:CityPassActionButton,linking:{[CityPassRouteName.loginSteps]:"stadspas/:loginResult/:accessToken?/:refreshToken?/:errorMessage?/:errorCode?"},logDimension:PiwikSessionDimension.cityPassModule,logout:e=>logout(!1,e),name:"CityPassModule",reduxConfigs:[{key:ReduxKey.cityPass,slice:cityPassSlice,persistVersion:0,persistWhitelist:persistWhitelist$2}],slug:ModuleSlug["city-pass"]};var DeviceRegistrationEndpointName=(e=>(e.registerDevice="registerDevice",e.unregisterDevice="unregisterDevice",e))(DeviceRegistrationEndpointName||{});const deviceRegistrationApi=baseApi.injectEndpoints({endpoints:e=>({[DeviceRegistrationEndpointName.registerDevice]:e.mutation({query:t=>({body:{os:Platform.OS,...t},method:"POST",slug:GlobalApiSlug.notification,url:"/device/register",headers:deviceIdHeader})}),[DeviceRegistrationEndpointName.unregisterDevice]:e.mutation({query:()=>({method:"DELETE",slug:GlobalApiSlug.notification,url:"/device/register",headers:deviceIdHeader})})}),overrideExisting:!0}),{useRegisterDeviceMutation,useUnregisterDeviceMutation}=deviceRegistrationApi,useRegisterDevice=()=>{const[e]=useRegisterDeviceMutation(),[t]=useUnregisterDeviceMutation(),n=useTrackException(),{hasPermission:s,requestPermission:r}=usePermission(Permissions.notifications),i=reactExports.useCallback(()=>{messaging().getToken().then(o=>{e({firebase_token:o})}).catch(o=>{n(ExceptionLogKey.registerDevice,"useRegisterDevice.ts",{error:o})})},[e,n]);return{registerDeviceIfPermitted:reactExports.useCallback((o=!1)=>new Promise((l,u)=>{o?r().then(c=>{c&&i(),l(c)}):(s&&i(),l(s))}),[r,i,s]),unregisterDevice:t}},config={projectItemListPageSize:20};var ProjectsEndpointName=(e=>(e.articles="articles",e.projectDetails="projectDetails",e.projectFollow="projectFollow",e.projectNews="projectNews",e.projectUnfollow="projectUnfollow",e.projectWarning="projectWarning",e.projects="projects",e.projectsFollowedArticles="projectsFollowedArticles",e.projectsSearch="projectsSearch",e))(ProjectsEndpointName||{});const processSearchQueryArgs=e=>({...e,fields:e.fields.join(","),query_fields:e.query_fields.join(",")}),tempPostProcessProjectDetails=e=>{var t;return e.timeline?{...e,timeline:{...e.timeline,items:((t=e.timeline.items)==null?void 0:t.map(n=>({progress:"active",...n})))??null}}:e},DEFAULT_SEARCH_PAGE_SIZE=1e3,MODULE_SLUG=ModuleSlug["construction-work"],projectsApi=baseApi.injectEndpoints({endpoints:e=>({[ProjectsEndpointName.articles]:e.query({providesTags:["Articles"],query:t=>({slug:MODULE_SLUG,url:generateRequestUrl({path:"/articles",params:t})}),keepUnusedDataFor:CacheLifetime.minute}),[ProjectsEndpointName.projectDetails]:e.query({providesTags:["FollowedProjects","Projects"],query:t=>({slug:MODULE_SLUG,url:generateRequestUrl({path:"/project/details",params:t}),headers:deviceIdHeader}),keepUnusedDataFor:CacheLifetime.hour,transformResponse:tempPostProcessProjectDetails}),[ProjectsEndpointName.projectNews]:e.query({query:t=>({slug:MODULE_SLUG,url:generateRequestUrl({path:"/project/news",params:t})}),keepUnusedDataFor:CacheLifetime.minute}),[ProjectsEndpointName.projectWarning]:e.query({query:t=>({slug:MODULE_SLUG,url:generateRequestUrl({path:"/project/warning",params:t})}),keepUnusedDataFor:CacheLifetime.minute}),[ProjectsEndpointName.projects]:e.query({providesTags:["FollowedProjects","Projects"],query:t=>({slug:MODULE_SLUG,url:t?generateRequestUrl({path:"/projects",params:t}):"/projects",headers:deviceIdHeader}),keepUnusedDataFor:CacheLifetime.hour}),[ProjectsEndpointName.projectUnfollow]:e.mutation({invalidatesTags:["FollowedProjects"],query:t=>({body:t,method:"DELETE",slug:MODULE_SLUG,url:"/projects/follow",headers:deviceIdHeader})}),[ProjectsEndpointName.projectFollow]:e.mutation({invalidatesTags:["FollowedProjects"],query:t=>({body:t,method:"POST",slug:MODULE_SLUG,url:"/projects/follow",headers:deviceIdHeader})}),[ProjectsEndpointName.projectsSearch]:e.query({providesTags:["Projects"],query:t=>({params:{page_size:DEFAULT_SEARCH_PAGE_SIZE,...processSearchQueryArgs(t)},slug:MODULE_SLUG,url:"/projects/search"}),keepUnusedDataFor:CacheLifetime.hour})}),overrideExisting:!0}),{useArticlesQuery,useProjectDetailsQuery,useProjectFollowMutation,useProjectNewsQuery,useProjectUnfollowMutation,useProjectWarningQuery,useProjectsQuery,useProjectsSearchQuery}=projectsApi,PreRenderComponent=()=>{const{registerDeviceIfPermitted:e}=useRegisterDevice(),[t,n]=reactExports.useState(!1),{data:s}=useProjectsQuery({page_size:config.projectItemListPageSize,page:1},{skip:t});return reactExports.useEffect(()=>{var r;(r=s==null?void 0:s.result)!=null&&r[0].followed&&!t&&(e(!0),n(!0))},[s==null?void 0:s.result,t,e]),null};var ConstructionWorkRouteName=(e=>(e.constructionWork="ConstructionWork",e.project="Project",e.projectNews="ProjectNews",e.projectSegment="ProjectSegment",e.projectWarning="ProjectWarning",e.search="ConstructionWorkSearch",e))(ConstructionWorkRouteName||{});const initialState$4={readArticles:[],searchText:""},constructionWorkSlice=createSlice({name:ReduxKey.constructionWork,initialState:initialState$4,reducers:{addReadArticle:(e,{payload:t})=>{e.readArticles.push(t)},deleteReadArticle:(e,{payload:t})=>{e.readArticles=e.readArticles.filter(n=>n.id!==t)},setSearchText:(e,{payload:t})=>{e.searchText=t}}}),{addReadArticle,deleteReadArticle,setSearchText}=constructionWorkSlice.actions,persistWhitelist$1=["readArticles"],constructionWorkModule={PreRenderComponent,linking:{[ConstructionWorkRouteName.projectNews]:"news/:id/:screenHeaderTitle/:screenTitle/:isPushNotificationDeeplink?",[ConstructionWorkRouteName.projectWarning]:"warning/:id/:screenHeaderTitle/:screenTitle/:isPushNotificationDeeplink?"},logDimension:PiwikSessionDimension.constructionWorkModule,name:"ConstructionWorkModule",reduxConfigs:[{key:ReduxKey.constructionWork,persistVersion:0,persistWhitelist:persistWhitelist$1,slice:constructionWorkSlice}],requiresFirebaseToken:!0,slug:ModuleSlug["construction-work"]},initialState$3={},messageDraftSlice=createSlice({name:ReduxKey.messageDraft,initialState:initialState$3,reducers:{clearDraft:()=>initialState$3,setCurrentProjectId:(e,{payload:t})=>{e.currentProjectId=t},setMainImage:(e,{payload:{projectId:t,mainImage:n}})=>{e[t]={...e[t],mainImage:n}},setMainImageDescription:(e,{payload:{projectId:t,mainImageDescription:n}})=>{e[t]={...e[t],mainImageDescription:n}},setNotification:(e,{payload:{projectId:t,notification:n}})=>{e[t]={...e[t],notification:n}},setProject:(e,{payload:t})=>{e[t.id]={...e[t.id],project:t}},setMessage:(e,{payload:{projectId:t,message:n}})=>{e[t]={...e[t],message:n}}}}),{clearDraft,setCurrentProjectId,setMainImage,setMainImageDescription,setNotification,setProject,setMessage}=messageDraftSlice.actions;createSelector(e=>e[ReduxKey.messageDraft],e=>e==null?void 0:e.currentProjectId);createSelector(e=>e[ReduxKey.messageDraft],e=>e.currentProjectId);var ConstructionWorkEditorRouteName=(e=>(e.addMainImageToMessage="AddMainImageToMessage",e.authorizedProjects="AuthorizedProjects",e.confirmMessage="ConfirmMessage",e.createMessage="CreateMessage",e))(ConstructionWorkEditorRouteName||{});const initialState$2={accessToken:void 0,hasSeenWelcomeMessage:!1,hasAutoFollowedProjects:!1},constructionWorkEditorSlice=createSlice({name:ReduxKey.constructionWorkEditor,initialState:initialState$2,reducers:{saveConstructionWorkEditorToken:(e,{payload:t})=>{e.accessToken=t},removeConstructionWorkEditorToken:e=>{e.accessToken=void 0},setHasSeenWelcomeMessage:(e,{payload:t})=>{e.hasSeenWelcomeMessage=t},setHasAutoFollowedProjects:(e,{payload:t})=>{e.hasAutoFollowedProjects=t},removeConstructionWorkEditor:()=>initialState$2}}),{saveConstructionWorkEditorToken,setHasSeenWelcomeMessage,removeConstructionWorkEditor,removeConstructionWorkEditorToken,setHasAutoFollowedProjects}=constructionWorkEditorSlice.actions,constructionWorkEditorModule={requiresAuthorization:!0,linking:{[ConstructionWorkEditorRouteName.authorizedProjects]:"construction-work-editor/:accessToken?"},logDimension:PiwikSessionDimension.constructionWorkEditorModule,name:"ConstructionWorkEditorModule",reduxConfigs:[{key:ReduxKey.constructionWorkEditor,persistVersion:0,slice:constructionWorkEditorSlice},{key:ReduxKey.messageDraft,persistVersion:0,slice:messageDraftSlice}],slug:ModuleSlug["construction-work-editor"]},contactSlice=createSlice({name:ReduxKey.contact,initialState:{},reducers:{setSelectedCityOffice:(e,{payload:t})=>{e.selectedCityOfficeId=t}}}),{setSelectedCityOffice}=contactSlice.actions,contactModule={logDimension:PiwikSessionDimension.contactModule,name:"ContactModule",reduxConfigs:[{key:ReduxKey.contact,persistVersion:0,slice:contactSlice}],slug:ModuleSlug.contact},homeModule={name:"HomeModule",screenOptions:{cardStyleInterpolator:({current:e})=>({cardStyle:{opacity:e.progress}})},slug:ModuleSlug.home},notificationHistoryApi=baseApi.injectEndpoints({endpoints:e=>({getNotifications:e.query({providesTags:["Notifications"],query:()=>({slug:GlobalApiSlug.notification,url:generateRequestUrl({path:"/notifications",params:{}}),headers:deviceIdHeader}),keepUnusedDataFor:CacheLifetime.minute}),markAllNotificationsRead:e.mutation({invalidatesTags:["Notifications"],query:()=>({slug:GlobalApiSlug.notification,method:"POST",url:generateRequestUrl({path:"/notifications/mark_all_read",params:{}}),headers:deviceIdHeader})})}),overrideExisting:!0}),{useGetNotificationsQuery,useMarkAllNotificationsReadMutation}=notificationHistoryApi,HeaderComponent=()=>{const e=useNavigation(),{data:t}=useGetNotificationsQuery(),n=(t==null?void 0:t.filter(({is_read:r})=>!r).length)??0,s=n?n+"ongelezen"+simplur`[melding|meldingen]${[n]}`:"Meldingen";return jsxRuntimeExports.jsx(IconButton,{accessibilityLabel:s,badgeValue:n>0?n:void 0,icon:jsxRuntimeExports.jsx(Icon,{color:"link",name:"alarmFilled",size:"lg",testID:"HeaderNotificationHistoryIcon"}),onPress:()=>e.navigate(ModuleSlug["notification-history"]),testID:"HeaderNotificationHistoryButton"})},notificationHistoryModule={hiddenInMenu:!0,name:"NotificationHistoryModule",HeaderComponent,slug:ModuleSlug["notification-history"],alwaysEnabled:!0},initialState$1={hasSeenOnboarding:!1},onboardingSlice=createSlice({name:ReduxKey.onboarding,initialState:initialState$1,reducers:{setHasSeenOnboarding:(e,{payload:t})=>{e.hasSeenOnboarding=t}}}),{setHasSeenOnboarding}=onboardingSlice.actions,onboardingModule={alwaysEnabled:!0,hiddenInMenu:!0,name:"OnboardingModule",reduxConfigs:[{key:ReduxKey.onboarding,persistVersion:-1,slice:onboardingSlice}],slug:ModuleSlug.onboarding,screenOptions:{cardStyleInterpolator:({current:e})=>({cardStyle:{opacity:e.progress}})}},useGetSecureAccessCode=()=>{const{item:e,isLoading:t}=useGetSecureItem(SecureItemKey.accessCode);return{accessCode:e,isLoading:t}},useGetPermits=()=>{const e=useDispatch(),{data:t,isLoading:n,refetch:s}=usePermitsQuery({status:"ACTIVE"}),r=useCurrentParkingPermitReportCode(),{setCurrentPermitReportCode:i,setParkingAccountPermits:a}=parkingSlice.actions;return reactExports.useEffect(()=>{t!=null&&t.length&&!r&&i(t[0].report_code.toString())},[r,t,i]),reactExports.useEffect(()=>{t!=null&&t.length&&e(a(t))},[t,e,a]),{permits:t,isLoading:n,refetch:s}},useLoginSteps=()=>{const e=useDispatch(),t=useSelector(selectIsLoginStepsActive),n=reactExports.useCallback(s=>{e(setLoginStepsActive$1(s))},[e]);return{isLoginStepsActive:t,setIsLoginStepsActive:n}},ALLOWED_PERMIT_TYPES=[PermitType.kraskaartvergunning,PermitType.bezoekersvergunning,PermitType["GA-bezoekerskaart"]],ParkingActionButtonContent=()=>{const{navigate:e}=useNavigation(),{permits:t}=useGetPermits();return(t==null?void 0:t.length)===1&&ALLOWED_PERMIT_TYPES.includes(t[0].permit_type)&&jsxRuntimeExports.jsxs(Column,{children:[jsxRuntimeExports.jsx(ActionButton,{iconName:"parkingSession",label:`Parkeersessie
starten`,onPress:()=>{e(ModuleSlug.parking,{screen:ParkingRouteName.startSession})},testID:"ParkingActionButton"}),jsxRuntimeExports.jsx(Gutter,{height:"lg"})]})},ParkingActionButton=()=>{const{accessCode:e}=useGetSecureAccessCode(),{isLoginStepsActive:t}=useLoginSteps(),n=useParkingAccount();return!e||(n==null?void 0:n.scope)!==ParkingPermitScope.permitHolder||t?null:jsxRuntimeExports.jsx(ParkingActionButtonContent,{})},persistWhitelist=["currentAccount","currentPermitReportCode","accounts"],parkingModule={ActionButton:ParkingActionButton,logout:(e,t)=>logout$1(!0,e,t),name:"ParkingModule",linking:{[ParkingRouteName.dashboard]:"parking/:action/return",[ParkingRouteName.login]:"parking/visitor/:reportCode/:pin"},logDimension:PiwikSessionDimension.parkingModule,reduxConfigs:[{key:ReduxKey.parking,persistVersion:0,persistWhitelist,slice:parkingSlice}],slug:ModuleSlug.parking},redirectsModule={logDimension:PiwikSessionDimension.redirectsModule,name:"RedirectsModule",slug:ModuleSlug.redirects};var ReportProblemRouteName=(e=>(e.reportProblem="ReportProblem",e.reportProblemWebView="ReportProblemWebView",e))(ReportProblemRouteName||{});const reportProblemModule={logDimension:PiwikSessionDimension.reportProblemModule,name:"ReportProblemModule",slug:ModuleSlug["report-problem"],screenOptions:({route:e})=>({gestureEnabled:getFocusedRouteNameFromRoute(e)!==ReportProblemRouteName.reportProblemWebView})},userModule={name:"UserModule",slug:ModuleSlug.user};var WasteContainerRouteName=(e=>(e.addWasteCard="AddWasteCard",e.wasteCard="WasteCard",e.wasteCardHelp="WasteCardHelp",e))(WasteContainerRouteName||{});const WasteContainerActionButton=()=>{const{navigate:e}=useNavigation(),{item:t,isLoading:n}=useGetSecureItem(SecureItemKey.wasteCardNumber),s=reactExports.useCallback(()=>{e(ModuleSlug["waste-container"],{screen:WasteContainerRouteName.wasteCard})},[e]);return n||!t?null:jsxRuntimeExports.jsxs(Column,{children:[jsxRuntimeExports.jsx(ActionButton,{iconName:"wasteCard",label:"Afvalpas tonen",onPress:s,testID:"WasteContainerActionButton"}),jsxRuntimeExports.jsx(Gutter,{height:"lg"})]})},wasteContainerModule={ActionButton:WasteContainerActionButton,hiddenInMenu:!0,name:"WasteContainerModule",slug:ModuleSlug["waste-container"]},initialState={contracts:void 0},wasteGuideSlice=createSlice({name:ReduxKey.wasteGuide,initialState,reducers:{addContract:(e,{payload:t})=>{e.contracts={...e.contracts,...t}},resetContracts:({contracts:e,...t})=>t}}),{addContract,resetContracts}=wasteGuideSlice.actions,wasteGuideModule={logDimension:PiwikSessionDimension.wasteGuideModule,name:"WasteGuideModule",reduxConfigs:[{key:ReduxKey.wasteGuide,persistVersion:0,slice:wasteGuideSlice}],slug:ModuleSlug["waste-guide"]},coreModules=[accessCodeModule,addressModule,homeModule,onboardingModule,userModule],clientModules=[aboutModule,chatModule,cityPassModule,constructionWorkEditorModule,constructionWorkModule,contactModule,notificationHistoryModule,parkingModule,redirectsModule,reportProblemModule,wasteContainerModule,wasteGuideModule];export{DeviceRegistrationEndpointName as D,LinkingContext as L,getActionFromState as a,accessCodeSlice as b,clientModules as c,coreModules as d,findFocusedRoute as f,getStateFromPath as g,permissionsSlice as p,validatePathConfig as v};
