import{a_ as ye,j as e,ag as ne,am as xe,ah as U,an as se,a$ as ie,b0 as v,ao as je,ap as ve,b1 as be,b2 as G,ai as ae,S as re,b3 as M,a3 as Pe,r as De,b4 as W,b5 as b,b6 as _e,V as w,b7 as Se,Q as Te,C as z,T as O,f as Ce,a as we,aD as P,m as Ae,R as ke,B as R,_ as j,au as Ee,a2 as Ie,aI as Me,a4 as Ve,e as Le}from"./iframe-V0SvRRbP.js";import{P as Be}from"./ParkingSessionFormProvider-DGOtRrO1.js";import{b as oe,a as le}from"./index.esm-BRH798rM.js";import{T as Oe,a as V,D as Re,P as qe}from"./Track-CTdJRxQR.js";import{S as Ge}from"./SingleSelectable-Da-hw5PI.js";import"./index-DlEuu0NA.js";import{G as $e,u as N,a as Y,b as He}from"./gestureObjects-DWn66XGn.js";import{f as Ue}from"./formatTimeRangeToDisplay-a6Wb7r0_.js";import{f as We}from"./formatTimeToDisplay-CpULYztq.js";import{u as ze}from"./useCurrentParkingPermit.web-C1n1CvCF.js";import"./preload-helper-Dp1pzeXC.js";import"./formatDate-D-TmFST4.js";import"./OrientationBasedLayout-CwsQeYjM.js";import"./permit.mock-B6rzBIcJ.js";var C=(t=>(t.Success="success",t.Warning="warning",t.Error="error",t))(C||{}),g=(t=>(t.Light="light",t.Medium="medium",t.Heavy="heavy",t.Soft="soft",t.Rigid="rigid",t))(g||{});const L={[C.Success]:[40,100,40],[C.Warning]:[50,100,50],[C.Error]:[60,100,60,100,60],[g.Light]:[40],[g.Medium]:[50],[g.Heavy]:[60],[g.Soft]:[35],[g.Rigid]:[45],selection:[50]};function B(){return typeof window<"u"&&"navigator"in window&&"vibrate"in navigator}const D={async notificationAsync(t){B()&&navigator.vibrate(L[t])},async impactAsync(t){B()&&navigator.vibrate(L[t])},async selectionAsync(){B()&&navigator.vibrate(L.selection)}};async function Ne(t=g.Medium){if(!(D!=null&&D.impactAsync))throw new ye("Haptic","impactAsync");await D.impactAsync(t)}const Ye=()=>e.jsxs(ne,{fill:"none",height:160,viewBox:"0 0 160 160",width:160,children:[e.jsxs(xe,{clipPath:"url(#clip0_4356_5678)",children:[e.jsx(U,{d:"M143.86 78.5C143.86 42.8776 114.982 14 79.3599 14V9C117.744 9 148.86 40.1162 148.86 78.5C148.86 116.884 117.744 148 79.3599 148V143C114.982 143 143.86 114.122 143.86 78.5Z",fill:"url(#paint0_linear_4356_5678)"}),e.jsx(U,{d:"M69 145.86L84.5412 136.888L84.5412 154.833L69 145.86Z",fill:"#00A03C"})]}),e.jsxs(se,{children:[e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"paint0_linear_4356_5678",x1:"81.0001",x2:"79.3599",y1:"43.5",y2:"138",children:[e.jsx(v,{stopColor:"#00A03C",stopOpacity:0}),e.jsx(v,{offset:1,stopColor:"#00A03C"})]}),e.jsx(je,{id:"clip0_4356_5678",children:e.jsx(ve,{fill:"white",height:160,width:160})})]})]}),{width:Ze,height:Ke}=be.get("window"),a=Math.min(Math.min(Ke,Ze)*.7,350),Z=16,Xe=G.createAnimatedComponent(ae),Je=G.createAnimatedComponent(ne),K=t=>{"worklet";const r=Math.round(t/6),u=Math.floor(r/60),n=r%60;return{hours:u,minutes:n}},_=(t,r)=>{"worklet";return t*360+r*6},X=(t,r,u,n,s,l)=>{"worklet";return t<u||t===u&&r<n?{hours:u,minutes:n,clamped:!0}:t>s||t===s&&r>l?{hours:s,minutes:l,clamped:!0}:{hours:t,minutes:r,clamped:!1}},q=({onChange:t,maxHours:r,maxMinutes:u,minHours:n=0,minMinutes:s=0,initialHours:l=0,initialMinutes:o=0})=>{const i=M(_(l,o)),{value:p,enable:x,disable:A}=Pe(!1);De.useEffect(()=>{p||(i.value=W(_(l,o),{damping:10,stiffness:90,overshootClamping:!0}))},[l,o,i]);const c=M(0),d=M(0),k=$e.Pan().onStart(h=>{const m=a/2,f=a/2,y=h.x-m,E=h.y-f;c.value=Math.atan2(E,y),b(x)()}).onUpdate(h=>{const m=a/2,f=a/2,y=h.x-m,E=h.y-f,I=(Math.atan2(E,y)-c.value)*180/Math.PI,{hours:fe,minutes:ge}=K(i.value+I),{hours:$,minutes:H,clamped:pe}=X(fe,ge,n,s,r??1/0,u??1/0);pe?i.value=_($,H):i.value+=I,d.value=I,b(t)($,H)}).onEnd(()=>{d.value>1&&(i.value=W(i.value+d.value*5,{damping:10,stiffness:90,overshootClamping:!0}));const{hours:h,minutes:m}=K(i.value),{hours:f,minutes:y}=X(h,m,n,s,r??1/0,u??1/0);i.value=_(f,y),b(t)(f,y),b(A)()}),ce=_e(()=>({transform:[{rotate:`${i.value}deg`}]})),ue=N(()=>i.value>=360?0:Math.PI*a*(-1+i.value%360/360)),de=Y(()=>({strokeDashoffset:ue.value})),me=N(()=>i.value-90),he=Y(()=>({transform:[{rotate:`${me.value}deg`}]}));return e.jsxs(w,{style:S.container,children:[e.jsxs(Je,{animatedProps:he,height:a+20,style:S.progressBar,testID:"TimeDurationSpinner",width:a+20,children:[e.jsx(se,{children:e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"gradient",x1:"100%",x2:"0%",y1:"50%",y2:"50%",children:[e.jsx(v,{offset:"0%",stopColor:"#000000",stopOpacity:"1"}),e.jsx(v,{offset:"10%",stopColor:"#004699",stopOpacity:"1"}),e.jsx(v,{offset:"100%",stopColor:"#009DE6",stopOpacity:"1"})]})}),e.jsx(ae,{cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"#ddd",strokeWidth:10}),e.jsx(Xe,{animatedProps:de,cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"url(#gradient)",strokeDasharray:`${Math.PI*a}`,strokeLinecap:"round",strokeWidth:10})]}),e.jsx(He,{gesture:k,children:e.jsxs(G.View,{style:[S.circle,ce],children:[Array.from({length:Z}).map((h,m)=>{const f=360/Z*m;return e.jsx(w,{style:[S.line,{transform:[{rotate:`${f}deg`},{translateY:-a/2+40}]}],testID:`TimeDurationSpinnerLine${m}`},m)}),l===0&&o===0&&e.jsx(Se,{duration:5e3,children:e.jsx(Ye,{})})]})})]})},S=re.create({container:{height:a+20,width:a+20,justifyContent:"center",alignItems:"center"},circle:{width:a,height:a,borderRadius:a/2,justifyContent:"center",alignItems:"center"},progressBar:{position:"absolute"},line:{position:"absolute",width:2,height:20,backgroundColor:"#000"}});try{q.displayName="TimeDurationSpinner",q.__docgenInfo={description:"",displayName:"TimeDurationSpinner",props:{initialHours:{defaultValue:{value:"0"},description:"",name:"initialHours",required:!1,type:{name:"number"}},initialMinutes:{defaultValue:{value:"0"},description:"",name:"initialMinutes",required:!1,type:{name:"number"}},maxHours:{defaultValue:null,description:"",name:"maxHours",required:!1,type:{name:"number"}},maxMinutes:{defaultValue:null,description:"",name:"maxMinutes",required:!1,type:{name:"number"}},minHours:{defaultValue:{value:"0"},description:"",name:"minHours",required:!1,type:{name:"number"}},minMinutes:{defaultValue:{value:"0"},description:"",name:"minMinutes",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(hours: number, minutes: number) => void"}}}}}catch{}const J=({currentPermit:t,minimumEndTime:r})=>{const{watch:u}=oe(),n=u("startTime"),{field:{value:s,onChange:l}}=le({name:"endTime"}),o=t.max_session_length_in_days===1?n.endOf("day"):void 0,i=r??n,p=i.diff(n,"hour"),x=i.diff(n.add(p,"hours"),"minute"),{isPortrait:A}=Te();return e.jsxs(Oe,{align:"around",children:[e.jsxs(z,{gutter:"lg",halign:"center",children:[e.jsxs(Ge,{children:[e.jsx(O,{level:"h1",text:Ue(n,s??n),textAlign:"center"}),e.jsx(O,{level:"h5",text:"Parkeertijd",textAlign:"center"})]}),e.jsxs(Ce,{children:[e.jsx(we,{name:"clock",size:"sm",testID:"ParkingSessionEndTimeIcon"})," ","Eindtijd"," ",We(s??n,{includeHoursLabel:!0})]})]}),e.jsx(P,{height:"lg"}),e.jsxs(V,{testID:"ParkingSessionDurationTimePickerTabs",children:[!!A&&e.jsx(V.Tab,{accessibilityLabel:"Parkeertijd kiezen",label:"Parkeertijd",children:e.jsxs(z,{halign:"center",children:[e.jsx(P,{height:"xl"}),e.jsx(q,{initialHours:(s==null?void 0:s.diff(n,"hour"))??0,initialMinutes:s?s.diff(n,"minute")-s.diff(n,"hour")*60:0,maxHours:t.max_session_length_in_days===1?n.endOf("day").diff(n,"hour"):void 0,maxMinutes:t.max_session_length_in_days===1?n.endOf("day").diff(n,"minutes")-n.endOf("day").diff(n,"hour")*60:void 0,minHours:p,minMinutes:x,onChange:(c,d)=>{const k=n.add(c,"hour").add(d,"minute");l(k),Ae.OS==="ios"&&Ne(g.Light)}}),e.jsxs(w,{style:Q.floatingButtons,children:[e.jsx(P,{height:"md"}),e.jsxs(ke,{align:"between",grow:1,children:[e.jsx(R,{accessibilityLabel:"Verminder parkeertijd met 5 minuten",label:"-5 min",onPress:()=>{const c=s?s.add(-5,"minute"):void 0,d=i&&(c!=null&&c.isBefore(i))?i:c;l(d)},testID:"ParkingSessionDurationDecreaseButton",variant:"tertiary"}),e.jsx(R,{accessibilityLabel:"Verleng parkeertijd met 5 minuten",label:"+5 min",onPress:()=>{const c=s?s.add(5,"minute"):n.add(5,"minute"),d=o&&c.isAfter(o)?o:c;l(d)},testID:"ParkingSessionDurationIncreaseButton",variant:"tertiary"})]})]}),e.jsx(P,{height:"lg"})]})}),e.jsx(V.Tab,{accessibilityLabel:"Eindtijd kiezen",label:"Eindtijd",children:e.jsx(Re,{date:(s==null?void 0:s.toDate())??n.toDate(),is24hourSource:"locale",locale:"nl-NL",maximumDate:o==null?void 0:o.toDate(),minimumDate:i.toDate(),mode:"time",onDateChange:c=>{l(j(c))},style:Q.centerSelf,theme:"light"})})]})]})},Q=re.create({centerSelf:{alignSelf:"center"},floatingButtons:{position:"absolute",width:"100%"}});try{J.displayName="ParkingSessionDurationTimePicker",J.__docgenInfo={description:"",displayName:"ParkingSessionDurationTimePicker",props:{currentPermit:{defaultValue:null,description:"",name:"currentPermit",required:!0,type:{name:"ParkingPermit"}},minimumEndTime:{defaultValue:null,description:"",name:"minimumEndTime",required:!1,type:{name:"Dayjs"}}}}}catch{}const Qe=()=>{const{watch:t}=oe(),r=t("startTime"),{field:{value:u,onChange:n}}=le({name:"endTime"}),{close:s}=Ee(),l=ze(),o=Ie(),{height:i,visible:p}=Me(),{max_session_length_in_days:x}=l;return(o==null?void 0:o.scope)===Ve.visitor?j.max(j(),j(t("originalEndTime"))):j(),e.jsxs(Le,{grow:!0,children:[e.jsxs(e.Fragment,{children:[e.jsx(O,{level:"h5",text:"Kies eindtijd en datum",textAlign:"center"}),e.jsx(qe,{dateTime:u??r,maxDateTime:r.add(x,"day").endOf("day"),setDateTime:n})]}),e.jsx(R,{label:"Gereed",onPress:s,testID:"ParkingSessionEndTimeBottomSheetContentDoneButton"}),!!p&&e.jsx(w,{style:{height:i}})]})},gt={component:Qe,decorators:t=>e.jsx(Be,{children:e.jsx(t,{})})},T={args:{}};var F,ee,te;T.parameters={...T.parameters,docs:{...(F=T.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {}
}`,...(te=(ee=T.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};const pt=["Default"];export{T as Default,pt as __namedExportsOrder,gt as default};
