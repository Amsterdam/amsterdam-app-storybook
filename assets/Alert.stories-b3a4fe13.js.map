{"version":3,"file":"Alert.stories-b3a4fe13.js","sources":["../../src/components/ui/feedback/Alert.types.ts","../../src/components/ui/feedback/Alert.tsx"],"sourcesContent":["import {IconName} from '@/components/ui/media/iconPaths'\n\nexport enum AlertCloseType {\n  withButton = 'withButton',\n  withoutButton = 'withoutButton',\n}\n\nexport enum AlertVariant {\n  information = 'information',\n  negative = 'negative',\n  positive = 'positive',\n}\n\nexport type AlertVariantConfig = {\n  [v in AlertVariant]: {\n    backgroundColor: string\n    borderColor: string\n    borderWidth: number\n    iconName: IconName\n  }\n}\n","import {FC, Fragment, ReactNode, useCallback, useEffect} from 'react'\nimport {\n  LayoutAnimation,\n  Platform,\n  Pressable,\n  StyleSheet,\n  UIManager,\n  View,\n} from 'react-native'\nimport {IconButton} from '@/components/ui/buttons/IconButton'\nimport {Box} from '@/components/ui/containers/Box'\nimport {SingleSelectable} from '@/components/ui/containers/SingleSelectable'\nimport {\n  AlertCloseType,\n  AlertVariant,\n  AlertVariantConfig,\n} from '@/components/ui/feedback/Alert.types'\nimport {Column} from '@/components/ui/layout/Column'\nimport {Row} from '@/components/ui/layout/Row'\nimport {Icon} from '@/components/ui/media/Icon'\nimport {Paragraph} from '@/components/ui/text/Paragraph'\nimport {Title} from '@/components/ui/text/Title'\nimport {useAccessibilityFocus} from '@/hooks/accessibility/useAccessibilityFocus'\nimport {useBeforeRemove} from '@/hooks/navigation/useBeforeRemove'\nimport {useDispatch} from '@/hooks/redux/useDispatch'\nimport {useSelector} from '@/hooks/redux/useSelector'\nimport {useIsReduceMotionEnabled} from '@/hooks/useIsReduceMotionEnabled'\nimport {resetAlert, selectAlert} from '@/store/slices/alert'\nimport {Theme} from '@/themes/themes'\nimport {useThemable} from '@/themes/useThemable'\nimport {accessibleText} from '@/utils/accessibility/accessibleText'\n\nif (\n  Platform.OS === 'android' &&\n  UIManager.setLayoutAnimationEnabledExperimental\n) {\n  UIManager.setLayoutAnimationEnabledExperimental(true)\n}\n\nexport const Alert = () => {\n  const setAccessibilityFocus = useAccessibilityFocus('long')\n  const dispatch = useDispatch()\n  const isReduceMotionEnabled = useIsReduceMotionEnabled()\n\n  const alert = useSelector(selectAlert)\n  const {closeType, content, testID, variant, withIcon} = alert\n  const variantConfig = useThemable(createVariantConfig)\n  const iconName = variantConfig[variant ?? AlertVariant.information].iconName\n\n  const styles = useThemable(createStyles(variant, variantConfig))\n\n  const reset = useCallback(() => dispatch(resetAlert()), [dispatch])\n\n  useBeforeRemove(reset)\n\n  useEffect(() => {\n    reset() // triggers when navigation navigates to new screen\n  }, [reset])\n\n  if (!alert.content) {\n    return null\n  }\n\n  const WrapperComponent: FC<{children: ReactNode}> =\n    closeType === AlertCloseType.withoutButton\n      ? props => (\n          <Pressable\n            accessibilityLanguage=\"nl-NL\"\n            accessibilityRole=\"button\"\n            onPress={() => {\n              if (!isReduceMotionEnabled) {\n                LayoutAnimation.configureNext(\n                  LayoutAnimation.Presets.easeInEaseOut,\n                )\n              }\n\n              dispatch(resetAlert())\n            }}\n            {...props}\n          />\n        )\n      : Fragment\n\n  return (\n    <Box>\n      <WrapperComponent>\n        <View\n          accessibilityLanguage=\"nl-NL\"\n          accessibilityRole=\"alert\"\n          accessible\n          ref={setAccessibilityFocus}\n          style={styles?.view}\n          testID={testID}>\n          <Row align=\"between\">\n            <SingleSelectable\n              accessibilityLabel={accessibleText(content?.title, content?.text)}\n              accessibilityLanguage=\"nl-NL\"\n              accessibilityRole=\"alert\">\n              <Row gutter=\"md\">\n                {!!withIcon && (\n                  <Icon\n                    color=\"link\"\n                    name={iconName}\n                    size=\"lg\"\n                  />\n                )}\n                <Column>\n                  {!!content?.title && (\n                    <Title\n                      level=\"h4\"\n                      text={content?.title}\n                    />\n                  )}\n                  <Paragraph>{content?.text}</Paragraph>\n                </Column>\n              </Row>\n            </SingleSelectable>\n            {closeType === AlertCloseType.withButton && (\n              <View>\n                <IconButton\n                  accessibilityHint=\"Sluit melding\"\n                  accessibilityLanguage=\"nl-NL\"\n                  icon={\n                    <Icon\n                      color=\"link\"\n                      name=\"close\"\n                      size=\"lg\"\n                    />\n                  }\n                  onPress={() => dispatch(resetAlert())}\n                />\n              </View>\n            )}\n          </Row>\n        </View>\n      </WrapperComponent>\n    </Box>\n  )\n}\n\nconst createStyles =\n  (variant: AlertVariant, variantConfig: AlertVariantConfig) =>\n  ({size}: Theme) => {\n    if (!variant) {\n      return\n    }\n\n    const {backgroundColor, borderColor, borderWidth} = variantConfig[variant]\n\n    return StyleSheet.create({\n      view: {\n        backgroundColor,\n        borderWidth,\n        borderColor,\n        paddingHorizontal: size.spacing.lg,\n        paddingVertical: size.spacing.md,\n      },\n    })\n  }\n\nconst createVariantConfig = ({color}: Theme): AlertVariantConfig => ({\n  [AlertVariant.information]: {\n    backgroundColor: color.box.background.alert,\n    borderColor: color.box.background.alert,\n    borderWidth: 2,\n    iconName: 'alert',\n  },\n  [AlertVariant.negative]: {\n    backgroundColor: color.box.background.white,\n    borderColor: color.severity.negative,\n    borderWidth: 2,\n    iconName: 'alert',\n  },\n  [AlertVariant.positive]: {\n    backgroundColor: color.box.background.white,\n    borderColor: color.severity.positive,\n    borderWidth: 2,\n    iconName: 'checkmark',\n  },\n})\n"],"names":["AlertCloseType","AlertVariant","Platform","UIManager","Alert","setAccessibilityFocus","useAccessibilityFocus","dispatch","useDispatch","isReduceMotionEnabled","useIsReduceMotionEnabled","alert","useSelector","selectAlert","closeType","content","testID","variant","withIcon","variantConfig","useThemable","createVariantConfig","iconName","styles","createStyles","reset","useCallback","resetAlert","useBeforeRemove","useEffect","WrapperComponent","props","jsx","Pressable","LayoutAnimation","Fragment","Box","View","jsxs","Row","SingleSelectable","accessibleText","Icon","Column","Title","Paragraph","IconButton","size","backgroundColor","borderColor","borderWidth","StyleSheet","color"],"mappings":"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"}