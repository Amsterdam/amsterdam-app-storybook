import{bk as ye,j as e,au as ne,aG as xe,av as $,aH as se,bl as ie,bm as j,aI as ve,aJ as je,bn as be,bo as G,aA as ae,w as re,bp as M,a9 as Pe,r as De,bq as W,br as _e,bs as b,bt as Se,bu as Y,bv as z,V as A,bw as we,bx as Te,by as oe,aP as le,_ as Ae,s as N,at as ke,t as B,f as Ce,a as Ee,aY as P,v as Ie,R as Me,B as R,a4 as v,aO as Ve,a8 as Le,b1 as Oe,aa as Be,e as Re}from"./iframe-CYHYr8R-.js";import{P as qe}from"./ParkingSessionFormProvider-odA8hJQU.js";import{T as Ge,a as V,D as He,P as Ue}from"./Track-C0vdR1gV.js";import{f as $e}from"./formatTimeRangeToDisplay-DYo-7lOC.js";import{f as We}from"./formatTimeToDisplay-DoihqNWN.js";import{u as Ye}from"./useCurrentParkingPermit.web-BLxYyXU4.js";import"./preload-helper-Dp1pzeXC.js";import"./formatDate-BE1CdqeD.js";import"./permit.mock-D36uAnKj.js";var T=(t=>(t.Success="success",t.Warning="warning",t.Error="error",t))(T||{}),g=(t=>(t.Light="light",t.Medium="medium",t.Heavy="heavy",t.Soft="soft",t.Rigid="rigid",t))(g||{});const L={[T.Success]:[40,100,40],[T.Warning]:[50,100,50],[T.Error]:[60,100,60,100,60],[g.Light]:[40],[g.Medium]:[50],[g.Heavy]:[60],[g.Soft]:[35],[g.Rigid]:[45],selection:[50]};function O(){return typeof window<"u"&&"navigator"in window&&"vibrate"in navigator}const D={async notificationAsync(t){O()&&navigator.vibrate(L[t])},async impactAsync(t){O()&&navigator.vibrate(L[t])},async selectionAsync(){O()&&navigator.vibrate(L.selection)}};async function ze(t=g.Medium){if(!(D!=null&&D.impactAsync))throw new ye("Haptic","impactAsync");await D.impactAsync(t)}const Ne=()=>e.jsxs(ne,{fill:"none",height:160,viewBox:"0 0 160 160",width:160,children:[e.jsxs(xe,{clipPath:"url(#clip0_4356_5678)",children:[e.jsx($,{d:"M143.86 78.5C143.86 42.8776 114.982 14 79.3599 14V9C117.744 9 148.86 40.1162 148.86 78.5C148.86 116.884 117.744 148 79.3599 148V143C114.982 143 143.86 114.122 143.86 78.5Z",fill:"url(#paint0_linear_4356_5678)"}),e.jsx($,{d:"M69 145.86L84.5412 136.888L84.5412 154.833L69 145.86Z",fill:"#00A03C"})]}),e.jsxs(se,{children:[e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"paint0_linear_4356_5678",x1:"81.0001",x2:"79.3599",y1:"43.5",y2:"138",children:[e.jsx(j,{stopColor:"#00A03C",stopOpacity:0}),e.jsx(j,{offset:1,stopColor:"#00A03C"})]}),e.jsx(ve,{id:"clip0_4356_5678",children:e.jsx(je,{fill:"white",height:160,width:160})})]})]}),{width:Ze,height:Je}=be.get("window"),a=Math.min(Math.min(Je,Ze)*.7,350),Z=16,Ke=G.createAnimatedComponent(ae),Xe=G.createAnimatedComponent(ne),J=t=>{"worklet";const r=Math.round(t/6),u=Math.floor(r/60),n=r%60;return{hours:u,minutes:n}},_=(t,r)=>{"worklet";return t*360+r*6},K=(t,r,u,n,s,l)=>{"worklet";return t<u||t===u&&r<n?{hours:u,minutes:n,clamped:!0}:t>s||t===s&&r>l?{hours:s,minutes:l,clamped:!0}:{hours:t,minutes:r,clamped:!1}},q=({onChange:t,maxHours:r,maxMinutes:u,minHours:n=0,minMinutes:s=0,initialHours:l=0,initialMinutes:o=0})=>{const i=M(_(l,o)),{value:p,enable:x,disable:k}=Pe(!1);De.useEffect(()=>{p||(i.value=W(_(l,o),{damping:10,stiffness:90,overshootClamping:!0}))},[l,o,i]);const c=M(0),d=M(0),C=_e.Pan().onStart(h=>{const m=a/2,f=a/2,y=h.x-m,E=h.y-f;c.value=Math.atan2(E,y),b(x)()}).onUpdate(h=>{const m=a/2,f=a/2,y=h.x-m,E=h.y-f,I=(Math.atan2(E,y)-c.value)*180/Math.PI,{hours:fe,minutes:ge}=J(i.value+I),{hours:H,minutes:U,clamped:pe}=K(fe,ge,n,s,r??1/0,u??1/0);pe?i.value=_(H,U):i.value+=I,d.value=I,b(t)(H,U)}).onEnd(()=>{d.value>1&&(i.value=W(i.value+d.value*5,{damping:10,stiffness:90,overshootClamping:!0}));const{hours:h,minutes:m}=J(i.value),{hours:f,minutes:y}=K(h,m,n,s,r??1/0,u??1/0);i.value=_(f,y),b(t)(f,y),b(k)()}),ce=Se(()=>({transform:[{rotate:`${i.value}deg`}]})),ue=Y(()=>i.value>=360?0:Math.PI*a*(-1+i.value%360/360)),de=z(()=>({strokeDashoffset:ue.value})),me=Y(()=>i.value-90),he=z(()=>({transform:[{rotate:`${me.value}deg`}]}));return e.jsxs(A,{style:S.container,children:[e.jsxs(Xe,{animatedProps:he,height:a+20,style:S.progressBar,testID:"TimeDurationSpinner",width:a+20,children:[e.jsx(se,{children:e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"gradient",x1:"100%",x2:"0%",y1:"50%",y2:"50%",children:[e.jsx(j,{offset:"0%",stopColor:"#000000",stopOpacity:"1"}),e.jsx(j,{offset:"10%",stopColor:"#004699",stopOpacity:"1"}),e.jsx(j,{offset:"100%",stopColor:"#009DE6",stopOpacity:"1"})]})}),e.jsx(ae,{cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"#ddd",strokeWidth:10}),e.jsx(Ke,{animatedProps:de,cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"url(#gradient)",strokeDasharray:`${Math.PI*a}`,strokeLinecap:"round",strokeWidth:10})]}),e.jsx(we,{gesture:C,children:e.jsxs(G.View,{style:[S.circle,ce],children:[Array.from({length:Z}).map((h,m)=>{const f=360/Z*m;return e.jsx(A,{style:[S.line,{transform:[{rotate:`${f}deg`},{translateY:-a/2+40}]}],testID:`TimeDurationSpinnerLine${m}`},m)}),l===0&&o===0&&e.jsx(Te,{duration:5e3,children:e.jsx(Ne,{})})]})})]})},S=re.create({container:{height:a+20,width:a+20,justifyContent:"center",alignItems:"center"},circle:{width:a,height:a,borderRadius:a/2,justifyContent:"center",alignItems:"center"},progressBar:{position:"absolute"},line:{position:"absolute",width:2,height:20,backgroundColor:"#000"}});try{q.displayName="TimeDurationSpinner",q.__docgenInfo={description:"",displayName:"TimeDurationSpinner",props:{initialHours:{defaultValue:{value:"0"},description:"",name:"initialHours",required:!1,type:{name:"number"}},initialMinutes:{defaultValue:{value:"0"},description:"",name:"initialMinutes",required:!1,type:{name:"number"}},maxHours:{defaultValue:null,description:"",name:"maxHours",required:!1,type:{name:"number"}},maxMinutes:{defaultValue:null,description:"",name:"maxMinutes",required:!1,type:{name:"number"}},minHours:{defaultValue:{value:"0"},description:"",name:"minHours",required:!1,type:{name:"number"}},minMinutes:{defaultValue:{value:"0"},description:"",name:"minMinutes",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(hours: number, minutes: number) => void"}}}}}catch{}const X=({currentPermit:t,minimumEndTime:r})=>{const{watch:u}=oe(),n=u("startTime"),{field:{value:s,onChange:l}}=le({name:"endTime"}),o=t.max_session_length_in_days===1?n.endOf("day"):void 0,i=r??n,p=i.diff(n,"hour"),x=i.diff(n.add(p,"hours"),"minute"),{isPortrait:k}=Ae();return e.jsxs(Ge,{align:"around",children:[e.jsxs(N,{gutter:"lg",halign:"center",children:[e.jsxs(ke,{children:[e.jsx(B,{level:"h1",text:$e(n,s??n),textAlign:"center"}),e.jsx(B,{level:"h5",text:"Parkeertijd",textAlign:"center"})]}),e.jsxs(Ce,{children:[e.jsx(Ee,{name:"clock",size:"sm",testID:"ParkingSessionEndTimeIcon"})," ","Eindtijd"," ",We(s??n,{includeHoursLabel:!0})]})]}),e.jsx(P,{height:"lg"}),e.jsxs(V,{testID:"ParkingSessionDurationTimePickerTabs",children:[!!k&&e.jsx(V.Tab,{accessibilityLabel:"Parkeertijd kiezen",label:"Parkeertijd",children:e.jsxs(N,{halign:"center",children:[e.jsx(P,{height:"xl"}),e.jsx(q,{initialHours:(s==null?void 0:s.diff(n,"hour"))??0,initialMinutes:s?s.diff(n,"minute")-s.diff(n,"hour")*60:0,maxHours:t.max_session_length_in_days===1?n.endOf("day").diff(n,"hour"):void 0,maxMinutes:t.max_session_length_in_days===1?n.endOf("day").diff(n,"minutes")-n.endOf("day").diff(n,"hour")*60:void 0,minHours:p,minMinutes:x,onChange:(c,d)=>{const C=n.add(c,"hour").add(d,"minute");l(C),Ie.OS==="ios"&&ze(g.Light)}}),e.jsxs(A,{style:Q.floatingButtons,children:[e.jsx(P,{height:"md"}),e.jsxs(Me,{align:"between",grow:1,children:[e.jsx(R,{accessibilityLabel:"Verminder parkeertijd met 5 minuten",label:"-5 min",onPress:()=>{const c=s?s.add(-5,"minute"):void 0,d=i&&(c!=null&&c.isBefore(i))?i:c;l(d)},testID:"ParkingSessionDurationDecreaseButton",variant:"tertiary"}),e.jsx(R,{accessibilityLabel:"Verleng parkeertijd met 5 minuten",label:"+5 min",onPress:()=>{const c=s?s.add(5,"minute"):n.add(5,"minute"),d=o&&c.isAfter(o)?o:c;l(d)},testID:"ParkingSessionDurationIncreaseButton",variant:"tertiary"})]})]}),e.jsx(P,{height:"lg"})]})}),e.jsx(V.Tab,{accessibilityLabel:"Eindtijd kiezen",label:"Eindtijd",children:e.jsx(He,{date:(s==null?void 0:s.toDate())??n.toDate(),is24hourSource:"locale",locale:"nl-NL",maximumDate:o==null?void 0:o.toDate(),minimumDate:i.toDate(),mode:"time",onDateChange:c=>{l(v(c))},style:Q.centerSelf,theme:"light"})})]})]})},Q=re.create({centerSelf:{alignSelf:"center"},floatingButtons:{position:"absolute",width:"100%"}});try{X.displayName="ParkingSessionDurationTimePicker",X.__docgenInfo={description:"",displayName:"ParkingSessionDurationTimePicker",props:{currentPermit:{defaultValue:null,description:"",name:"currentPermit",required:!0,type:{name:"ParkingPermit"}},minimumEndTime:{defaultValue:null,description:"",name:"minimumEndTime",required:!1,type:{name:"Dayjs"}}}}}catch{}const Qe=()=>{const{watch:t}=oe(),r=t("startTime"),{field:{value:u,onChange:n}}=le({name:"endTime"}),{close:s}=Ve(),l=Ye(),o=Le(),{height:i,visible:p}=Oe(),{max_session_length_in_days:x}=l;return(o==null?void 0:o.scope)===Be.visitor?v.max(v(),v(t("originalEndTime"))):v(),e.jsxs(Re,{grow:!0,children:[e.jsxs(e.Fragment,{children:[e.jsx(B,{level:"h5",text:"Kies eindtijd en datum",textAlign:"center"}),e.jsx(Ue,{dateTime:u??r,maxDateTime:r.add(x,"day").endOf("day"),setDateTime:n})]}),e.jsx(R,{label:"Gereed",onPress:s,testID:"ParkingSessionEndTimeBottomSheetContentDoneButton"}),!!p&&e.jsx(A,{style:{height:i}})]})},ut={component:Qe,decorators:t=>e.jsx(qe,{children:e.jsx(t,{})})},w={args:{}};var F,ee,te;w.parameters={...w.parameters,docs:{...(F=w.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {}
}`,...(te=(ee=w.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};const dt=["Default"];export{w as Default,dt as __namedExportsOrder,ut as default};
