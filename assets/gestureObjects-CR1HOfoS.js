var _=Object.defineProperty;var Y=(t,n,e)=>n in t?_(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var f=(t,n,e)=>Y(t,typeof n!="symbol"?n+"":n,e);import{P as X,r as m,R as N,j as S}from"./iframe-DkkVEemO.js";import{R as O,a as d,G as W,b as C,C as l,t as M,g as w,c as T,f as p,A as D,r as k,e as F,s as y,d as G,M as x,u as q,i as B,h as j,j as U,v as z,k as $,l as Z,m as J,B as H,n as R,o as K,H as Q}from"./index-BWBXEpBT.js";function ee(t,n){"worklet";switch(t){case l.BEGAN:return n.onBegin;case l.START:return n.onStart;case l.UPDATE:return n.onUpdate;case l.CHANGE:return n.onChange;case l.END:return n.onEnd;case l.FINALIZE:return n.onFinalize;case l.TOUCHES_DOWN:return n.onTouchesDown;case l.TOUCHES_MOVE:return n.onTouchesMove;case l.TOUCHES_UP:return n.onTouchesUp;case l.TOUCHES_CANCELLED:return n.onTouchesCancelled}}function te(t){"worklet";switch(t){case C.TOUCHES_DOWN:return l.TOUCHES_DOWN;case C.TOUCHES_MOVE:return l.TOUCHES_MOVE;case C.TOUCHES_UP:return l.TOUCHES_UP;case C.TOUCHES_CANCELLED:return l.TOUCHES_CANCELLED}return l.UNDEFINED}function g(t,n,e,...r){"worklet";const o=ee(t,n);n.isWorklet[t]?o==null||o(e,...r):o&&console.warn(M("Animated gesture callback must be a worklet"))}function ne(t){"worklet";return t.oldState!=null}function ae(t){"worklet";return t.eventType!=null}function re(t,n){if(!O)return;const e=O.useSharedValue(null),r=O.useSharedValue([]),o=[],a=i=>{"worklet";var E;const u=e.value;if(u)for(let h=0;h<u.length;h++){const c=u[h];i.handlerTag===c.handlerTag&&(ne(i)?i.oldState===d.UNDETERMINED&&i.state===d.BEGAN?g(l.BEGAN,c,i):(i.oldState===d.BEGAN||i.oldState===d.UNDETERMINED)&&i.state===d.ACTIVE?(g(l.START,c,i),r.value[c.handlerTag]=void 0):i.oldState!==i.state&&i.state===d.END?(i.oldState===d.ACTIVE&&g(l.END,c,i,!0),g(l.FINALIZE,c,i,!0)):(i.state===d.FAILED||i.state===d.CANCELLED)&&i.state!==i.oldState&&(i.oldState===d.ACTIVE&&g(l.END,c,i,!1),g(l.FINALIZE,c,i,!1)):ae(i)?(o[h]||(o[h]=W.create(i.handlerTag)),i.eventType!==C.UNDETERMINED&&g(te(i.eventType),c,i,o[h])):(g(l.UPDATE,c,i),c.onChange&&c.changeEventCalculator&&(g(l.CHANGE,c,(E=c.changeEventCalculator)==null?void 0:E.call(c,i,r.value[c.handlerTag])),r.value[c.handlerTag]=i)))}},s=O.useEvent(a,["onGestureHandlerStateChange","onGestureHandlerEvent"],n);t.animatedEventHandler=s,t.animatedHandlers=e}function b({preparedGesture:t,gestureConfig:n,gesturesToAttach:e,viewTag:r,webEventHandlersRef:o}){n.initialize(),w(()=>{t.isMounted&&n.prepare()});for(const a of e)T.createGestureHandler(a.handlerName,a.handlerTag,p(a.config,D)),k(a.handlerTag,a,a.config.testId);w(()=>{if(t.isMounted){for(const a of e)T.updateGestureHandler(a.handlerTag,p(a.config,D,F(a)));y()}});for(const a of e){const s=a.shouldUseReanimated?G.REANIMATED_WORKLET:G.JS_FUNCTION_NEW_API;X.OS==="web"?T.attachGestureHandler(a.handlerTag,r,G.JS_FUNCTION_OLD_API,o):T.attachGestureHandler(a.handlerTag,r,s),x.gestureWillMount(a)}if(t.attachedGestures=e,t.animatedHandlers){const a=s=>s.shouldUseReanimated;t.animatedHandlers.value=e.filter(a).map(s=>s.handlers)}}function I(t,n){if(n.length!==t.attachedGestures.length)return!0;for(let e=0;e<n.length;e++)if(n[e].handlerName!==t.attachedGestures[e].handlerName||n[e].shouldUseReanimated!==t.attachedGestures[e].shouldUseReanimated)return!0;return!1}function V(t){for(const n of t.attachedGestures)T.dropGestureHandler(n.handlerTag),q(n.handlerTag,n.config.testId),x.gestureWillUnmount(n);y()}const L=m.forwardRef(({children:t},n)=>{try{const e=N.Children.only(t);return B(e)?N.cloneElement(e,{ref:n},e.props.children):S.jsx("div",{ref:n,style:{display:"contents"},children:e})}catch{throw new Error(M("GestureDetector got more than one view as a child. If you want the gesture to work on multiple views, wrap them with a common parent and attach the gesture to that view."))}}),se=L;function ie(t,n,e){n.prepare();for(let o=0;o<e.length;o++){const a=t.attachedGestures[o];e[o].handlerTag!==a.handlerTag&&(e[o].handlerTag=a.handlerTag,e[o].handlers.handlerTag=a.handlerTag)}const r=t.attachedGestures;w(()=>{if(!t.isMounted||r!==t.attachedGestures)return;let o=r.length!==e.length;for(let a=0;a<e.length;a++){const s=r[a];s.handlers.gestureId!==e[a].handlers.gestureId&&(e[a].shouldUseReanimated||s.shouldUseReanimated)&&(o=!0),s.config=e[a].config,s.handlers=e[a].handlers,T.updateGestureHandler(s.handlerTag,p(s.config,D,F(s))),k(s.handlerTag,s,s.config.testId)}if(t.animatedHandlers&&o){const a=r.filter(s=>s.shouldUseReanimated).map(s=>s.handlers);t.animatedHandlers.value=a}y()})}function oe(t,n,e,r,o){const a=j();return m.useCallback(i=>{const u=U(t.viewRef),E=u!==t.previousViewTag;E||I(n,e)?(z(t.viewRef),V(n),b({preparedGesture:n,gestureConfig:r,gesturesToAttach:e,webEventHandlersRef:o,viewTag:u}),E&&(t.previousViewTag=u,t.forceRebuildReanimatedEvent=!0,a())):i||ie(n,r,e)},[a,r,e,n,t,o])}function le(t,n){return m.useCallback(r=>{r!==null&&(t.viewRef=r,t.previousViewTag===-1&&(t.previousViewTag=U(t.viewRef)),t.firstRender||n(!0))},[t,n])}function A(t,n){if(t===void 0)return!1;for(const e of $(t))if(e===n.handlerTag)return!0;return!1}function ce(t,n){m.useEffect(()=>x.addMountListener(e=>{for(const r of n.attachedGestures){const o=r.config.blocksHandlers,a=r.config.requireToFail,s=r.config.simultaneousWith;if(A(o,e)||A(a,e)||A(s,e)){t();return}}}),[t,n])}function ue(t,n){const e=["userSelect","enableContextMenu","touchAction"];for(const r of e){const o=t[r];if(o!==void 0)for(const a of n.toGestureArray()){const s=a.config;s[r]=o}}}const ye=t=>{m.useContext(Z);const n=t.gesture;ue(t,n);const e=m.useMemo(()=>n.toGestureArray(),[n]),r=e.some(h=>h.shouldUseReanimated),o=J(),a=m.useRef({firstRender:!0,viewRef:null,previousViewTag:-1,forceRebuildReanimatedEvent:!1}).current,s=N.useRef({attachedGestures:[],animatedEventHandler:null,animatedHandlers:null,shouldUseReanimated:r,isMounted:!1}).current,i=oe(a,s,e,n,o),u=le(a,i),E=a.firstRender||a.forceRebuildReanimatedEvent||I(s,e);return a.forceRebuildReanimatedEvent=!1,re(s,E),m.useLayoutEffect(()=>{const h=U(a.viewRef);return s.isMounted=!0,b({preparedGesture:s,gestureConfig:n,gesturesToAttach:e,webEventHandlersRef:o,viewTag:h}),()=>{s.isMounted=!1,V(s)}},[]),m.useEffect(()=>{a.firstRender?a.firstRender=!1:i()},[t]),ce(i,s),r?S.jsx(se,{ref:u,onGestureHandlerEvent:s.animatedEventHandler,children:t.children}):S.jsx(L,{ref:u,children:t.children})};class he extends H{constructor(){super();f(this,"config",{});this.handlerName="FlingGestureHandler"}numberOfPointers(e){return this.config.numberOfPointers=e,this}direction(e){return this.config.direction=e,this}}function de(t,n){"worklet";let e;return n===void 0?e={forceChange:t.force}:e={forceChange:t.force-n.force},{...t,...e}}class fe extends R{constructor(){super();f(this,"config",{});this.handlerName="ForceTouchGestureHandler"}minForce(e){return this.config.minForce=e,this}maxForce(e){return this.config.maxForce=e,this}feedbackOnActivation(e){return this.config.feedbackOnActivation=e,this}onChange(e){return this.handlers.changeEventCalculator=de,super.onChange(e)}}function P(t,n){return t===void 0?[...n]:[...t,...n]}class v extends K{constructor(...e){super();f(this,"gestures",[]);f(this,"simultaneousGestures",[]);f(this,"requireGesturesToFail",[]);this.gestures=e}prepareSingleGesture(e,r,o){if(e instanceof H){const a={...e.config};a.simultaneousWith=P(a.simultaneousWith,r),a.requireToFail=P(a.requireToFail,o),e.config=a}else e instanceof v&&(e.simultaneousGestures=r,e.requireGesturesToFail=o,e.prepare())}prepare(){for(const e of this.gestures)this.prepareSingleGesture(e,this.simultaneousGestures,this.requireGesturesToFail)}initialize(){for(const e of this.gestures)e.initialize()}toGestureArray(){return this.gestures.flatMap(e=>e.toGestureArray())}}class ge extends v{prepare(){const n=this.gestures.map(e=>this.gestures.filter(r=>r!==e).flatMap(r=>r.toGestureArray()));for(let e=0;e<this.gestures.length;e++)this.prepareSingleGesture(this.gestures[e],n[e],this.requireGesturesToFail)}}class me extends v{prepare(){const n=this.gestures.map(r=>r.toGestureArray());let e=[];for(let r=0;r<this.gestures.length;r++)this.prepareSingleGesture(this.gestures[r],this.simultaneousGestures,this.requireGesturesToFail.concat(e)),e=e.concat(n[r])}}class Ee extends H{constructor(){super();f(this,"config",{});this.handlerName="LongPressGestureHandler",this.shouldCancelWhenOutside(!0)}minDuration(e){return this.config.minDurationMs=e,this}maxDistance(e){return this.config.maxDist=e,this}numberOfPointers(e){return this.config.numberOfPointers=e,this}}function Te(t,n){"worklet";let e;return n===void 0?e={changeX:t.translationX,changeY:t.translationY}:e={changeX:t.translationX-n.translationX,changeY:t.translationY-n.translationY},{...t,...e}}class Ce extends R{constructor(){super();f(this,"config",{});this.handlerName="PanGestureHandler"}activeOffsetY(e){return Array.isArray(e)?(this.config.activeOffsetYStart=e[0],this.config.activeOffsetYEnd=e[1]):e<0?this.config.activeOffsetYStart=e:this.config.activeOffsetYEnd=e,this}activeOffsetX(e){return Array.isArray(e)?(this.config.activeOffsetXStart=e[0],this.config.activeOffsetXEnd=e[1]):e<0?this.config.activeOffsetXStart=e:this.config.activeOffsetXEnd=e,this}failOffsetY(e){return Array.isArray(e)?(this.config.failOffsetYStart=e[0],this.config.failOffsetYEnd=e[1]):e<0?this.config.failOffsetYStart=e:this.config.failOffsetYEnd=e,this}failOffsetX(e){return Array.isArray(e)?(this.config.failOffsetXStart=e[0],this.config.failOffsetXEnd=e[1]):e<0?this.config.failOffsetXStart=e:this.config.failOffsetXEnd=e,this}minPointers(e){return this.config.minPointers=e,this}maxPointers(e){return this.config.maxPointers=e,this}minDistance(e){return this.config.minDist=e,this}minVelocity(e){return this.config.minVelocity=e,this}minVelocityX(e){return this.config.minVelocityX=e,this}minVelocityY(e){return this.config.minVelocityY=e,this}averageTouches(e){return this.config.avgTouches=e,this}enableTrackpadTwoFingerGesture(e){return this.config.enableTrackpadTwoFingerGesture=e,this}activateAfterLongPress(e){return this.config.activateAfterLongPress=e,this}onChange(e){return this.handlers.changeEventCalculator=Te,super.onChange(e)}}function He(t,n){"worklet";let e;return n===void 0?e={scaleChange:t.scale}:e={scaleChange:t.scale/n.scale},{...t,...e}}class Re extends R{constructor(){super(),this.handlerName="PinchGestureHandler"}onChange(n){return this.handlers.changeEventCalculator=He,super.onChange(n)}}function ve(t,n){"worklet";let e;return n===void 0?e={rotationChange:t.rotation}:e={rotationChange:t.rotation-n.rotation},{...t,...e}}class Oe extends R{constructor(){super(),this.handlerName="RotationGestureHandler"}onChange(n){return this.handlers.changeEventCalculator=ve,super.onChange(n)}}class Ge extends H{constructor(){super();f(this,"config",{});this.handlerName="TapGestureHandler",this.shouldCancelWhenOutside(!0)}minPointers(e){return this.config.minPointers=e,this}numberOfTaps(e){return this.config.numberOfTaps=e,this}maxDistance(e){return this.config.maxDist=e,this}maxDuration(e){return this.config.maxDurationMs=e,this}maxDelay(e){return this.config.maxDelayMs=e,this}maxDeltaX(e){return this.config.maxDeltaX=e,this}maxDeltaY(e){return this.config.maxDeltaY=e,this}}class Ae extends H{constructor(){super(),this.config={},this.handlerName="NativeViewGestureHandler"}shouldActivateOnStart(n){return this.config.shouldActivateOnStart=n,this}disallowInterruption(n){return this.config.disallowInterruption=n,this}}function Ne(t,n){"worklet";return t}class Se extends R{constructor(){super(),this.handlerName="ManualGestureHandler"}onChange(n){return this.handlers.changeEventCalculator=Ne,super.onChange(n)}}const xe={Tap:()=>new Ge,Pan:()=>new Ce,Pinch:()=>new Re,Rotation:()=>new Oe,Fling:()=>new he,LongPress:()=>new Ee,ForceTouch:()=>new fe,Native:()=>new Ae,Manual:()=>new Se,Hover:()=>new Q,Race:(...t)=>new v(...t),Simultaneous(...t){return new ge(...t)},Exclusive(...t){return new me(...t)}};export{xe as G,ye as a};
