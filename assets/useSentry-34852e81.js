import{r as R}from"./index-76fb7be0.js";import{d as U}from"./redux-toolkit.esm-cb9067f1.js";import{c as D}from"./development-de2bc6fd.js";import{a as F}from"./index-07bd7250.js";var S=(e=>(e.default="default",e.internetConnection="internetConnection",e))(S||{}),i=(e=>(e.coordinates="Failed to get coordinates to determine location",e.getRedirectsUrl="Get redirects url with key",e.hideSplashScreen="Hide splash screen failed",e.isScreenReaderEnabled="Screenreader enabled check failed",e.nodeNotFound="Node not found for ref",e.notSupportedStoredUrl="Can not use url to open store",e.openMailUrl="Open mail url failed",e.openPhoneUrl="Open phone url failed",e.openStore="Open app store",e.openWebUrl="Open web url failed",e.pickingImageFailed="Picking image from device failed",e.piwikInitialization="Piwik initialization failed",e.piwikTrackCustomEvent="Piwik trackCustomEvent failed",e.piwikTrackOutlink="Piwik trackOutlink failed",e.piwikTrackScreen="Piwik trackScreen failed",e.piwikTrackSearch="Piwik trackSearch failed",e.redirectNotFound="Redirect not found",e.registerDevice="Register device for push notifications failed",e.requestLocationPermission="Request location permission failed",e.sentryMiddleWareError="Sentry middleware logger failed",e.takingPhotoFailed="Taking photo failed",e.updatePermission="Update permission failed",e))(i||{});const O={[i.coordinates]:["error"],[i.getRedirectsUrl]:["redirectsKey"],[i.nodeNotFound]:[],[i.notSupportedStoredUrl]:[],[i.hideSplashScreen]:["error"],[i.isScreenReaderEnabled]:["error"],[i.openMailUrl]:[],[i.openPhoneUrl]:[],[i.openStore]:["error"],[i.openWebUrl]:["url"],[i.pickingImageFailed]:["error","code","viaCamera"],[i.piwikInitialization]:["error"],[i.piwikTrackCustomEvent]:["category","action","name","path","value"],[i.piwikTrackOutlink]:["url"],[i.piwikTrackScreen]:["path"],[i.piwikTrackSearch]:[],[i.redirectNotFound]:["urlKey"],[i.registerDevice]:["error"],[i.requestLocationPermission]:["error"],[i.sentryMiddleWareError]:["endpoint","error","originalStatus","status","url"],[i.takingPhotoFailed]:["code","message","viaCamera"],[i.updatePermission]:["error","permission","request"]};var b=(e=>(e.registerDevice="registerDevice",e.unregisterDevice="unregisterDevice",e))(b||{});const T=(e,t)=>{var a;if(!(!t||Object.keys(t).length===0))return(a=O[e])==null?void 0:a.reduce((s,n)=>({...s,[n]:t[n]}),{})},q=(e,t)=>e===b.unregisterDevice&&(t==null?void 0:t.status)===404&&(t==null?void 0:t.data)==="No record found",C=[0,"0"],_=e=>e!==void 0&&!C.includes(e);var w=F();const z=e=>{if(!e)return"";const t={};return Object.keys(w.parse(e)).forEach(a=>{t[a]="___"}),`?${w.stringify(t)}`},M=e=>e?`#${e.split("/").map(()=>"___").join("/")}`:"",W=(e="")=>{const[t,a,...s]=e.split("#"),[n,r,...o]=t.split("?");if(s.length||o.length)return n;const d=z(r),l=M(a);return`${n}${d}${l}`},$=e=>(t,a,s=S.default)=>{},P=e=>(t,a,s,n)=>{const r=e?T(t,s):void 0;D("sendSentryErrorLog",n??t,a,r)},x=(e,t,a)=>{var s;return{meta:{arg:{endpointName:e},baseQueryMeta:t},payload:{error:a,originalStatus:(s=t==null?void 0:t.response)==null?void 0:s.status,status:a==null?void 0:a.status.toString()}}},A=(e,t=!1)=>{var c,u,p,f,k,g,m,h,v;const s=(u=(c=e.meta)==null?void 0:c.arg)==null?void 0:u.endpointName,n=(p=e.payload)==null?void 0:p.originalStatus,r=(f=e.payload)==null?void 0:f.status;if(!_(n??r)||q(s,e.payload))return;let o="Rejected RTK action";s&&(o=`${n??r??"Error"} for ${s}`);const d=`${t?"Request failed":"All request retries failed"}: ${o}`,l=W(((m=(g=(k=e.meta)==null?void 0:k.baseQueryMeta)==null?void 0:g.request)==null?void 0:m.url)??"");l.startsWith("http://localhost")||P(!0)(i.sentryMiddleWareError,"processes/logging.ts",{endpoint:s,error:(h=e.payload)==null?void 0:h.error,originalStatus:n,status:(v=e.payload)==null?void 0:v.status,url:l},d)},H=()=>e=>t=>(U(t)&&A(t),e(t)),G=(e=!1,t=!1)=>R.useMemo(()=>({captureSentryBreadcrumb:$(),sendSentryErrorLog:P(!0)}),[!0,e,t]);export{b as D,i as S,H as a,W as b,x as c,q as i,w as l,A as s,G as u};
