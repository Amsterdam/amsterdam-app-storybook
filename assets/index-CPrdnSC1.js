var cs=Object.defineProperty;var ls=(i,t,e)=>t in i?cs(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var a=(i,t,e)=>ls(i,typeof t!="symbol"?t+"":t,e);import{R as te,v as Ge,P as Q,F as us,S as M,r as I,U as fs,j as $t,w as ds,V as vi,l as ps,x as vs,y as Es,z as gs,B as Ts,C as Fe}from"./iframe-B7i7tXCx.js";import{m as ms}from"./index-nw1KJTJ9.js";const c={UNDETERMINED:0,FAILED:1,BEGAN:2,CANCELLED:3,ACTIVE:4,END:5},xt={UNDETERMINED:0,TOUCHES_DOWN:1,TOUCHES_MOVE:2,TOUCHES_UP:3,TOUCHES_CANCELLED:4};function Ps(i){return Array.isArray(i)?i:[i]}function Is(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function ee(){return Is(window,"process")&&!1}function Ne(i){return`[react-native-gesture-handler] ${i}`}function Ei(){return!!(window!=null&&window.nativeFabricUIManager)}function Ns(){return te.version.startsWith("19.")}function Os(){const i=window;return(!i.nativeCallSyncHook||!!i.__REMOTEDEV__)&&!i.RN$Bridgeless}function gi(i,t){if(i===t)return!0;if(typeof i!="object"||typeof t!="object"||i===null||t===null)return!1;const e=Object.keys(i),s=Object.keys(t);if(e.length!==s.length)return!1;for(const n of e)if(!s.includes(n)||!gi(i[n],t[n]))return!1;return!0}const Vt={},Oe=new Map,Ae=new Map;function Rr(i,t,e){Oe.set(i,t),ee()}function As(i,t){Ae.set(i,t)}function Cs(i){Ae.delete(i)}function kr(i,t){Oe.delete(i),ee()}function ys(i){return Oe.get(i)}function Ss(i){return Ae.get(i)}class A{static getHandler(t){if(t in this.gestures)return this.gestures[t];throw new Error(`No handler for tag ${t}`)}static createGestureHandler(t,e){if(t in this.gestures)throw new Error(`Handler with tag ${t} already exists. Please ensure that no Gesture instance is used across multiple GestureDetectors.`);this.gestures[t]=e,this.gestures[t].handlerTag=t}static dropGestureHandler(t){t in this.gestures&&(this.gestures[t].onDestroy(),delete this.gestures[t])}static get nodes(){return{...this.gestures}}}a(A,"gestures",{});const Ds={create(i){return{begin:()=>{A.getHandler(i).begin()},activate:()=>{A.getHandler(i).activate(!0)},fail:()=>{A.getHandler(i).fail()},end:()=>{A.getHandler(i).end()}}}};let Wt=null,Bt=null;const Lt=new Map,Et=[];function Ye(i){return i.oldState!=null}function _s(i){return i.eventType!=null}function jt(i){var e,s,n,r,o,u,f,h,l,d,p,E,g,_,P,L,$,b,nt,vt,Ht,Re,ke,He,xe,Le;const t=ys(i.handlerTag);if(t)if(Ye(i))i.oldState===c.UNDETERMINED&&i.state===c.BEGAN?(s=(e=t.handlers).onBegin)==null||s.call(e,i):(i.oldState===c.BEGAN||i.oldState===c.UNDETERMINED)&&i.state===c.ACTIVE?((r=(n=t.handlers).onStart)==null||r.call(n,i),Et[t.handlers.handlerTag]=i):i.oldState!==i.state&&i.state===c.END?(i.oldState===c.ACTIVE&&((u=(o=t.handlers).onEnd)==null||u.call(o,i,!0)),(h=(f=t.handlers).onFinalize)==null||h.call(f,i,!0),Et[t.handlers.handlerTag]=void 0):(i.state===c.FAILED||i.state===c.CANCELLED)&&i.oldState!==i.state&&(i.oldState===c.ACTIVE&&((d=(l=t.handlers).onEnd)==null||d.call(l,i,!1)),(E=(p=t.handlers).onFinalize)==null||E.call(p,i,!1),Lt.delete(i.handlerTag),Et[t.handlers.handlerTag]=void 0);else if(_s(i)){Lt.has(i.handlerTag)||Lt.set(i.handlerTag,Ds.create(i.handlerTag));const V=Lt.get(i.handlerTag);switch(i.eventType){case xt.TOUCHES_DOWN:(_=(g=t.handlers)==null?void 0:g.onTouchesDown)==null||_.call(g,i,V);break;case xt.TOUCHES_MOVE:(L=(P=t.handlers)==null?void 0:P.onTouchesMove)==null||L.call(P,i,V);break;case xt.TOUCHES_UP:(b=($=t.handlers)==null?void 0:$.onTouchesUp)==null||b.call($,i,V);break;case xt.TOUCHES_CANCELLED:(vt=(nt=t.handlers)==null?void 0:nt.onTouchesCancelled)==null||vt.call(nt,i,V);break}}else(Re=(Ht=t.handlers).onUpdate)==null||Re.call(Ht,i),t.handlers.onChange&&t.handlers.changeEventCalculator&&((Le=(xe=t.handlers).onChange)==null||Le.call(xe,(He=(ke=t.handlers).changeEventCalculator)==null?void 0:He.call(ke,i,Et[t.handlers.handlerTag])),Et[t.handlers.handlerTag]=i);else{const V=Ss(i.handlerTag);if(V){const Xe={nativeEvent:i};Ye(i)?V.onGestureStateChange(Xe):V.onGestureEvent(Xe);return}}}function Ms(){ws(),Wt=Ge.addListener("onGestureHandlerEvent",jt),Bt=Ge.addListener("onGestureHandlerStateChange",jt)}function ws(){Wt&&(Wt.remove(),Wt=null),Bt&&(Bt.remove(),Bt=null)}const lt=15,bs=.1;let v=function(i){return i[i.DOWN=0]="DOWN",i[i.ADDITIONAL_POINTER_DOWN=1]="ADDITIONAL_POINTER_DOWN",i[i.UP=2]="UP",i[i.ADDITIONAL_POINTER_UP=3]="ADDITIONAL_POINTER_UP",i[i.MOVE=4]="MOVE",i[i.ENTER=5]="ENTER",i[i.LEAVE=6]="LEAVE",i[i.CANCEL=7]="CANCEL",i}({}),rt=function(i){return i[i.UNDETERMINED=0]="UNDETERMINED",i[i.DOWN=1]="DOWN",i[i.MOVE=2]="MOVE",i[i.UP=3]="UP",i[i.CANCELLED=4]="CANCELLED",i}({}),ot=function(i){return i[i.UNDETERMINED=0]="UNDETERMINED",i[i.MOUSE=1]="MOUSE",i[i.TOUCHPAD=2]="TOUCHPAD",i}({}),y=function(i){return i[i.TOUCH=0]="TOUCH",i[i.STYLUS=1]="STYLUS",i[i.MOUSE=2]="MOUSE",i[i.KEY=3]="KEY",i[i.OTHER=4]="OTHER",i}({});class Rs{constructor(t){this.capacity=t,this.buffer=new Array(t),this.index=0,this._size=0}push(t){this.buffer[this.index]=t,this.index=(this.index+1)%this.capacity,this._size=Math.min(this.size+1,this.capacity)}get(t){if(this._size===this.capacity){let e=(this.index+t)%this.capacity;return e<0&&(e+=this.capacity),this.buffer[e]}else return this.buffer[t]}clear(){this.buffer=new Array(this.capacity),this.index=0,this._size=0}get size(){return this._size}}let Ti=class mi{constructor(t){this.offset=0,this.length=t,this.elements=new Array(t)}static fromVOL(t,e,s){const n=new mi(0);return n.offset=e,n.length=s,n.elements=t,n}get(t){return this.elements[this.offset+t]}set(t,e){this.elements[this.offset+t]=e}dot(t){let e=0;for(let s=0;s<this.length;s++)e+=this.get(s)*t.get(s);return e}norm(){return Math.sqrt(this.dot(this))}};class ne{constructor(t,e){this.columns=e,this.elements=new Array(t*e)}get(t,e){return this.elements[t*this.columns+e]}set(t,e,s){this.elements[t*this.columns+e]=s}getRow(t){return Ti.fromVOL(this.elements,t*this.columns,this.columns)}}class ks{constructor(t){this.coefficients=new Array(t+1)}}const Hs=1e-10;class Ue{constructor(t,e,s){this.x=t,this.y=e,this.w=s}solve(t){if(t>this.x.length)return null;const e=new ks(t),s=this.x.length,n=t+1,r=new ne(n,s);for(let h=0;h<s;h++){r.set(0,h,this.w[h]);for(let l=1;l<n;l++)r.set(l,h,r.get(l-1,h)*this.x[h])}const o=new ne(n,s),u=new ne(n,s);for(let h=0;h<n;h+=1){for(let p=0;p<s;p+=1)o.set(h,p,r.get(h,p));for(let p=0;p<h;p+=1){const E=o.getRow(h).dot(o.getRow(p));for(let g=0;g<s;g+=1)o.set(h,g,o.get(h,g)-E*o.get(p,g))}const l=o.getRow(h).norm();if(l<Hs)return null;const d=1/l;for(let p=0;p<s;p+=1)o.set(h,p,o.get(h,p)*d);for(let p=0;p<n;p+=1)u.set(h,p,p<h?0:o.getRow(h).dot(r.getRow(p)))}const f=new Ti(s);for(let h=0;h<s;h+=1)f.set(h,this.y[h]*this.w[h]);for(let h=n-1;h>=0;h-=1){e.coefficients[h]=o.getRow(h).dot(f);for(let l=n-1;l>h;l-=1)e.coefficients[h]-=u.get(h,l)*e.coefficients[l];e.coefficients[h]/=u.get(h,h)}return e}}class xs{constructor(){a(this,"assumePointerMoveStoppedMilliseconds",40);a(this,"historySize",20);a(this,"horizonMilliseconds",300);a(this,"minSampleSize",3);this.samples=new Rs(this.historySize)}add(t){this.samples.push(t)}getVelocityEstimate(){const t=[],e=[],s=[],n=[];let r=0,o=this.samples.size-1;const u=this.samples.get(o);if(!u)return null;let f=u;for(;r<this.samples.size;){const h=this.samples.get(o),l=u.time-h.time,d=Math.abs(h.time-f.time);if(f=h,l>this.horizonMilliseconds||d>this.assumePointerMoveStoppedMilliseconds)break;t.push(h.x),e.push(h.y),s.push(1),n.push(-l),r++,o--}if(r>=this.minSampleSize){const l=new Ue(n,t,s).solve(2);if(l!==null){const p=new Ue(n,e,s).solve(2);if(p!==null){const E=l.coefficients[1]*1e3,g=p.coefficients[1]*1e3;return[E,g]}}}return null}get velocity(){const t=this.getVelocityEstimate();return t!==null?t:[0,0]}reset(){this.samples.clear()}}const Ve=20;class Pi{constructor(){a(this,"velocityTracker",new xs);a(this,"_trackedPointers",new Map);a(this,"touchEventsIds",new Map);a(this,"cachedAbsoluteAverages",{x:0,y:0});a(this,"cachedRelativeAverages",{x:0,y:0});this.lastMovedPointerId=NaN;for(let t=0;t<Ve;++t)this.touchEventsIds.set(t,NaN)}addToTracker(t){if(this.trackedPointers.has(t.pointerId))return;this.lastMovedPointerId=t.pointerId;const e={abosoluteCoords:{x:t.x,y:t.y},relativeCoords:{x:t.offsetX,y:t.offsetY},timestamp:t.time,velocityX:0,velocityY:0};this.trackedPointers.set(t.pointerId,e),this.mapTouchEventId(t.pointerId),this.cachedAbsoluteAverages=this.getAbsoluteCoordsAverage(),this.cachedRelativeAverages=this.getRelativeCoordsAverage()}removeFromTracker(t){this.trackedPointers.delete(t),this.removeMappedTouchId(t)}track(t){const e=this.trackedPointers.get(t.pointerId);if(!e)return;this.lastMovedPointerId=t.pointerId,this.velocityTracker.add(t);const[s,n]=this.velocityTracker.velocity;e.velocityX=s,e.velocityY=n,e.abosoluteCoords={x:t.x,y:t.y},e.relativeCoords={x:t.offsetX,y:t.offsetY},this.trackedPointers.set(t.pointerId,e),this.cachedAbsoluteAverages=this.getAbsoluteCoordsAverage(),this.cachedRelativeAverages=this.getRelativeCoordsAverage()}mapTouchEventId(t){for(const[e,s]of this.touchEventsIds)if(isNaN(s)){this.touchEventsIds.set(e,t);break}}removeMappedTouchId(t){const e=this.getMappedTouchEventId(t);isNaN(e)||this.touchEventsIds.set(e,NaN)}getMappedTouchEventId(t){for(const[e,s]of this.touchEventsIds.entries())if(s===t)return e;return NaN}getVelocity(t){const e=this.trackedPointers.get(t);return e?{x:e.velocityX,y:e.velocityY}:null}getLastAbsoluteCoords(t){var e;return(e=this.trackedPointers.get(t??this.lastMovedPointerId))==null?void 0:e.abosoluteCoords}getLastRelativeCoords(t){var e;return(e=this.trackedPointers.get(t??this.lastMovedPointerId))==null?void 0:e.relativeCoords}getAbsoluteCoordsAverage(){const t=this.getAbsoluteCoordsSum(),e=t.x/this.trackedPointers.size,s=t.y/this.trackedPointers.size;return{x:isNaN(e)?this.cachedAbsoluteAverages.x:e,y:isNaN(s)?this.cachedAbsoluteAverages.y:s}}getRelativeCoordsAverage(){const t=this.getRelativeCoordsSum(),e=t.x/this.trackedPointers.size,s=t.y/this.trackedPointers.size;return{x:isNaN(e)?this.cachedRelativeAverages.x:e,y:isNaN(s)?this.cachedRelativeAverages.y:s}}getAbsoluteCoordsSum(t){const e={x:0,y:0};return this.trackedPointers.forEach((s,n)=>{n!==t&&(e.x+=s.abosoluteCoords.x,e.y+=s.abosoluteCoords.y)}),e}getRelativeCoordsSum(t){const e={x:0,y:0};return this.trackedPointers.forEach((s,n)=>{n!==t&&(e.x+=s.relativeCoords.x,e.y+=s.relativeCoords.y)}),e}resetTracker(){this.velocityTracker.reset(),this.trackedPointers.clear(),this.lastMovedPointerId=NaN;for(let t=0;t<Ve;++t)this.touchEventsIds.set(t,NaN)}static shareCommonPointers(t,e){return t.some(s=>e.includes(s))}get trackedPointersCount(){return this.trackedPointers.size}get trackedPointersIDs(){const t=[];return this.trackedPointers.forEach((e,s)=>{t.push(s)}),t}get trackedPointers(){return this._trackedPointers}}class k{constructor(){a(this,"gestureHandlers",[]);a(this,"awaitingHandlers",[]);a(this,"awaitingHandlersTags",new Set);a(this,"handlingChangeSemaphore",0);a(this,"activationIndex",0)}scheduleFinishedHandlersCleanup(){this.handlingChangeSemaphore===0&&this.cleanupFinishedHandlers()}cleanHandler(t){t.reset(),t.active=!1,t.awaiting=!1,t.activationIndex=Number.MAX_VALUE}removeHandlerFromOrchestrator(t){const e=this.gestureHandlers.indexOf(t),s=this.awaitingHandlers.indexOf(t);e>=0&&this.gestureHandlers.splice(e,1),s>=0&&(this.awaitingHandlers.splice(s,1),this.awaitingHandlersTags.delete(t.handlerTag))}cleanupFinishedHandlers(){const t=new Set;for(let e=this.gestureHandlers.length-1;e>=0;--e){const s=this.gestureHandlers[e];this.isFinished(s.state)&&!s.awaiting&&(this.cleanHandler(s),t.add(s))}this.gestureHandlers=this.gestureHandlers.filter(e=>!t.has(e))}hasOtherHandlerToWaitFor(t){const e=s=>!this.isFinished(s.state)&&this.shouldHandlerWaitForOther(t,s);return this.gestureHandlers.some(e)}shouldBeCancelledByFinishedHandler(t){const e=s=>this.shouldHandlerWaitForOther(t,s)&&s.state===c.END;return this.gestureHandlers.some(e)}tryActivate(t){if(this.shouldBeCancelledByFinishedHandler(t)){t.cancel();return}if(this.hasOtherHandlerToWaitFor(t)){this.addAwaitingHandler(t);return}const e=t.state;if(!(e===c.CANCELLED||e===c.FAILED)){if(this.shouldActivate(t)){this.makeActive(t);return}if(e===c.ACTIVE){t.fail();return}e===c.BEGAN&&t.cancel()}}shouldActivate(t){const e=s=>this.shouldHandlerBeCancelledBy(t,s);return!this.gestureHandlers.some(e)}cleanupAwaitingHandlers(t){const e=s=>!s.awaiting&&this.shouldHandlerWaitForOther(s,t);for(const s of this.awaitingHandlers)e(s)&&(this.cleanHandler(s),this.awaitingHandlersTags.delete(s.handlerTag));this.awaitingHandlers=this.awaitingHandlers.filter(s=>this.awaitingHandlersTags.has(s.handlerTag))}onHandlerStateChange(t,e,s,n){if(!(!t.enabled&&!n)){if(this.handlingChangeSemaphore+=1,this.isFinished(e)){for(const r of this.awaitingHandlers)if(!(!this.shouldHandlerWaitForOther(r,t)||!this.awaitingHandlersTags.has(r.handlerTag))){if(e!==c.END){this.tryActivate(r);continue}r.cancel(),r.state===c.END&&r.sendEvent(c.CANCELLED,c.BEGAN),r.awaiting=!1}}e===c.ACTIVE?this.tryActivate(t):s===c.ACTIVE||s===c.END?t.active?t.sendEvent(e,s):s===c.ACTIVE&&(e===c.CANCELLED||e===c.FAILED)&&t.sendEvent(e,c.BEGAN):(s!==c.UNDETERMINED||e!==c.CANCELLED)&&t.sendEvent(e,s),this.handlingChangeSemaphore-=1,this.scheduleFinishedHandlersCleanup(),this.awaitingHandlers.includes(t)||this.cleanupAwaitingHandlers(t)}}makeActive(t){const e=t.state;t.active=!0,t.shouldResetProgress=!0,t.activationIndex=this.activationIndex++;for(let s=this.gestureHandlers.length-1;s>=0;--s)this.shouldHandlerBeCancelledBy(this.gestureHandlers[s],t)&&this.gestureHandlers[s].cancel();for(const s of this.awaitingHandlers)this.shouldHandlerBeCancelledBy(s,t)&&(s.awaiting=!1);t.sendEvent(c.ACTIVE,c.BEGAN),e!==c.ACTIVE&&(t.sendEvent(c.END,c.ACTIVE),e!==c.END&&t.sendEvent(c.UNDETERMINED,c.END)),t.awaiting&&(t.awaiting=!1,this.awaitingHandlers=this.awaitingHandlers.filter(s=>s!==t))}addAwaitingHandler(t){this.awaitingHandlers.includes(t)||(this.awaitingHandlers.push(t),this.awaitingHandlersTags.add(t.handlerTag),t.awaiting=!0,t.activationIndex=this.activationIndex++)}recordHandlerIfNotPresent(t){this.gestureHandlers.includes(t)||(this.gestureHandlers.push(t),t.active=!1,t.awaiting=!1,t.activationIndex=Number.MAX_SAFE_INTEGER)}shouldHandlerWaitForOther(t,e){return t!==e&&(t.shouldWaitForHandlerFailure(e)||e.shouldRequireToWaitForFailure(t))}canRunSimultaneously(t,e){return t===e||t.shouldRecognizeSimultaneously(e)||e.shouldRecognizeSimultaneously(t)}shouldHandlerBeCancelledBy(t,e){if(this.canRunSimultaneously(t,e))return!1;if(t.awaiting||t.state===c.ACTIVE)return t.shouldBeCancelledByOther(e);const s=t.getTrackedPointersID(),n=e.getTrackedPointersID();return!Pi.shareCommonPointers(s,n)&&t.delegate.view!==e.delegate.view?this.checkOverlap(t,e):!0}checkOverlap(t,e){const s=n=>{const r=t.tracker.getLastAbsoluteCoords(n);return r&&t.delegate.isPointerInBounds(r)&&e.delegate.isPointerInBounds(r)};return t.getTrackedPointersID().some(s)}isFinished(t){return t===c.END||t===c.FAILED||t===c.CANCELLED}cancelMouseAndPenGestures(t){this.gestureHandlers.forEach(e=>{e.pointerType!==y.MOUSE&&e.pointerType!==y.STYLUS||(e!==t?e.cancel():e.tracker.resetTracker())})}static get instance(){return k._instance||(k._instance=new k),k._instance}}class B{constructor(){a(this,"waitForRelations",new Map);a(this,"simultaneousRelations",new Map);a(this,"blocksHandlersRelations",new Map)}configureInteractions(t,e){if(this.dropRelationsForHandlerWithTag(t.handlerTag),e.waitFor){const s=[];e.waitFor.forEach(n=>{typeof n=="number"?s.push(n):s.push(n.handlerTag)}),this.waitForRelations.set(t.handlerTag,s)}if(e.simultaneousHandlers){const s=[];e.simultaneousHandlers.forEach(n=>{typeof n=="number"?s.push(n):s.push(n.handlerTag)}),this.simultaneousRelations.set(t.handlerTag,s)}if(e.blocksHandlers){const s=[];e.blocksHandlers.forEach(n=>{typeof n=="number"?s.push(n):s.push(n.handlerTag)}),this.blocksHandlersRelations.set(t.handlerTag,s)}}shouldWaitForHandlerFailure(t,e){const s=this.waitForRelations.get(t.handlerTag);return(s==null?void 0:s.find(n=>n===e.handlerTag))!==void 0}shouldRecognizeSimultaneously(t,e){const s=this.simultaneousRelations.get(t.handlerTag);return(s==null?void 0:s.find(n=>n===e.handlerTag))!==void 0}shouldRequireHandlerToWaitForFailure(t,e){const s=this.blocksHandlersRelations.get(t.handlerTag);return(s==null?void 0:s.find(n=>n===e.handlerTag))!==void 0}shouldHandlerBeCancelledBy(t,e){var o;const s=e.constructor.name==="NativeViewGestureHandler",n=e.active,r=((o=e.isButton)==null?void 0:o.call(e))===!0;return s&&n&&!r}dropRelationsForHandlerWithTag(t){this.waitForRelations.delete(t),this.simultaneousRelations.delete(t),this.blocksHandlersRelations.delete(t)}reset(){this.waitForRelations.clear(),this.simultaneousRelations.clear(),this.blocksHandlersRelations.clear()}static get instance(){return this._instance||(this._instance=new B),this._instance}}const Ii=["id","enabled","shouldCancelWhenOutside","hitSlop","cancelsTouchesInView","userSelect","activeCursor","mouseButton","enableContextMenu","touchAction"],Ls=["waitFor","simultaneousHandlers","blocksHandlers"],St=[...Ii,...Ls,"onBegan","onFailed","onCancelled","onActivated","onEnded","onGestureEvent","onHandlerStateChange"],Xs=[...Ii,"needsPointerData","manualActivation"];let j=function(i){return i[i.LEFT=1]="LEFT",i[i.RIGHT=2]="RIGHT",i[i.MIDDLE=4]="MIDDLE",i[i.BUTTON_4=8]="BUTTON_4",i[i.BUTTON_5=16]="BUTTON_5",i[i.ALL=31]="ALL",i}({});class U{constructor(t){a(this,"lastSentState",null);a(this,"_state",c.UNDETERMINED);a(this,"_shouldCancelWhenOutside",!1);a(this,"hasCustomActivationCriteria",!1);a(this,"_enabled",!1);a(this,"_config",{enabled:!1});a(this,"_tracker",new Pi);a(this,"_activationIndex",0);a(this,"_awaiting",!1);a(this,"_active",!1);a(this,"_shouldResetProgress",!1);a(this,"_pointerType",y.MOUSE);a(this,"sendEvent",(t,e)=>{const{onGestureHandlerEvent:s,onGestureHandlerStateChange:n}=this.propsRef.current,r=this.transformEventData(t,e);this.lastSentState!==t&&(this.lastSentState=t,gt(n,r)),this.state===c.ACTIVE&&(r.nativeEvent.oldState=void 0,gt(s,r))});this._delegate=t}init(t,e){this.propsRef=e,this.viewRef=t,this.state=c.UNDETERMINED,this.delegate.init(t,this)}attachEventManager(t){t.setOnPointerDown(this.onPointerDown.bind(this)),t.setOnPointerAdd(this.onPointerAdd.bind(this)),t.setOnPointerUp(this.onPointerUp.bind(this)),t.setOnPointerRemove(this.onPointerRemove.bind(this)),t.setOnPointerMove(this.onPointerMove.bind(this)),t.setOnPointerEnter(this.onPointerEnter.bind(this)),t.setOnPointerLeave(this.onPointerLeave.bind(this)),t.setOnPointerCancel(this.onPointerCancel.bind(this)),t.setOnPointerOutOfBounds(this.onPointerOutOfBounds.bind(this)),t.setOnPointerMoveOver(this.onPointerMoveOver.bind(this)),t.setOnPointerMoveOut(this.onPointerMoveOut.bind(this)),t.setOnWheel(this.onWheel.bind(this)),t.registerListeners()}onCancel(){}onReset(){}resetProgress(){}reset(){this.tracker.resetTracker(),this.onReset(),this.resetProgress(),this.delegate.reset(),this.state=c.UNDETERMINED}moveToState(t,e){if(this.state===t)return;const s=this.state;this.state=t,this.tracker.trackedPointersCount>0&&this.config.needsPointerData&&this.isFinished()&&this.cancelTouches(),k.instance.onHandlerStateChange(this,t,s,e),this.onStateChange(t,s),!this.enabled&&this.isFinished()&&(this.state=c.UNDETERMINED)}onStateChange(t,e){}begin(){this.checkHitSlop()&&this.state===c.UNDETERMINED&&this.moveToState(c.BEGAN)}fail(t){(this.state===c.ACTIVE||this.state===c.BEGAN)&&(this.delegate.onFail(),this.moveToState(c.FAILED,t)),this.resetProgress()}cancel(t){(this.state===c.ACTIVE||this.state===c.UNDETERMINED||this.state===c.BEGAN)&&(this.onCancel(),this.delegate.onCancel(),this.moveToState(c.CANCELLED,t))}activate(t=!1){(this.config.manualActivation!==!0||t)&&(this.state===c.UNDETERMINED||this.state===c.BEGAN)&&(this.delegate.onActivate(),this.moveToState(c.ACTIVE))}end(){(this.state===c.BEGAN||this.state===c.ACTIVE)&&(this.delegate.onEnd(),this.moveToState(c.END)),this.resetProgress()}getShouldResetProgress(){return this.shouldResetProgress}setShouldResetProgress(t){this.shouldResetProgress=t}shouldWaitForHandlerFailure(t){return t===this?!1:B.instance.shouldWaitForHandlerFailure(this,t)}shouldRequireToWaitForFailure(t){return t===this?!1:B.instance.shouldRequireHandlerToWaitForFailure(this,t)}shouldRecognizeSimultaneously(t){return t===this?!0:B.instance.shouldRecognizeSimultaneously(this,t)}shouldBeCancelledByOther(t){return t===this?!1:B.instance.shouldHandlerBeCancelledBy(this,t)}onPointerDown(t){k.instance.recordHandlerIfNotPresent(this),this.pointerType=t.pointerType,this.pointerType===y.TOUCH&&k.instance.cancelMouseAndPenGestures(this)}onPointerAdd(t){this.tryToSendTouchEvent(t)}onPointerUp(t){this.tryToSendTouchEvent(t)}onPointerRemove(t){this.tryToSendTouchEvent(t)}onPointerMove(t){this.tryToSendMoveEvent(!1,t)}onPointerLeave(t){if(this.shouldCancelWhenOutside){switch(this.state){case c.ACTIVE:this.cancel();break;case c.BEGAN:this.fail();break}return}this.tryToSendTouchEvent(t)}onPointerEnter(t){this.tryToSendTouchEvent(t)}onPointerCancel(t){this.tryToSendTouchEvent(t),this.cancel(),this.reset()}onPointerOutOfBounds(t){this.tryToSendMoveEvent(!0,t)}onPointerMoveOver(t){}onPointerMoveOut(t){}onWheel(t){}tryToSendMoveEvent(t,e){t&&this.shouldCancelWhenOutside||!this.enabled||(this.active&&this.sendEvent(this.state,this.state),this.tryToSendTouchEvent(e))}tryToSendTouchEvent(t){this.config.needsPointerData&&this.sendTouchEvent(t)}sendTouchEvent(t){if(!this.enabled)return;const{onGestureHandlerEvent:e}=this.propsRef.current,s=this.transformTouchEvent(t);s&&gt(e,s)}transformEventData(t,e){return{nativeEvent:{numberOfPointers:this.tracker.trackedPointersCount,state:t,pointerInside:this.delegate.isPointerInBounds(this.tracker.getAbsoluteCoordsAverage()),...this.transformNativeEvent(),handlerTag:this.handlerTag,target:this.viewRef,oldState:t!==e?e:void 0,pointerType:this.pointerType},timeStamp:Date.now()}}transformTouchEvent(t){const e=this.delegate.measureView(),s=[],n=[],r=this.tracker.trackedPointers;if(r.size===0||!r.has(t.pointerId))return;r.forEach((f,h)=>{const l=this.tracker.getMappedTouchEventId(h);s.push({id:l,x:f.abosoluteCoords.x-e.pageX,y:f.abosoluteCoords.y-e.pageY,absoluteX:f.abosoluteCoords.x,absoluteY:f.abosoluteCoords.y})}),t.eventType!==v.CANCEL?n.push({id:this.tracker.getMappedTouchEventId(t.pointerId),x:t.x-e.pageX,y:t.y-e.pageY,absoluteX:t.x,absoluteY:t.y}):r.forEach((f,h)=>{const l=this.tracker.getMappedTouchEventId(h);n.push({id:l,x:f.abosoluteCoords.x-e.pageX,y:f.abosoluteCoords.y-e.pageY,absoluteX:f.abosoluteCoords.x,absoluteY:f.abosoluteCoords.y})});let o=rt.UNDETERMINED;switch(t.eventType){case v.DOWN:case v.ADDITIONAL_POINTER_DOWN:o=rt.DOWN;break;case v.UP:case v.ADDITIONAL_POINTER_UP:o=rt.UP;break;case v.MOVE:o=rt.MOVE;break;case v.CANCEL:o=rt.CANCELLED;break}let u=s.length;return(t.eventType===v.UP||t.eventType===v.ADDITIONAL_POINTER_UP)&&--u,{nativeEvent:{handlerTag:this.handlerTag,state:this.state,eventType:o,changedTouches:n,allTouches:s,numberOfTouches:u,pointerType:this.pointerType},timeStamp:Date.now()}}cancelTouches(){const t=this.delegate.measureView(),e=[],s=[],n=this.tracker.trackedPointers;if(n.size===0)return;n.forEach((u,f)=>{const h=this.tracker.getMappedTouchEventId(f);e.push({id:h,x:u.abosoluteCoords.x-t.pageX,y:u.abosoluteCoords.y-t.pageY,absoluteX:u.abosoluteCoords.x,absoluteY:u.abosoluteCoords.y}),s.push({id:h,x:u.abosoluteCoords.x-t.pageX,y:u.abosoluteCoords.y-t.pageY,absoluteX:u.abosoluteCoords.x,absoluteY:u.abosoluteCoords.y})});const r={nativeEvent:{handlerTag:this.handlerTag,state:this.state,eventType:rt.CANCELLED,changedTouches:s,allTouches:e,numberOfTouches:e.length,pointerType:this.pointerType},timeStamp:Date.now()},{onGestureHandlerEvent:o}=this.propsRef.current;gt(o,r)}transformNativeEvent(){const t=this.tracker.getAbsoluteCoordsAverage(),e=this.tracker.getRelativeCoordsAverage();return{x:e.x,y:e.y,absoluteX:t.x,absoluteY:t.y}}updateGestureConfig({enabled:t=!0,...e}){if(this._config={enabled:t,...e},this.enabled=t,this.delegate.onEnabledChange(t),this.config.shouldCancelWhenOutside!==void 0&&(this.shouldCancelWhenOutside=this.config.shouldCancelWhenOutside),this.validateHitSlops(),!this.enabled)switch(this.state){case c.ACTIVE:this.fail(!0);break;case c.UNDETERMINED:k.instance.removeHandlerFromOrchestrator(this);break;default:this.cancel(!0);break}}checkCustomActivationCriteria(t){for(const e in this.config)t.indexOf(e)>=0&&(this.hasCustomActivationCriteria=!0)}validateHitSlops(){if(this.config.hitSlop){if(this.config.hitSlop.left!==void 0&&this.config.hitSlop.right!==void 0&&this.config.hitSlop.width!==void 0)throw new Error("HitSlop Error: Cannot define left, right and width at the same time");if(this.config.hitSlop.width!==void 0&&this.config.hitSlop.left===void 0&&this.config.hitSlop.right===void 0)throw new Error("HitSlop Error: When width is defined, either left or right has to be defined");if(this.config.hitSlop.height!==void 0&&this.config.hitSlop.top!==void 0&&this.config.hitSlop.bottom!==void 0)throw new Error("HitSlop Error: Cannot define top, bottom and height at the same time");if(this.config.hitSlop.height!==void 0&&this.config.hitSlop.top===void 0&&this.config.hitSlop.bottom===void 0)throw new Error("HitSlop Error: When height is defined, either top or bottom has to be defined")}}checkHitSlop(){if(!this.config.hitSlop)return!0;const{width:t,height:e}=this.delegate.measureView();let s=0,n=0,r=t,o=e;this.config.hitSlop.horizontal!==void 0&&(s-=this.config.hitSlop.horizontal,r+=this.config.hitSlop.horizontal),this.config.hitSlop.vertical!==void 0&&(n-=this.config.hitSlop.vertical,o+=this.config.hitSlop.vertical),this.config.hitSlop.left!==void 0&&(s=-this.config.hitSlop.left),this.config.hitSlop.right!==void 0&&(r=t+this.config.hitSlop.right),this.config.hitSlop.top!==void 0&&(n=-this.config.hitSlop.top),this.config.hitSlop.bottom!==void 0&&(o=t+this.config.hitSlop.bottom),this.config.hitSlop.width!==void 0&&(this.config.hitSlop.left!==void 0?r=s+this.config.hitSlop.width:this.config.hitSlop.right!==void 0&&(s=r-this.config.hitSlop.width)),this.config.hitSlop.height!==void 0&&(this.config.hitSlop.top!==void 0?o=n+this.config.hitSlop.height:this.config.hitSlop.bottom!==void 0&&(n=o-this.config.hitSlop.height));const u=this.delegate.measureView(),f=this.tracker.getLastAbsoluteCoords();if(!f)return!1;const h=f.x-u.pageX,l=f.y-u.pageY;return h>=s&&h<=r&&l>=n&&l<=o}isButtonInConfig(t){return!t||!this.config.mouseButton&&t===j.LEFT||this.config.mouseButton&&t&this.config.mouseButton}resetConfig(){}onDestroy(){this.delegate.destroy(this.config)}get handlerTag(){return this._handlerTag}set handlerTag(t){this._handlerTag=t}get config(){return this._config}get delegate(){return this._delegate}get tracker(){return this._tracker}get state(){return this._state}set state(t){this._state=t}get shouldCancelWhenOutside(){return this._shouldCancelWhenOutside}set shouldCancelWhenOutside(t){this._shouldCancelWhenOutside=t}get enabled(){return this._enabled}set enabled(t){this._enabled=t}get pointerType(){return this._pointerType}set pointerType(t){this._pointerType=t}get active(){return this._active}set active(t){this._active=t}get awaiting(){return this._awaiting}set awaiting(t){this._awaiting=t}get activationIndex(){return this._activationIndex}set activationIndex(t){this._activationIndex=t}get shouldResetProgress(){return this._shouldResetProgress}set shouldResetProgress(t){this._shouldResetProgress=t}getTrackedPointersID(){return this.tracker.trackedPointersIDs}isFinished(){return this.state===c.END||this.state===c.FAILED||this.state===c.CANCELLED}}function gt(i,t){if(!i)return;if(typeof i=="function"){i(t);return}if("__getHandler"in i&&typeof i.__getHandler=="function"){const s=i.__getHandler();gt(s,t);return}if(!("__nodeConfig"in i))return;const{argMapping:e}=i.__nodeConfig;if(Array.isArray(e))for(const[s,[n,r]]of e.entries()){if(!(n in t.nativeEvent))continue;const o=t.nativeEvent[n];r!=null&&r.setValue?r.setValue(o):i.__nodeConfig.argMapping[s]=[n,o]}}const We=1,Be=10,re=lt*lt;class Gs extends U{constructor(){super(...arguments);a(this,"customActivationProperties",["activeOffsetXStart","activeOffsetXEnd","failOffsetXStart","failOffsetXEnd","activeOffsetYStart","activeOffsetYEnd","failOffsetYStart","failOffsetYEnd","minVelocityX","minVelocityY","minVelocity"]);a(this,"velocityX",0);a(this,"velocityY",0);a(this,"minDistSq",re);a(this,"activeOffsetXStart",-Number.MAX_SAFE_INTEGER);a(this,"activeOffsetXEnd",Number.MIN_SAFE_INTEGER);a(this,"failOffsetXStart",Number.MIN_SAFE_INTEGER);a(this,"failOffsetXEnd",Number.MAX_SAFE_INTEGER);a(this,"activeOffsetYStart",Number.MAX_SAFE_INTEGER);a(this,"activeOffsetYEnd",Number.MIN_SAFE_INTEGER);a(this,"failOffsetYStart",Number.MIN_SAFE_INTEGER);a(this,"failOffsetYEnd",Number.MAX_SAFE_INTEGER);a(this,"minVelocityX",Number.MAX_SAFE_INTEGER);a(this,"minVelocityY",Number.MAX_SAFE_INTEGER);a(this,"minVelocitySq",Number.MAX_SAFE_INTEGER);a(this,"minPointers",We);a(this,"maxPointers",Be);a(this,"startX",0);a(this,"startY",0);a(this,"offsetX",0);a(this,"offsetY",0);a(this,"lastX",0);a(this,"lastY",0);a(this,"activateAfterLongPress",0);a(this,"activationTimeout",0);a(this,"enableTrackpadTwoFingerGesture",!1);a(this,"endWheelTimeout",0);a(this,"wheelDevice",ot.UNDETERMINED)}updateGestureConfig({enabled:e=!0,...s}){this.resetConfig(),super.updateGestureConfig({enabled:e,...s}),this.checkCustomActivationCriteria(this.customActivationProperties),this.config.minDist!==void 0?this.minDistSq=this.config.minDist*this.config.minDist:this.hasCustomActivationCriteria&&(this.minDistSq=Number.MAX_SAFE_INTEGER),this.config.minPointers!==void 0&&(this.minPointers=this.config.minPointers),this.config.maxPointers!==void 0&&(this.maxPointers=this.config.maxPointers),this.config.minVelocity!==void 0&&(this.minVelocityX=this.config.minVelocity,this.minVelocityY=this.config.minVelocity),this.config.minVelocityX!==void 0&&(this.minVelocityX=this.config.minVelocityX),this.config.minVelocityY!==void 0&&(this.minVelocityY=this.config.minVelocityY),this.config.activateAfterLongPress!==void 0&&(this.activateAfterLongPress=this.config.activateAfterLongPress),this.config.activeOffsetXStart!==void 0&&(this.activeOffsetXStart=this.config.activeOffsetXStart,this.config.activeOffsetXEnd===void 0&&(this.activeOffsetXEnd=Number.MAX_SAFE_INTEGER)),this.config.activeOffsetXEnd!==void 0&&(this.activeOffsetXEnd=this.config.activeOffsetXEnd,this.config.activeOffsetXStart===void 0&&(this.activeOffsetXStart=Number.MIN_SAFE_INTEGER)),this.config.failOffsetXStart!==void 0&&(this.failOffsetXStart=this.config.failOffsetXStart,this.config.failOffsetXEnd===void 0&&(this.failOffsetXEnd=Number.MAX_SAFE_INTEGER)),this.config.failOffsetXEnd!==void 0&&(this.failOffsetXEnd=this.config.failOffsetXEnd,this.config.failOffsetXStart===void 0&&(this.failOffsetXStart=Number.MIN_SAFE_INTEGER)),this.config.activeOffsetYStart!==void 0&&(this.activeOffsetYStart=this.config.activeOffsetYStart,this.config.activeOffsetYEnd===void 0&&(this.activeOffsetYEnd=Number.MAX_SAFE_INTEGER)),this.config.activeOffsetYEnd!==void 0&&(this.activeOffsetYEnd=this.config.activeOffsetYEnd,this.config.activeOffsetYStart===void 0&&(this.activeOffsetYStart=Number.MIN_SAFE_INTEGER)),this.config.failOffsetYStart!==void 0&&(this.failOffsetYStart=this.config.failOffsetYStart,this.config.failOffsetYEnd===void 0&&(this.failOffsetYEnd=Number.MAX_SAFE_INTEGER)),this.config.failOffsetYEnd!==void 0&&(this.failOffsetYEnd=this.config.failOffsetYEnd,this.config.failOffsetYStart===void 0&&(this.failOffsetYStart=Number.MIN_SAFE_INTEGER)),this.config.enableTrackpadTwoFingerGesture!==void 0&&(this.enableTrackpadTwoFingerGesture=this.config.enableTrackpadTwoFingerGesture)}resetConfig(){super.resetConfig(),this.activeOffsetXStart=-Number.MAX_SAFE_INTEGER,this.activeOffsetXEnd=Number.MIN_SAFE_INTEGER,this.failOffsetXStart=Number.MIN_SAFE_INTEGER,this.failOffsetXEnd=Number.MAX_SAFE_INTEGER,this.activeOffsetYStart=Number.MAX_SAFE_INTEGER,this.activeOffsetYEnd=Number.MIN_SAFE_INTEGER,this.failOffsetYStart=Number.MIN_SAFE_INTEGER,this.failOffsetYEnd=Number.MAX_SAFE_INTEGER,this.minVelocityX=Number.MAX_SAFE_INTEGER,this.minVelocityY=Number.MAX_SAFE_INTEGER,this.minVelocitySq=Number.MAX_SAFE_INTEGER,this.minDistSq=re,this.minPointers=We,this.maxPointers=Be,this.activateAfterLongPress=0}transformNativeEvent(){const e=this.getTranslationX(),s=this.getTranslationY();return{...super.transformNativeEvent(),translationX:isNaN(e)?0:e,translationY:isNaN(s)?0:s,velocityX:this.velocityX,velocityY:this.velocityY,stylusData:this.stylusData}}getTranslationX(){return this.lastX-this.startX+this.offsetX}getTranslationY(){return this.lastY-this.startY+this.offsetY}clearActivationTimeout(){clearTimeout(this.activationTimeout)}updateLastCoords(){const{x:e,y:s}=this.tracker.getAbsoluteCoordsAverage();this.lastX=e,this.lastY=s}updateVelocity(e){const s=this.tracker.getVelocity(e);this.velocityX=(s==null?void 0:s.x)??0,this.velocityY=(s==null?void 0:s.y)??0}onPointerDown(e){this.isButtonInConfig(e.button)&&(this.tracker.addToTracker(e),this.stylusData=e.stylusData,super.onPointerDown(e),this.updateLastCoords(),this.startX=this.lastX,this.startY=this.lastY,this.tryBegin(e),this.checkBegan(),this.tryToSendTouchEvent(e))}onPointerAdd(e){this.tracker.addToTracker(e),super.onPointerAdd(e),this.tryBegin(e),this.offsetX+=this.lastX-this.startX,this.offsetY+=this.lastY-this.startY,this.updateLastCoords(),this.startX=this.lastX,this.startY=this.lastY,this.tracker.trackedPointersCount>this.maxPointers?this.state===c.ACTIVE?this.cancel():this.fail():this.checkBegan()}onPointerUp(e){if(this.stylusData=e.stylusData,super.onPointerUp(e),this.state===c.ACTIVE){const s=this.tracker.getAbsoluteCoordsAverage();this.lastX=s.x,this.lastY=s.y}this.tracker.removeFromTracker(e.pointerId),this.tracker.trackedPointersCount===0&&this.clearActivationTimeout(),this.state===c.ACTIVE?this.end():(this.resetProgress(),this.fail())}onPointerRemove(e){super.onPointerRemove(e),this.tracker.removeFromTracker(e.pointerId),this.offsetX+=this.lastX-this.startX,this.offsetY+=this.lastY-this.startY,this.updateLastCoords(),this.startX=this.lastX,this.startY=this.lastY,this.state===c.ACTIVE&&this.tracker.trackedPointersCount<this.minPointers||this.checkBegan()}onPointerMove(e){this.tracker.track(e),this.stylusData=e.stylusData,this.updateLastCoords(),this.updateVelocity(e.pointerId),this.checkBegan(),super.onPointerMove(e)}onPointerOutOfBounds(e){this.shouldCancelWhenOutside||(this.tracker.track(e),this.stylusData=e.stylusData,this.updateLastCoords(),this.updateVelocity(e.pointerId),this.checkBegan(),this.state===c.ACTIVE&&super.onPointerOutOfBounds(e))}scheduleWheelEnd(e){clearTimeout(this.endWheelTimeout),this.endWheelTimeout=setTimeout(()=>{this.state===c.ACTIVE&&(this.end(),this.tracker.removeFromTracker(e.pointerId),this.state=c.UNDETERMINED),this.wheelDevice=ot.UNDETERMINED},30)}onWheel(e){if(!(this.wheelDevice===ot.MOUSE||!this.enableTrackpadTwoFingerGesture)){if(this.state===c.UNDETERMINED){if(this.wheelDevice=e.wheelDeltaY%120!==0?ot.TOUCHPAD:ot.MOUSE,this.wheelDevice===ot.MOUSE){this.scheduleWheelEnd(e);return}this.tracker.addToTracker(e),this.updateLastCoords(),this.startX=this.lastX,this.startY=this.lastY,this.begin(),this.activate()}this.tracker.track(e),this.updateLastCoords(),this.updateVelocity(e.pointerId),this.tryToSendMoveEvent(!1,e),this.scheduleWheelEnd(e)}}shouldActivate(){const e=this.getTranslationX();if(this.activeOffsetXStart!==Number.MAX_SAFE_INTEGER&&e<this.activeOffsetXStart||this.activeOffsetXEnd!==Number.MIN_SAFE_INTEGER&&e>this.activeOffsetXEnd)return!0;const s=this.getTranslationY();if(this.activeOffsetYStart!==Number.MAX_SAFE_INTEGER&&s<this.activeOffsetYStart||this.activeOffsetYEnd!==Number.MIN_SAFE_INTEGER&&s>this.activeOffsetYEnd)return!0;const n=e*e+s*s;if(this.minDistSq!==Number.MAX_SAFE_INTEGER&&n>=this.minDistSq)return!0;const r=this.velocityX;if(this.minVelocityX!==Number.MAX_SAFE_INTEGER&&(this.minVelocityX<0&&r<=this.minVelocityX||this.minVelocityX>=0&&this.minVelocityX<=r))return!0;const o=this.velocityY;if(this.minVelocityY!==Number.MAX_SAFE_INTEGER&&(this.minVelocityY<0&&o<=this.minVelocityY||this.minVelocityY>=0&&this.minVelocityY<=o))return!0;const u=r*r+o*o;return this.minVelocitySq!==Number.MAX_SAFE_INTEGER&&u>=this.minVelocitySq}shouldFail(){const e=this.getTranslationX(),s=this.getTranslationY(),n=e*e+s*s;return this.activateAfterLongPress>0&&n>re?(this.clearActivationTimeout(),!0):this.failOffsetXStart!==Number.MIN_SAFE_INTEGER&&e<this.failOffsetXStart||this.failOffsetXEnd!==Number.MAX_SAFE_INTEGER&&e>this.failOffsetXEnd||this.failOffsetYStart!==Number.MIN_SAFE_INTEGER&&s<this.failOffsetYStart?!0:this.failOffsetYEnd!==Number.MAX_SAFE_INTEGER&&s>this.failOffsetYEnd}tryBegin(e){this.state===c.UNDETERMINED&&this.tracker.trackedPointersCount>=this.minPointers?(this.resetProgress(),this.offsetX=0,this.offsetY=0,this.velocityX=0,this.velocityY=0,this.begin(),this.activateAfterLongPress>0&&(this.activationTimeout=setTimeout(()=>{this.activate()},this.activateAfterLongPress))):this.updateVelocity(e.pointerId)}checkBegan(){this.state===c.BEGAN&&(this.shouldFail()?this.fail():this.shouldActivate()&&this.activate())}activate(e=!1){this.state!==c.ACTIVE&&this.resetProgress(),super.activate(e)}onCancel(){this.clearActivationTimeout()}onReset(){this.clearActivationTimeout()}resetProgress(){this.state!==c.ACTIVE&&(this.startX=this.lastX,this.startY=this.lastY)}}const qe=500,ze=500,$e=1,je=1;class Fs extends U{constructor(){super(...arguments);a(this,"maxDeltaX",Number.MIN_SAFE_INTEGER);a(this,"maxDeltaY",Number.MIN_SAFE_INTEGER);a(this,"maxDistSq",Number.MIN_SAFE_INTEGER);a(this,"maxDurationMs",qe);a(this,"maxDelayMs",ze);a(this,"numberOfTaps",$e);a(this,"minNumberOfPointers",je);a(this,"currentMaxNumberOfPointers",1);a(this,"startX",0);a(this,"startY",0);a(this,"offsetX",0);a(this,"offsetY",0);a(this,"lastX",0);a(this,"lastY",0);a(this,"tapsSoFar",0)}updateGestureConfig({enabled:e=!0,...s}){super.updateGestureConfig({enabled:e,...s}),this.config.numberOfTaps!==void 0&&(this.numberOfTaps=this.config.numberOfTaps),this.config.maxDurationMs!==void 0&&(this.maxDurationMs=this.config.maxDurationMs),this.config.maxDelayMs!==void 0&&(this.maxDelayMs=this.config.maxDelayMs),this.config.maxDeltaX!==void 0&&(this.maxDeltaX=this.config.maxDeltaX),this.config.maxDeltaY!==void 0&&(this.maxDeltaY=this.config.maxDeltaY),this.config.maxDist!==void 0&&(this.maxDistSq=this.config.maxDist*this.config.maxDist),this.config.minPointers!==void 0&&(this.minNumberOfPointers=this.config.minPointers)}resetConfig(){super.resetConfig(),this.maxDeltaX=Number.MIN_SAFE_INTEGER,this.maxDeltaY=Number.MIN_SAFE_INTEGER,this.maxDistSq=Number.MIN_SAFE_INTEGER,this.maxDurationMs=qe,this.maxDelayMs=ze,this.numberOfTaps=$e,this.minNumberOfPointers=je}clearTimeouts(){clearTimeout(this.waitTimeout),clearTimeout(this.delayTimeout)}startTap(){this.clearTimeouts(),this.waitTimeout=setTimeout(()=>this.fail(),this.maxDurationMs)}endTap(){this.clearTimeouts(),++this.tapsSoFar===this.numberOfTaps&&this.currentMaxNumberOfPointers>=this.minNumberOfPointers?this.activate():this.delayTimeout=setTimeout(()=>this.fail(),this.maxDelayMs)}updateLastCoords(){const{x:e,y:s}=this.tracker.getAbsoluteCoordsAverage();this.lastX=e,this.lastY=s}onPointerDown(e){this.isButtonInConfig(e.button)&&(this.tracker.addToTracker(e),super.onPointerDown(e),this.trySettingPosition(e),this.startX=e.x,this.startY=e.y,this.lastX=e.x,this.lastY=e.y,this.updateState(e),this.tryToSendTouchEvent(e))}onPointerAdd(e){super.onPointerAdd(e),this.tracker.addToTracker(e),this.trySettingPosition(e),this.offsetX+=this.lastX-this.startX,this.offsetY+=this.lastY-this.startY,this.updateLastCoords(),this.startX=this.lastX,this.startY=this.lastY,this.updateState(e)}onPointerUp(e){super.onPointerUp(e),this.updateLastCoords(),this.tracker.removeFromTracker(e.pointerId),this.updateState(e)}onPointerRemove(e){super.onPointerRemove(e),this.tracker.removeFromTracker(e.pointerId),this.offsetX+=this.lastX-this.startX,this.offsetY+=this.lastY=this.startY,this.updateLastCoords(),this.startX=this.lastX,this.startY=this.lastY,this.updateState(e)}onPointerMove(e){this.trySettingPosition(e),this.tracker.track(e),this.updateLastCoords(),this.updateState(e),super.onPointerMove(e)}onPointerOutOfBounds(e){this.trySettingPosition(e),this.tracker.track(e),this.updateLastCoords(),this.updateState(e),super.onPointerOutOfBounds(e)}updateState(e){if(this.currentMaxNumberOfPointers<this.tracker.trackedPointersCount&&(this.currentMaxNumberOfPointers=this.tracker.trackedPointersCount),this.shouldFail()){this.fail();return}switch(this.state){case c.UNDETERMINED:e.eventType===v.DOWN&&this.begin(),this.startTap();break;case c.BEGAN:e.eventType===v.UP&&this.endTap(),e.eventType===v.DOWN&&this.startTap();break}}trySettingPosition(e){this.state===c.UNDETERMINED&&(this.offsetX=0,this.offsetY=0,this.startX=e.x,this.startY=e.y)}shouldFail(){const e=this.lastX-this.startX+this.offsetX;if(this.maxDeltaX!==Number.MIN_SAFE_INTEGER&&Math.abs(e)>this.maxDeltaX)return!0;const s=this.lastY-this.startY+this.offsetY;if(this.maxDeltaY!==Number.MIN_SAFE_INTEGER&&Math.abs(s)>this.maxDeltaY)return!0;const n=s*s+e*e;return this.maxDistSq!==Number.MIN_SAFE_INTEGER&&n>this.maxDistSq}activate(){super.activate(),this.end()}onCancel(){this.resetProgress(),this.clearTimeouts()}resetProgress(){this.clearTimeouts(),this.tapsSoFar=0,this.currentMaxNumberOfPointers=0}}const Je=500,Ys=10,Us=10;class Vs extends U{constructor(){super(...arguments);a(this,"minDurationMs",Je);a(this,"defaultMaxDistSq",Ys*Us);a(this,"maxDistSq",this.defaultMaxDistSq);a(this,"numberOfPointers",1);a(this,"startX",0);a(this,"startY",0);a(this,"startTime",0);a(this,"previousTime",0)}init(e,s){this.config.enableContextMenu===void 0&&(this.config.enableContextMenu=!1),super.init(e,s)}transformNativeEvent(){return{...super.transformNativeEvent(),duration:Date.now()-this.startTime}}updateGestureConfig({enabled:e=!0,...s}){super.updateGestureConfig({enabled:e,...s}),this.config.minDurationMs!==void 0&&(this.minDurationMs=this.config.minDurationMs),this.config.maxDist!==void 0&&(this.maxDistSq=this.config.maxDist*this.config.maxDist),this.config.numberOfPointers!==void 0&&(this.numberOfPointers=this.config.numberOfPointers)}resetConfig(){super.resetConfig(),this.minDurationMs=Je,this.maxDistSq=this.defaultMaxDistSq}onStateChange(e,s){clearTimeout(this.activationTimeout)}onPointerDown(e){this.isButtonInConfig(e.button)&&(this.tracker.addToTracker(e),super.onPointerDown(e),this.startX=e.x,this.startY=e.y,this.tryBegin(),this.tryActivate(),this.tryToSendTouchEvent(e))}onPointerAdd(e){if(super.onPointerAdd(e),this.tracker.addToTracker(e),this.tracker.trackedPointersCount>this.numberOfPointers){this.fail();return}const s=this.tracker.getAbsoluteCoordsAverage();this.startX=s.x,this.startY=s.y,this.tryActivate()}onPointerMove(e){super.onPointerMove(e),this.tracker.track(e),this.checkDistanceFail()}onPointerOutOfBounds(e){super.onPointerOutOfBounds(e),this.tracker.track(e),this.checkDistanceFail()}onPointerUp(e){super.onPointerUp(e),this.tracker.removeFromTracker(e.pointerId),this.state===c.ACTIVE?this.end():this.fail()}onPointerRemove(e){super.onPointerRemove(e),this.tracker.removeFromTracker(e.pointerId),this.tracker.trackedPointersCount<this.numberOfPointers&&this.state!==c.ACTIVE&&this.fail()}tryBegin(){this.state===c.UNDETERMINED&&(this.previousTime=Date.now(),this.startTime=this.previousTime,this.begin())}tryActivate(){this.tracker.trackedPointersCount===this.numberOfPointers&&(this.minDurationMs>0?this.activationTimeout=setTimeout(()=>{this.activate()},this.minDurationMs):this.minDurationMs===0&&this.activate())}checkDistanceFail(){const e=this.tracker.getAbsoluteCoordsAverage(),s=e.x-this.startX,n=e.y-this.startY;s*s+n*n<=this.maxDistSq||(this.state===c.ACTIVE?this.cancel():this.fail())}}class Ws{constructor(t){a(this,"inProgress",!1);this.onScaleBegin=t.onScaleBegin,this.onScale=t.onScale,this.onScaleEnd=t.onScaleEnd,this.spanSlop=lt*2,this.minSpan=0}onTouchEvent(t,e){this.currentTime=t.time;const s=t.eventType,n=e.trackedPointersCount,r=s===v.UP||s===v.ADDITIONAL_POINTER_UP||s===v.CANCEL;if((s===v.DOWN||r)&&(this.inProgress&&(this.onScaleEnd(this),this.inProgress=!1,this.initialSpan=0),r))return!0;const o=s===v.DOWN||s===v.ADDITIONAL_POINTER_UP||s===v.ADDITIONAL_POINTER_DOWN,u=s===v.ADDITIONAL_POINTER_UP,f=u?t.pointerId:void 0,h=u?n-1:n,l=e.getAbsoluteCoordsSum(),d=l.x/h,p=l.y/h;let E=0,g=0;e.trackedPointers.forEach((vt,Ht)=>{Ht!==f&&(E+=Math.abs(vt.abosoluteCoords.x-d),g+=Math.abs(vt.abosoluteCoords.y-p))});const _=E/h,P=g/h,L=_*2,$=P*2,b=Math.hypot(L,$),nt=this.inProgress;return this._focusX=d,this._focusY=p,this.inProgress&&(b<this.minSpan||o)&&(this.onScaleEnd(this),this.inProgress=!1,this.initialSpan=b),o&&(this.initialSpan=this.prevSpan=this._currentSpan=b),!this.inProgress&&b>=this.minSpan&&(nt||Math.abs(b-this.initialSpan)>this.spanSlop)&&(this.prevSpan=this._currentSpan=b,this.prevTime=this.currentTime,this.inProgress=this.onScaleBegin(this)),s!==v.MOVE||(this._currentSpan=b,this.inProgress&&!this.onScale(this))||(this.prevSpan=this.currentSpan,this.prevTime=this.currentTime),!0}calculateScaleFactor(t){return t<2?1:this.prevSpan>0?this.currentSpan/this.prevSpan:1}get currentSpan(){return this._currentSpan}get focusX(){return this._focusX}get focusY(){return this._focusY}get timeDelta(){return this.currentTime-this.prevTime}}class Bs extends U{constructor(){super(...arguments);a(this,"scale",1);a(this,"velocity",0);a(this,"startingSpan",0);a(this,"spanSlop",lt);a(this,"scaleDetectorListener",{onScaleBegin:e=>(this.startingSpan=e.currentSpan,!0),onScale:e=>{const s=this.scale;this.scale*=e.calculateScaleFactor(this.tracker.trackedPointersCount);const n=e.timeDelta;return n>0&&(this.velocity=(this.scale-s)/n),Math.abs(this.startingSpan-e.currentSpan)>=this.spanSlop&&this.state===c.BEGAN&&this.activate(),!0},onScaleEnd:e=>{}});a(this,"scaleGestureDetector",new Ws(this.scaleDetectorListener))}init(e,s){super.init(e,s),this.shouldCancelWhenOutside=!1}transformNativeEvent(){return{focalX:this.scaleGestureDetector.focusX,focalY:this.scaleGestureDetector.focusY,velocity:this.velocity,scale:this.scale}}onPointerDown(e){this.tracker.addToTracker(e),super.onPointerDown(e),this.tryToSendTouchEvent(e)}onPointerAdd(e){this.tracker.addToTracker(e),super.onPointerAdd(e),this.tryBegin(),this.scaleGestureDetector.onTouchEvent(e,this.tracker)}onPointerUp(e){super.onPointerUp(e),this.tracker.removeFromTracker(e.pointerId),this.state===c.ACTIVE&&(this.scaleGestureDetector.onTouchEvent(e,this.tracker),this.state===c.ACTIVE?this.end():this.fail())}onPointerRemove(e){super.onPointerRemove(e),this.scaleGestureDetector.onTouchEvent(e,this.tracker),this.tracker.removeFromTracker(e.pointerId),this.state===c.ACTIVE&&this.tracker.trackedPointersCount<2&&this.end()}onPointerMove(e){this.tracker.trackedPointersCount<2||(this.tracker.track(e),this.scaleGestureDetector.onTouchEvent(e,this.tracker),super.onPointerMove(e))}onPointerOutOfBounds(e){this.tracker.trackedPointersCount<2||(this.tracker.track(e),this.scaleGestureDetector.onTouchEvent(e,this.tracker),super.onPointerOutOfBounds(e))}tryBegin(){this.state===c.UNDETERMINED&&(this.resetProgress(),this.begin())}activate(e){this.state!==c.ACTIVE&&this.resetProgress(),super.activate(e)}onReset(){this.resetProgress()}resetProgress(){this.state!==c.ACTIVE&&(this.velocity=0,this.scale=1)}}class qs{constructor(t){a(this,"currentTime",0);a(this,"previousTime",0);a(this,"previousAngle",0);a(this,"_rotation",0);a(this,"_anchorX",0);a(this,"_anchorY",0);a(this,"isInProgress",!1);a(this,"keyPointers",[NaN,NaN]);this.onRotationBegin=t.onRotationBegin,this.onRotation=t.onRotation,this.onRotationEnd=t.onRotationEnd}updateCurrent(t,e){this.previousTime=this.currentTime,this.currentTime=t.time;const[s,n]=this.keyPointers,r=e.getLastAbsoluteCoords(s),o=e.getLastAbsoluteCoords(n);if(!r||!o)return;const u=o.x-r.x,f=o.y-r.y;this._anchorX=(r.x+o.x)/2,this._anchorY=(r.y+o.y)/2;const h=-Math.atan2(f,u);this._rotation=Number.isNaN(this.previousAngle)?0:this.previousAngle-h,this.previousAngle=h,this.rotation>Math.PI?this._rotation-=Math.PI:this.rotation<-Math.PI&&(this._rotation+=Math.PI),this.rotation>Math.PI/2?this._rotation-=Math.PI:this.rotation<-Math.PI/2&&(this._rotation+=Math.PI)}finish(){this.isInProgress&&(this.isInProgress=!1,this.keyPointers=[NaN,NaN],this.onRotationEnd(this))}setKeyPointers(t){if(this.keyPointers[0]&&this.keyPointers[1])return;const e=t.trackedPointers.keys();this.keyPointers[0]=e.next().value,this.keyPointers[1]=e.next().value}onTouchEvent(t,e){switch(t.eventType){case v.DOWN:this.isInProgress=!1;break;case v.ADDITIONAL_POINTER_DOWN:if(this.isInProgress)break;this.isInProgress=!0,this.previousTime=t.time,this.previousAngle=NaN,this.setKeyPointers(e),this.updateCurrent(t,e),this.onRotationBegin(this);break;case v.MOVE:if(!this.isInProgress)break;this.updateCurrent(t,e),this.onRotation(this);break;case v.ADDITIONAL_POINTER_UP:if(!this.isInProgress)break;this.keyPointers.indexOf(t.pointerId)>=0&&this.finish();break;case v.UP:this.isInProgress&&this.finish();break}return!0}reset(){this.keyPointers=[NaN,NaN],this.isInProgress=!1}get anchorX(){return this._anchorX}get anchorY(){return this._anchorY}get rotation(){return this._rotation}get timeDelta(){return this.currentTime+this.previousTime}}const zs=Math.PI/36;class $s extends U{constructor(){super(...arguments);a(this,"rotation",0);a(this,"velocity",0);a(this,"cachedAnchorX",0);a(this,"cachedAnchorY",0);a(this,"rotationGestureListener",{onRotationBegin:e=>!0,onRotation:e=>{const s=this.rotation;this.rotation+=e.rotation;const n=e.timeDelta;return n>0&&(this.velocity=(this.rotation-s)/n),Math.abs(this.rotation)>=zs&&this.state===c.BEGAN&&this.activate(),!0},onRotationEnd:e=>{this.end()}});a(this,"rotationGestureDetector",new qs(this.rotationGestureListener))}init(e,s){super.init(e,s),this.shouldCancelWhenOutside=!1}transformNativeEvent(){return{rotation:this.rotation?this.rotation:0,anchorX:this.getAnchorX(),anchorY:this.getAnchorY(),velocity:this.velocity?this.velocity:0}}getAnchorX(){const e=this.rotationGestureDetector.anchorX;return e||this.cachedAnchorX}getAnchorY(){const e=this.rotationGestureDetector.anchorY;return e||this.cachedAnchorY}onPointerDown(e){this.tracker.addToTracker(e),super.onPointerDown(e),this.tryToSendTouchEvent(e)}onPointerAdd(e){this.tracker.addToTracker(e),super.onPointerAdd(e),this.tryBegin(),this.rotationGestureDetector.onTouchEvent(e,this.tracker)}onPointerMove(e){this.tracker.trackedPointersCount<2||(this.getAnchorX()&&(this.cachedAnchorX=this.getAnchorX()),this.getAnchorY()&&(this.cachedAnchorY=this.getAnchorY()),this.tracker.track(e),this.rotationGestureDetector.onTouchEvent(e,this.tracker),super.onPointerMove(e))}onPointerOutOfBounds(e){this.tracker.trackedPointersCount<2||(this.getAnchorX()&&(this.cachedAnchorX=this.getAnchorX()),this.getAnchorY()&&(this.cachedAnchorY=this.getAnchorY()),this.tracker.track(e),this.rotationGestureDetector.onTouchEvent(e,this.tracker),super.onPointerOutOfBounds(e))}onPointerUp(e){super.onPointerUp(e),this.tracker.removeFromTracker(e.pointerId),this.rotationGestureDetector.onTouchEvent(e,this.tracker),this.state===c.ACTIVE&&(this.state===c.ACTIVE?this.end():this.fail())}onPointerRemove(e){super.onPointerRemove(e),this.rotationGestureDetector.onTouchEvent(e,this.tracker),this.tracker.removeFromTracker(e.pointerId)}tryBegin(){this.state===c.UNDETERMINED&&this.begin()}onReset(){this.state!==c.ACTIVE&&(this.rotation=0,this.velocity=0,this.rotationGestureDetector.reset())}}const de=1,pe=2,ve=4,Ee=8,at={RIGHT:de,LEFT:pe,UP:ve,DOWN:Ee},Tt={UP_RIGHT:ve|de,DOWN_RIGHT:Ee|de,UP_LEFT:ve|pe,DOWN_LEFT:Ee|pe};class C{constructor(t,e){this.x=t,this.y=e,this._magnitude=Math.hypot(this.x,this.y);const s=this._magnitude>bs;this.unitX=s?this.x/this._magnitude:0,this.unitY=s?this.y/this._magnitude:0}static fromDirection(t){return js.get(t)??new C(0,0)}static fromVelocity(t,e){const s=t.getVelocity(e);return s?new C(s.x,s.y):null}get magnitude(){return this._magnitude}computeSimilarity(t){return this.unitX*t.unitX+this.unitY*t.unitY}isSimilar(t,e){return this.computeSimilarity(t)>e}}const js=new Map([[at.LEFT,new C(-1,0)],[at.RIGHT,new C(1,0)],[at.UP,new C(0,-1)],[at.DOWN,new C(0,1)],[Tt.UP_RIGHT,new C(1,-1)],[Tt.DOWN_RIGHT,new C(1,1)],[Tt.UP_LEFT,new C(-1,-1)],[Tt.DOWN_LEFT,new C(-1,1)]]);function ge(i,{x:t,y:e}){const s=i.getBoundingClientRect();return t>=s.left&&t<=s.right&&e>=s.top&&e<=s.bottom}const Ni=new Map([["mouse",y.MOUSE],["touch",y.TOUCH],["pen",y.STYLUS],["none",y.OTHER]]),Js=i=>i*Math.PI/180,Oi=i=>Math.cos(Js(i/2));function Ks(i){var n;const t=getComputedStyle(i),e={scaleX:1,scaleY:1};if(t.scale!==void 0&&t.scale!=="none"){const r=t.scale.split(" ");r[0]&&(e.scaleX=parseFloat(r[0])),e.scaleY=r[1]?parseFloat(r[1]):parseFloat(r[0])}const s=(n=new RegExp(/matrix\((.+)\)/).exec(t.transform))==null?void 0:n[1];if(s){const r=s.split(", ");e.scaleX*=parseFloat(r[0]),e.scaleY*=parseFloat(r[3])}return e}function Zs(i){if(Ni.get(i.pointerType)!==y.STYLUS)return;const e=i.azimuthAngle,s=i.altitudeAngle;if(i.tiltX===0&&i.tiltY===0){if(e===void 0||s===void 0)return{tiltX:0,tiltY:0,azimuthAngle:Math.PI/2,altitudeAngle:Math.PI/2,pressure:i.pressure};const{tiltX:o,tiltY:u}=tn(s,e);return{tiltX:o,tiltY:u,azimuthAngle:e,altitudeAngle:s,pressure:i.pressure}}const{altitudeAngle:n,azimuthAngle:r}=Qs(i.tiltX,i.tiltY);return{tiltX:i.tiltX,tiltY:i.tiltY,azimuthAngle:r,altitudeAngle:n,pressure:i.pressure}}function Qs(i,t){const e=i*Math.PI/180,s=t*Math.PI/180;let n=0;if(i===0)t>0?n=Math.PI/2:t<0&&(n=3*Math.PI/2);else if(t===0)i<0&&(n=Math.PI);else if(Math.abs(i)===90||Math.abs(t)===90)n=0;else{const o=Math.tan(e),u=Math.tan(s);n=Math.atan2(u,o),n<0&&(n+=2*Math.PI)}let r=0;return Math.abs(i)===90||Math.abs(t)===90?r=0:i===0?r=Math.PI/2-Math.abs(s):t===0?r=Math.PI/2-Math.abs(e):r=Math.atan(1/Math.sqrt(Math.pow(Math.tan(e),2)+Math.pow(Math.tan(s),2))),{altitudeAngle:r,azimuthAngle:n}}function tn(i,t){const e=180/Math.PI;let s=0,n=0;if(i===0&&((t===0||t===2*Math.PI)&&(s=Math.PI/2),t===Math.PI/2&&(n=Math.PI/2),t===Math.PI&&(s=-Math.PI/2),t===3*Math.PI/2&&(n=-Math.PI/2),t>0&&t<Math.PI/2&&(s=Math.PI/2,n=Math.PI/2),t>Math.PI/2&&t<Math.PI&&(s=-Math.PI/2,n=Math.PI/2),t>Math.PI&&t<3*Math.PI/2&&(s=-Math.PI/2,n=-Math.PI/2),t>3*Math.PI/2&&t<2*Math.PI&&(s=Math.PI/2,n=-Math.PI/2)),i!==0){const u=Math.tan(i);s=Math.atan(Math.cos(t)/u),n=Math.atan(Math.sin(t)/u)}const r=Math.round(s*e),o=Math.round(n*e);return{tiltX:r,tiltY:o}}const Ai=new Set(["Circle","ClipPath","Ellipse","ForeignObject","G","Image","Line","Marker","Mask","Path","Pattern","Polygon","Polyline","Rect","Svg","Symbol","TSpan","Text","TextPath","Use"]);function en(i){const t=Object.getPrototypeOf(i).constructor.name;return Ai.has(t)&&Object.hasOwn(i,"elementRef")}function Hr(i){var t,e,s;return(t=i.ref)!=null&&t.rngh?!1:((e=Object.getPrototypeOf(i==null?void 0:i.type))==null?void 0:e.name)==="WebShape"||Ai.has((s=i==null?void 0:i.type)==null?void 0:s.displayName)}const sn=800,nn=700,Ci=30,Ke=at.RIGHT,Ze=1,rn=Oi(Ci),on=Oi(90-Ci);class an extends U{constructor(){super(...arguments);a(this,"numberOfPointersRequired",Ze);a(this,"direction",Ke);a(this,"maxDurationMs",sn);a(this,"minVelocity",nn);a(this,"maxNumberOfPointersSimultaneously",0);a(this,"keyPointer",NaN)}updateGestureConfig({enabled:e=!0,...s}){super.updateGestureConfig({enabled:e,...s}),this.config.direction&&(this.direction=this.config.direction),this.config.numberOfPointers&&(this.numberOfPointersRequired=this.config.numberOfPointers)}startFling(){this.begin(),this.maxNumberOfPointersSimultaneously=1,this.delayTimeout=setTimeout(()=>this.fail(),this.maxDurationMs)}tryEndFling(){const e=C.fromVelocity(this.tracker,this.keyPointer);if(!e)return!1;const s=(l,d)=>(l&this.direction)===l&&e.isSimilar(C.fromDirection(l),d),n=Object.values(at),r=Object.values(Tt),o=n.map(l=>s(l,rn)),u=r.map(l=>s(l,on)),f=o.some(Boolean)||u.some(Boolean),h=e.magnitude>this.minVelocity;return this.maxNumberOfPointersSimultaneously===this.numberOfPointersRequired&&f&&h?(clearTimeout(this.delayTimeout),this.activate(),!0):!1}endFling(){this.tryEndFling()||this.fail()}onPointerDown(e){this.isButtonInConfig(e.button)&&(this.tracker.addToTracker(e),this.keyPointer=e.pointerId,super.onPointerDown(e),this.newPointerAction(),this.tryToSendTouchEvent(e))}onPointerAdd(e){this.tracker.addToTracker(e),super.onPointerAdd(e),this.newPointerAction()}newPointerAction(){this.state===c.UNDETERMINED&&this.startFling(),this.state===c.BEGAN&&(this.tryEndFling(),this.tracker.trackedPointersCount>this.maxNumberOfPointersSimultaneously&&(this.maxNumberOfPointersSimultaneously=this.tracker.trackedPointersCount))}pointerMoveAction(e){this.tracker.track(e),this.state===c.BEGAN&&this.tryEndFling()}onPointerMove(e){this.pointerMoveAction(e),super.onPointerMove(e)}onPointerOutOfBounds(e){this.pointerMoveAction(e),super.onPointerOutOfBounds(e)}onPointerUp(e){super.onPointerUp(e),this.onUp(e),this.keyPointer=NaN}onPointerRemove(e){super.onPointerRemove(e),this.onUp(e)}onUp(e){this.state===c.BEGAN&&this.endFling(),this.tracker.removeFromTracker(e.pointerId)}activate(e){super.activate(e),this.end()}resetConfig(){super.resetConfig(),this.numberOfPointersRequired=Ze,this.direction=Ke}}let hn=class yi extends U{constructor(){super(...arguments),this.shouldActivateOnStart=!1,this.disallowInterruption=!1,this.startX=0,this.startY=0,this.minDistSq=lt*lt}init(t,e){if(super.init(t,e),this.shouldCancelWhenOutside=!0,Q.OS!=="web")return;const s=this.delegate.view;this.restoreViewStyles(s),this.buttonRole=s.getAttribute("role")==="button"}updateGestureConfig({enabled:t=!0,...e}){super.updateGestureConfig({enabled:t,...e}),this.config.shouldActivateOnStart!==void 0&&(this.shouldActivateOnStart=this.config.shouldActivateOnStart),this.config.disallowInterruption!==void 0&&(this.disallowInterruption=this.config.disallowInterruption);const s=this.delegate.view;this.restoreViewStyles(s)}restoreViewStyles(t){t&&(t.style.touchAction="auto",t.style.WebkitTouchCallout="auto")}onPointerDown(t){this.tracker.addToTracker(t),super.onPointerDown(t),this.newPointerAction(),this.tryToSendTouchEvent(t)}onPointerAdd(t){this.tracker.addToTracker(t),super.onPointerAdd(t),this.newPointerAction()}newPointerAction(){const t=this.tracker.getAbsoluteCoordsAverage();if(this.startX=t.x,this.startY=t.y,this.state!==c.UNDETERMINED)return;this.begin();const s=this.delegate.view.hasAttribute("rnghtext");(this.buttonRole||s)&&this.activate()}onPointerMove(t){this.tracker.track(t);const e=this.tracker.getAbsoluteCoordsAverage(),s=this.startX-e.x,n=this.startY-e.y;s*s+n*n>=this.minDistSq&&(this.buttonRole&&this.state===c.ACTIVE?this.cancel():!this.buttonRole&&this.state===c.BEGAN&&this.activate())}onPointerLeave(){(this.state===c.BEGAN||this.state===c.ACTIVE)&&this.cancel()}onPointerUp(t){super.onPointerUp(t),this.onUp(t)}onPointerRemove(t){super.onPointerRemove(t),this.onUp(t)}onUp(t){this.tracker.removeFromTracker(t.pointerId),this.tracker.trackedPointersCount===0&&(this.state===c.ACTIVE?this.end():this.fail())}shouldRecognizeSimultaneously(t){if(super.shouldRecognizeSimultaneously(t))return!0;if(t instanceof yi&&t.state===c.ACTIVE&&t.disallowsInterruption())return!1;const e=!this.disallowInterruption;return this.state===c.ACTIVE&&t.state===c.ACTIVE&&e?!1:this.state===c.ACTIVE&&e&&t.handlerTag>0}shouldBeCancelledByOther(t){return!this.disallowInterruption}disallowsInterruption(){return this.disallowInterruption}isButton(){return this.buttonRole}};class cn extends U{onPointerDown(t){this.tracker.addToTracker(t),super.onPointerDown(t),this.begin(),this.tryToSendTouchEvent(t)}onPointerAdd(t){this.tracker.addToTracker(t),super.onPointerAdd(t)}onPointerMove(t){this.tracker.track(t),super.onPointerMove(t)}onPointerOutOfBounds(t){this.tracker.track(t),super.onPointerOutOfBounds(t)}onPointerUp(t){super.onPointerUp(t),this.tracker.removeFromTracker(t.pointerId)}onPointerRemove(t){super.onPointerRemove(t),this.tracker.removeFromTracker(t.pointerId)}}class ln extends U{transformNativeEvent(){return{...super.transformNativeEvent(),stylusData:this.stylusData}}onPointerMoveOver(t){k.instance.recordHandlerIfNotPresent(this),this.tracker.addToTracker(t),this.stylusData=t.stylusData,super.onPointerMoveOver(t),this.state===c.UNDETERMINED&&(this.begin(),this.activate())}onPointerMoveOut(t){this.tracker.removeFromTracker(t.pointerId),this.stylusData=t.stylusData,super.onPointerMoveOut(t),this.end()}onPointerMove(t){this.tracker.track(t),this.stylusData=t.stylusData,super.onPointerMove(t)}onPointerCancel(t){super.onPointerCancel(t),this.reset()}}/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function w(){return w=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s])}return i},w.apply(this,arguments)}function D(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}function Xt(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var Te;typeof Object.assign!="function"?Te=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(n!=null)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Te=Object.assign;var tt=Te,Qe=["","webkit","Moz","MS","ms","o"],un=typeof document>"u"?{style:{}}:document.createElement("div"),fn="function",ht=Math.round,et=Math.abs,Ce=Date.now;function ie(i,t){for(var e,s,n=t[0].toUpperCase()+t.slice(1),r=0;r<Qe.length;){if(e=Qe[r],s=e?e+n:t,s in i)return s;r++}}var G;typeof window>"u"?G={}:G=window;var Si=ie(un.style,"touchAction"),Di=Si!==void 0;function dn(){if(!Di)return!1;var i={},t=G.CSS&&G.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){return i[e]=t?G.CSS.supports("touch-action",e):!0}),i}var _i="compute",Mi="auto",me="manipulation",K="none",It="pan-x",Nt="pan-y",Gt=dn(),pn=/mobile|tablet|ip(ad|hone|od)|android/i,wi="ontouchstart"in G,vn=ie(G,"PointerEvent")!==void 0,En=wi&&pn.test(navigator.userAgent),Dt="touch",gn="pen",ye="mouse",Tn="kinect",mn=25,N=1,st=2,m=4,O=8,Jt=1,_t=2,Mt=4,wt=8,ut=16,x=_t|Mt,Z=wt|ut,bi=x|Z,Ri=["x","y"],Kt=["clientX","clientY"];function F(i,t,e){var s;if(i)if(i.forEach)i.forEach(t,e);else if(i.length!==void 0)for(s=0;s<i.length;)t.call(e,i[s],s,i),s++;else for(s in i)i.hasOwnProperty(s)&&t.call(e,i[s],s,i)}function se(i,t){return typeof i===fn?i.apply(t&&t[0]||void 0,t):i}function J(i,t){return i.indexOf(t)>-1}function Pn(i){if(J(i,K))return K;var t=J(i,It),e=J(i,Nt);return t&&e?K:t||e?t?It:Nt:J(i,me)?me:Mi}var ki=function(){function i(e,s){this.manager=e,this.set(s)}var t=i.prototype;return t.set=function(s){s===_i&&(s=this.compute()),Di&&this.manager.element.style&&Gt[s]&&(this.manager.element.style[Si]=s),this.actions=s.toLowerCase().trim()},t.update=function(){this.set(this.manager.options.touchAction)},t.compute=function(){var s=[];return F(this.manager.recognizers,function(n){se(n.options.enable,[n])&&(s=s.concat(n.getTouchAction()))}),Pn(s.join(" "))},t.preventDefaults=function(s){var n=s.srcEvent,r=s.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var o=this.actions,u=J(o,K)&&!Gt[K],f=J(o,Nt)&&!Gt[Nt],h=J(o,It)&&!Gt[It];if(u){var l=s.pointers.length===1,d=s.distance<2,p=s.deltaTime<250;if(l&&d&&p)return}if(!(h&&f)&&(u||f&&r&x||h&&r&Z))return this.preventSrc(n)},t.preventSrc=function(s){this.manager.session.prevented=!0,s.preventDefault()},i}();function Se(i,t){for(;i;){if(i===t)return!0;i=i.parentNode}return!1}function Hi(i){var t=i.length;if(t===1)return{x:ht(i[0].clientX),y:ht(i[0].clientY)};for(var e=0,s=0,n=0;n<t;)e+=i[n].clientX,s+=i[n].clientY,n++;return{x:ht(e/t),y:ht(s/t)}}function ti(i){for(var t=[],e=0;e<i.pointers.length;)t[e]={clientX:ht(i.pointers[e].clientX),clientY:ht(i.pointers[e].clientY)},e++;return{timeStamp:Ce(),pointers:t,center:Hi(t),deltaX:i.deltaX,deltaY:i.deltaY}}function Zt(i,t,e){e||(e=Ri);var s=t[e[0]]-i[e[0]],n=t[e[1]]-i[e[1]];return Math.sqrt(s*s+n*n)}function Pe(i,t,e){e||(e=Ri);var s=t[e[0]]-i[e[0]],n=t[e[1]]-i[e[1]];return Math.atan2(n,s)*180/Math.PI}function xi(i,t){return i===t?Jt:et(i)>=et(t)?i<0?_t:Mt:t<0?wt:ut}function In(i,t){var e=t.center,s=i.offsetDelta||{},n=i.prevDelta||{},r=i.prevInput||{};(t.eventType===N||r.eventType===m)&&(n=i.prevDelta={x:r.deltaX||0,y:r.deltaY||0},s=i.offsetDelta={x:e.x,y:e.y}),t.deltaX=n.x+(e.x-s.x),t.deltaY=n.y+(e.y-s.y)}function Li(i,t,e){return{x:t/i||0,y:e/i||0}}function Nn(i,t){return Zt(t[0],t[1],Kt)/Zt(i[0],i[1],Kt)}function On(i,t){return Pe(t[1],t[0],Kt)+Pe(i[1],i[0],Kt)}function An(i,t){var e=i.lastInterval||t,s=t.timeStamp-e.timeStamp,n,r,o,u;if(t.eventType!==O&&(s>mn||e.velocity===void 0)){var f=t.deltaX-e.deltaX,h=t.deltaY-e.deltaY,l=Li(s,f,h);r=l.x,o=l.y,n=et(l.x)>et(l.y)?l.x:l.y,u=xi(f,h),i.lastInterval=t}else n=e.velocity,r=e.velocityX,o=e.velocityY,u=e.direction;t.velocity=n,t.velocityX=r,t.velocityY=o,t.direction=u}function Cn(i,t){var e=i.session,s=t.pointers,n=s.length;e.firstInput||(e.firstInput=ti(t)),n>1&&!e.firstMultiple?e.firstMultiple=ti(t):n===1&&(e.firstMultiple=!1);var r=e.firstInput,o=e.firstMultiple,u=o?o.center:r.center,f=t.center=Hi(s);t.timeStamp=Ce(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=Pe(u,f),t.distance=Zt(u,f),In(e,t),t.offsetDirection=xi(t.deltaX,t.deltaY);var h=Li(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=h.x,t.overallVelocityY=h.y,t.overallVelocity=et(h.x)>et(h.y)?h.x:h.y,t.scale=o?Nn(o.pointers,s):1,t.rotation=o?On(o.pointers,s):0,t.maxPointers=e.prevInput?t.pointers.length>e.prevInput.maxPointers?t.pointers.length:e.prevInput.maxPointers:t.pointers.length,An(e,t);var l=i.element,d=t.srcEvent,p;d.composedPath?p=d.composedPath()[0]:d.path?p=d.path[0]:p=d.target,Se(p,l)&&(l=p),t.target=l}function yn(i,t,e){var s=e.pointers.length,n=e.changedPointers.length,r=t&N&&s-n===0,o=t&(m|O)&&s-n===0;e.isFirst=!!r,e.isFinal=!!o,r&&(i.session={}),e.eventType=t,Cn(i,e),i.emit("hammer.input",e),i.recognize(e),i.session.prevInput=e}function Ot(i){return i.trim().split(/\s+/g)}function mt(i,t,e){F(Ot(t),function(s){i.addEventListener(s,e,!1)})}function Pt(i,t,e){F(Ot(t),function(s){i.removeEventListener(s,e,!1)})}function ei(i){var t=i.ownerDocument||i;return t.defaultView||t.parentWindow||window}var pt=function(){function i(e,s){var n=this;this.manager=e,this.callback=s,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(r){se(e.options.enable,[e])&&n.handler(r)},this.init()}var t=i.prototype;return t.handler=function(){},t.init=function(){this.evEl&&mt(this.element,this.evEl,this.domHandler),this.evTarget&&mt(this.target,this.evTarget,this.domHandler),this.evWin&&mt(ei(this.element),this.evWin,this.domHandler)},t.destroy=function(){this.evEl&&Pt(this.element,this.evEl,this.domHandler),this.evTarget&&Pt(this.target,this.evTarget,this.domHandler),this.evWin&&Pt(ei(this.element),this.evWin,this.domHandler)},i}();function it(i,t,e){if(i.indexOf&&!e)return i.indexOf(t);for(var s=0;s<i.length;){if(e&&i[s][e]==t||!e&&i[s]===t)return s;s++}return-1}var Sn={pointerdown:N,pointermove:st,pointerup:m,pointercancel:O,pointerout:O},Dn={2:Dt,3:gn,4:ye,5:Tn},Xi="pointerdown",Gi="pointermove pointerup pointercancel";G.MSPointerEvent&&!G.PointerEvent&&(Xi="MSPointerDown",Gi="MSPointerMove MSPointerUp MSPointerCancel");var Fi=function(i){D(t,i);function t(){var s,n=t.prototype;return n.evEl=Xi,n.evWin=Gi,s=i.apply(this,arguments)||this,s.store=s.manager.session.pointerEvents=[],s}var e=t.prototype;return e.handler=function(n){var r=this.store,o=!1,u=n.type.toLowerCase().replace("ms",""),f=Sn[u],h=Dn[n.pointerType]||n.pointerType,l=h===Dt,d=it(r,n.pointerId,"pointerId");f&N&&(n.button===0||l)?d<0&&(r.push(n),d=r.length-1):f&(m|O)&&(o=!0),!(d<0)&&(r[d]=n,this.callback(this.manager,f,{pointers:r,changedPointers:[n],pointerType:h,srcEvent:n}),o&&r.splice(d,1))},t}(pt);function At(i){return Array.prototype.slice.call(i,0)}function De(i,t,e){for(var s=[],n=[],r=0;r<i.length;){var o=t?i[r][t]:i[r];it(n,o)<0&&s.push(i[r]),n[r]=o,r++}return e&&(t?s=s.sort(function(u,f){return u[t]>f[t]}):s=s.sort()),s}var _n={touchstart:N,touchmove:st,touchend:m,touchcancel:O},Mn="touchstart touchmove touchend touchcancel",_e=function(i){D(t,i);function t(){var s;return t.prototype.evTarget=Mn,s=i.apply(this,arguments)||this,s.targetIds={},s}var e=t.prototype;return e.handler=function(n){var r=_n[n.type],o=wn.call(this,n,r);o&&this.callback(this.manager,r,{pointers:o[0],changedPointers:o[1],pointerType:Dt,srcEvent:n})},t}(pt);function wn(i,t){var e=At(i.touches),s=this.targetIds;if(t&(N|st)&&e.length===1)return s[e[0].identifier]=!0,[e,e];var n,r,o=At(i.changedTouches),u=[],f=this.target;if(r=e.filter(function(h){return Se(h.target,f)}),t===N)for(n=0;n<r.length;)s[r[n].identifier]=!0,n++;for(n=0;n<o.length;)s[o[n].identifier]&&u.push(o[n]),t&(m|O)&&delete s[o[n].identifier],n++;if(u.length)return[De(r.concat(u),"identifier",!0),u]}var bn={mousedown:N,mousemove:st,mouseup:m},Rn="mousedown",kn="mousemove mouseup",Me=function(i){D(t,i);function t(){var s,n=t.prototype;return n.evEl=Rn,n.evWin=kn,s=i.apply(this,arguments)||this,s.pressed=!1,s}var e=t.prototype;return e.handler=function(n){var r=bn[n.type];r&N&&n.button===0&&(this.pressed=!0),r&st&&n.which!==1&&(r=m),this.pressed&&(r&m&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:ye,srcEvent:n}))},t}(pt),Hn=2500,ii=25;function si(i){var t=i.changedPointers,e=t[0];if(e.identifier===this.primaryTouch){var s={x:e.clientX,y:e.clientY},n=this.lastTouches;this.lastTouches.push(s);var r=function(){var u=n.indexOf(s);u>-1&&n.splice(u,1)};setTimeout(r,Hn)}}function xn(i,t){i&N?(this.primaryTouch=t.changedPointers[0].identifier,si.call(this,t)):i&(m|O)&&si.call(this,t)}function Ln(i){for(var t=i.srcEvent.clientX,e=i.srcEvent.clientY,s=0;s<this.lastTouches.length;s++){var n=this.lastTouches[s],r=Math.abs(t-n.x),o=Math.abs(e-n.y);if(r<=ii&&o<=ii)return!0}return!1}var Yi=function(){var i=function(t){D(e,t);function e(n,r){var o;return o=t.call(this,n,r)||this,o.handler=function(u,f,h){var l=h.pointerType===Dt,d=h.pointerType===ye;if(!(d&&h.sourceCapabilities&&h.sourceCapabilities.firesTouchEvents)){if(l)xn.call(Xt(Xt(o)),f,h);else if(d&&Ln.call(Xt(Xt(o)),h))return;o.callback(u,f,h)}},o.touch=new _e(o.manager,o.handler),o.mouse=new Me(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var s=e.prototype;return s.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(pt);return i}();function Xn(i){var t,e=i.options.inputClass;return e?t=e:vn?t=Fi:En?t=_e:wi?t=Yi:t=Me,new t(i,yn)}function ct(i,t,e){return Array.isArray(i)?(F(i,e[t],e),!0):!1}var qt=1,S=2,ft=4,q=8,Y=q,Ct=16,H=32,Gn=1;function Fn(){return Gn++}function Ft(i,t){var e=t.manager;return e?e.get(i):i}function ni(i){return i&Ct?"cancel":i&q?"end":i&ft?"move":i&S?"start":""}var bt=function(){function i(e){e===void 0&&(e={}),this.options=w({enable:!0},e),this.id=Fn(),this.manager=null,this.state=qt,this.simultaneous={},this.requireFail=[]}var t=i.prototype;return t.set=function(s){return tt(this.options,s),this.manager&&this.manager.touchAction.update(),this},t.recognizeWith=function(s){if(ct(s,"recognizeWith",this))return this;var n=this.simultaneous;return s=Ft(s,this),n[s.id]||(n[s.id]=s,s.recognizeWith(this)),this},t.dropRecognizeWith=function(s){return ct(s,"dropRecognizeWith",this)?this:(s=Ft(s,this),delete this.simultaneous[s.id],this)},t.requireFailure=function(s){if(ct(s,"requireFailure",this))return this;var n=this.requireFail;return s=Ft(s,this),it(n,s)===-1&&(n.push(s),s.requireFailure(this)),this},t.dropRequireFailure=function(s){if(ct(s,"dropRequireFailure",this))return this;s=Ft(s,this);var n=it(this.requireFail,s);return n>-1&&this.requireFail.splice(n,1),this},t.hasRequireFailures=function(){return this.requireFail.length>0},t.canRecognizeWith=function(s){return!!this.simultaneous[s.id]},t.emit=function(s){var n=this,r=this.state;function o(u){n.manager.emit(u,s)}r<q&&o(n.options.event+ni(r)),o(n.options.event),s.additionalEvent&&o(s.additionalEvent),r>=q&&o(n.options.event+ni(r))},t.tryEmit=function(s){if(this.canEmit())return this.emit(s);this.state=H},t.canEmit=function(){for(var s=0;s<this.requireFail.length;){if(!(this.requireFail[s].state&(H|qt)))return!1;s++}return!0},t.recognize=function(s){var n=tt({},s);if(!se(this.options.enable,[this,n])){this.reset(),this.state=H;return}this.state&(Y|Ct|H)&&(this.state=qt),this.state=this.process(n),this.state&(S|ft|q|Ct)&&this.tryEmit(n)},t.process=function(s){},t.getTouchAction=function(){},t.reset=function(){},i}(),Ie=function(i){D(t,i);function t(s){var n;return s===void 0&&(s={}),n=i.call(this,w({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},s))||this,n.pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}var e=t.prototype;return e.getTouchAction=function(){return[me]},e.process=function(n){var r=this,o=this.options,u=n.pointers.length===o.pointers,f=n.distance<o.threshold,h=n.deltaTime<o.time;if(this.reset(),n.eventType&N&&this.count===0)return this.failTimeout();if(f&&h&&u){if(n.eventType!==m)return this.failTimeout();var l=this.pTime?n.timeStamp-this.pTime<o.interval:!0,d=!this.pCenter||Zt(this.pCenter,n.center)<o.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!d||!l?this.count=1:this.count+=1,this._input=n;var p=this.count%o.taps;if(p===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){r.state=Y,r.tryEmit()},o.interval),S):Y}return H},e.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=H},this.options.interval),H},e.reset=function(){clearTimeout(this._timer)},e.emit=function(){this.state===Y&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},t}(bt),dt=function(i){D(t,i);function t(s){return s===void 0&&(s={}),i.call(this,w({pointers:1},s))||this}var e=t.prototype;return e.attrTest=function(n){var r=this.options.pointers;return r===0||n.pointers.length===r},e.process=function(n){var r=this.state,o=n.eventType,u=r&(S|ft),f=this.attrTest(n);return u&&(o&O||!f)?r|Ct:u||f?o&m?r|q:r&S?r|ft:S:H},t}(bt);function Ui(i){return i===ut?"down":i===wt?"up":i===_t?"left":i===Mt?"right":""}var we=function(i){D(t,i);function t(s){var n;return s===void 0&&(s={}),n=i.call(this,w({event:"pan",threshold:10,pointers:1,direction:bi},s))||this,n.pX=null,n.pY=null,n}var e=t.prototype;return e.getTouchAction=function(){var n=this.options.direction,r=[];return n&x&&r.push(Nt),n&Z&&r.push(It),r},e.directionTest=function(n){var r=this.options,o=!0,u=n.distance,f=n.direction,h=n.deltaX,l=n.deltaY;return f&r.direction||(r.direction&x?(f=h===0?Jt:h<0?_t:Mt,o=h!==this.pX,u=Math.abs(n.deltaX)):(f=l===0?Jt:l<0?wt:ut,o=l!==this.pY,u=Math.abs(n.deltaY))),n.direction=f,o&&u>r.threshold&&f&r.direction},e.attrTest=function(n){return dt.prototype.attrTest.call(this,n)&&(this.state&S||!(this.state&S)&&this.directionTest(n))},e.emit=function(n){this.pX=n.deltaX,this.pY=n.deltaY;var r=Ui(n.direction);r&&(n.additionalEvent=this.options.event+r),i.prototype.emit.call(this,n)},t}(dt),Vi=function(i){D(t,i);function t(s){return s===void 0&&(s={}),i.call(this,w({event:"swipe",threshold:10,velocity:.3,direction:x|Z,pointers:1},s))||this}var e=t.prototype;return e.getTouchAction=function(){return we.prototype.getTouchAction.call(this)},e.attrTest=function(n){var r=this.options.direction,o;return r&(x|Z)?o=n.overallVelocity:r&x?o=n.overallVelocityX:r&Z&&(o=n.overallVelocityY),i.prototype.attrTest.call(this,n)&&r&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&et(o)>this.options.velocity&&n.eventType&m},e.emit=function(n){var r=Ui(n.offsetDirection);r&&this.manager.emit(this.options.event+r,n),this.manager.emit(this.options.event,n)},t}(dt),Wi=function(i){D(t,i);function t(s){return s===void 0&&(s={}),i.call(this,w({event:"pinch",threshold:0,pointers:2},s))||this}var e=t.prototype;return e.getTouchAction=function(){return[K]},e.attrTest=function(n){return i.prototype.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&S)},e.emit=function(n){if(n.scale!==1){var r=n.scale<1?"in":"out";n.additionalEvent=this.options.event+r}i.prototype.emit.call(this,n)},t}(dt),Bi=function(i){D(t,i);function t(s){return s===void 0&&(s={}),i.call(this,w({event:"rotate",threshold:0,pointers:2},s))||this}var e=t.prototype;return e.getTouchAction=function(){return[K]},e.attrTest=function(n){return i.prototype.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&S)},t}(dt),qi=function(i){D(t,i);function t(s){var n;return s===void 0&&(s={}),n=i.call(this,w({event:"press",pointers:1,time:251,threshold:9},s))||this,n._timer=null,n._input=null,n}var e=t.prototype;return e.getTouchAction=function(){return[Mi]},e.process=function(n){var r=this,o=this.options,u=n.pointers.length===o.pointers,f=n.distance<o.threshold,h=n.deltaTime>o.time;if(this._input=n,!f||!u||n.eventType&(m|O)&&!h)this.reset();else if(n.eventType&N)this.reset(),this._timer=setTimeout(function(){r.state=Y,r.tryEmit()},o.time);else if(n.eventType&m)return Y;return H},e.reset=function(){clearTimeout(this._timer)},e.emit=function(n){this.state===Y&&(n&&n.eventType&m?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=Ce(),this.manager.emit(this.options.event,this._input)))},t}(bt),zi={domEvents:!1,touchAction:_i,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ri=[[Bi,{enable:!1}],[Wi,{enable:!1},["rotate"]],[Vi,{direction:x}],[we,{direction:x},["swipe"]],[Ie],[Ie,{event:"doubletap",taps:2},["tap"]],[qi]],Yn=1,oi=2;function ai(i,t){var e=i.element;if(e.style){var s;F(i.options.cssProps,function(n,r){s=ie(e.style,r),t?(i.oldCssProps[s]=e.style[s],e.style[s]=n):e.style[s]=i.oldCssProps[s]||""}),t||(i.oldCssProps={})}}function Un(i,t){var e=document.createEvent("Event");e.initEvent(i,!0,!0),e.gesture=t,t.target.dispatchEvent(e)}var hi=function(){function i(e,s){var n=this;this.options=tt({},zi,s||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=Xn(this),this.touchAction=new ki(this,this.options.touchAction),ai(this,!0),F(this.options.recognizers,function(r){var o=n.add(new r[0](r[1]));r[2]&&o.recognizeWith(r[2]),r[3]&&o.requireFailure(r[3])},this)}var t=i.prototype;return t.set=function(s){return tt(this.options,s),s.touchAction&&this.touchAction.update(),s.inputTarget&&(this.input.destroy(),this.input.target=s.inputTarget,this.input.init()),this},t.stop=function(s){this.session.stopped=s?oi:Yn},t.recognize=function(s){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(s);var r,o=this.recognizers,u=n.curRecognizer;(!u||u&&u.state&Y)&&(n.curRecognizer=null,u=null);for(var f=0;f<o.length;)r=o[f],n.stopped!==oi&&(!u||r===u||r.canRecognizeWith(u))?r.recognize(s):r.reset(),!u&&r.state&(S|ft|q)&&(n.curRecognizer=r,u=r),f++}},t.get=function(s){if(s instanceof bt)return s;for(var n=this.recognizers,r=0;r<n.length;r++)if(n[r].options.event===s)return n[r];return null},t.add=function(s){if(ct(s,"add",this))return this;var n=this.get(s.options.event);return n&&this.remove(n),this.recognizers.push(s),s.manager=this,this.touchAction.update(),s},t.remove=function(s){if(ct(s,"remove",this))return this;var n=this.get(s);if(s){var r=this.recognizers,o=it(r,n);o!==-1&&(r.splice(o,1),this.touchAction.update())}return this},t.on=function(s,n){if(s===void 0||n===void 0)return this;var r=this.handlers;return F(Ot(s),function(o){r[o]=r[o]||[],r[o].push(n)}),this},t.off=function(s,n){if(s===void 0)return this;var r=this.handlers;return F(Ot(s),function(o){n?r[o]&&r[o].splice(it(r[o],n),1):delete r[o]}),this},t.emit=function(s,n){this.options.domEvents&&Un(s,n);var r=this.handlers[s]&&this.handlers[s].slice();if(!(!r||!r.length)){n.type=s,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var o=0;o<r.length;)r[o](n),o++}},t.destroy=function(){this.element&&ai(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},i}(),Vn={touchstart:N,touchmove:st,touchend:m,touchcancel:O},Wn="touchstart",Bn="touchstart touchmove touchend touchcancel",qn=function(i){D(t,i);function t(){var s,n=t.prototype;return n.evTarget=Wn,n.evWin=Bn,s=i.apply(this,arguments)||this,s.started=!1,s}var e=t.prototype;return e.handler=function(n){var r=Vn[n.type];if(r===N&&(this.started=!0),!!this.started){var o=zn.call(this,n,r);r&(m|O)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,r,{pointers:o[0],changedPointers:o[1],pointerType:Dt,srcEvent:n})}},t}(pt);function zn(i,t){var e=At(i.touches),s=At(i.changedTouches);return t&(m|O)&&(e=De(e.concat(s),"identifier",!0)),[e,s]}function $i(i,t,e){var s="DEPRECATED METHOD: "+t+`
`+e+` AT 
`;return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,s,r),i.apply(this,arguments)}}var ji=$i(function(i,t,e){for(var s=Object.keys(t),n=0;n<s.length;)(!e||e&&i[s[n]]===void 0)&&(i[s[n]]=t[s[n]]),n++;return i},"extend","Use `assign`."),$n=$i(function(i,t){return ji(i,t,!0)},"merge","Use `assign`.");function jn(i,t,e){var s=t.prototype,n;n=i.prototype=Object.create(s),n.constructor=i,n._super=s,e&&tt(n,e)}function ci(i,t){return function(){return i.apply(t,arguments)}}var Ji=function(){var i=function(e,s){return s===void 0&&(s={}),new hi(e,w({recognizers:ri.concat()},s))};return i.VERSION="2.0.17-rc",i.DIRECTION_ALL=bi,i.DIRECTION_DOWN=ut,i.DIRECTION_LEFT=_t,i.DIRECTION_RIGHT=Mt,i.DIRECTION_UP=wt,i.DIRECTION_HORIZONTAL=x,i.DIRECTION_VERTICAL=Z,i.DIRECTION_NONE=Jt,i.DIRECTION_DOWN=ut,i.INPUT_START=N,i.INPUT_MOVE=st,i.INPUT_END=m,i.INPUT_CANCEL=O,i.STATE_POSSIBLE=qt,i.STATE_BEGAN=S,i.STATE_CHANGED=ft,i.STATE_ENDED=q,i.STATE_RECOGNIZED=Y,i.STATE_CANCELLED=Ct,i.STATE_FAILED=H,i.Manager=hi,i.Input=pt,i.TouchAction=ki,i.TouchInput=_e,i.MouseInput=Me,i.PointerEventInput=Fi,i.TouchMouseInput=Yi,i.SingleTouchInput=qn,i.Recognizer=bt,i.AttrRecognizer=dt,i.Tap=Ie,i.Pan=we,i.Swipe=Vi,i.Pinch=Wi,i.Rotate=Bi,i.Press=qi,i.on=mt,i.off=Pt,i.each=F,i.merge=$n,i.extend=ji,i.bindFn=ci,i.assign=tt,i.inherit=jn,i.bindFn=ci,i.prefixed=ie,i.toArray=At,i.inArray=it,i.uniqueArray=De,i.splitStr=Ot,i.boolOrFn=se,i.hasParent=Se,i.addEventListeners=mt,i.removeEventListeners=Pt,i.defaults=tt({},zi,{preset:ri}),i}();Ji.defaults;const T=Ji;T.INPUT_START+"",c.BEGAN,T.INPUT_MOVE+"",c.ACTIVE,T.INPUT_END+"",c.END,T.INPUT_CANCEL+"",c.FAILED;const Yt={RIGHT:1,LEFT:2,UP:4,DOWN:8};T.DIRECTION_RIGHT+"",Yt.RIGHT,T.DIRECTION_LEFT+"",Yt.LEFT,T.DIRECTION_UP+"",Yt.UP,T.DIRECTION_DOWN+"",Yt.DOWN;T.INPUT_START+"",T.INPUT_MOVE+"",T.INPUT_END+"",T.INPUT_CANCEL+"";T.DIRECTION_HORIZONTAL+"",T.DIRECTION_UP+"",T.DIRECTION_DOWN+"",T.DIRECTION_VERTICAL+"",T.DIRECTION_NONE+"",T.DIRECTION_ALL+"",T.DIRECTION_RIGHT+"",T.DIRECTION_LEFT+"";const zt=typeof setImmediate=="function"?setImmediate.bind(null):typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(null):queueMicrotask.bind(null),li={NativeViewGestureHandler:hn,PanGestureHandler:Gs,TapGestureHandler:Fs,LongPressGestureHandler:Vs,PinchGestureHandler:Bs,RotationGestureHandler:$s,FlingGestureHandler:an,ManualGestureHandler:cn,HoverGestureHandler:ln};function yt(i){if(i instanceof us)return i._listRef._scrollRef.firstChild;if((i==null?void 0:i.viewTag)!==void 0)return yt(i.viewTag);if(i instanceof Element)return i.style.display==="contents"?yt(i.firstChild):i;if(en(i))return i.elementRef.current;let t=i==null?void 0:i.current;for(;t&&t.style.display==="contents";)t=t.firstChild;return t}class be{constructor(t){a(this,"pointersInBounds",[]);this.view=t,this.activePointersCounter=0}onPointerDown(t){}onPointerAdd(t){}onPointerUp(t){}onPointerRemove(t){}onPointerMove(t){}onPointerLeave(t){}onPointerEnter(t){}onPointerCancel(t){}onPointerOutOfBounds(t){}onPointerMoveOver(t){}onPointerMoveOut(t){}onWheel(t){}setOnPointerDown(t){this.onPointerDown=t}setOnPointerAdd(t){this.onPointerAdd=t}setOnPointerUp(t){this.onPointerUp=t}setOnPointerRemove(t){this.onPointerRemove=t}setOnPointerMove(t){this.onPointerMove=t}setOnPointerLeave(t){this.onPointerLeave=t}setOnPointerEnter(t){this.onPointerEnter=t}setOnPointerCancel(t){this.onPointerCancel=t}setOnPointerOutOfBounds(t){this.onPointerOutOfBounds=t}setOnPointerMoveOver(t){this.onPointerMoveOver=t}setOnPointerMoveOut(t){this.onPointerMoveOut=t}setOnWheel(t){this.onWheel=t}markAsInBounds(t){this.pointersInBounds.indexOf(t)>=0||this.pointersInBounds.push(t)}markAsOutOfBounds(t){const e=this.pointersInBounds.indexOf(t);e<0||this.pointersInBounds.splice(e,1)}resetManager(){this.activePointersCounter=0,this.pointersInBounds=[]}}const oe=new Set(["SELECT","INPUT"]);class Jn extends be{constructor(e){super(e);a(this,"trackedPointers",new Set);a(this,"mouseButtonsMapper",new Map);a(this,"pointerDownCallback",e=>{if(!ge(this.view,{x:e.clientX,y:e.clientY}))return;const s=this.mapEvent(e,v.DOWN),n=e.target;oe.has(n.tagName)||n.setPointerCapture(s.pointerId),this.markAsInBounds(s.pointerId),this.trackedPointers.add(s.pointerId),++this.activePointersCounter>1?(s.eventType=v.ADDITIONAL_POINTER_DOWN,this.onPointerAdd(s)):this.onPointerDown(s)});a(this,"pointerUpCallback",e=>{if(this.activePointersCounter===0)return;const s=this.mapEvent(e,v.UP),n=e.target;oe.has(n.tagName)||n.releasePointerCapture(s.pointerId),this.markAsOutOfBounds(s.pointerId),this.trackedPointers.delete(s.pointerId),--this.activePointersCounter>0?(s.eventType=v.ADDITIONAL_POINTER_UP,this.onPointerRemove(s)):this.onPointerUp(s)});a(this,"pointerMoveCallback",e=>{const s=this.mapEvent(e,v.MOVE),n=e.target;!(n!=null&&n.hasPointerCapture(e.pointerId))&&!oe.has(n.tagName)&&n.setPointerCapture(e.pointerId);const r=ge(this.view,{x:s.x,y:s.y}),o=this.pointersInBounds.indexOf(s.pointerId);r?o<0?(s.eventType=v.ENTER,this.onPointerEnter(s),this.markAsInBounds(s.pointerId)):this.onPointerMove(s):o>=0?(s.eventType=v.LEAVE,this.onPointerLeave(s),this.markAsOutOfBounds(s.pointerId)):this.onPointerOutOfBounds(s),this.lastPosition.x=e.x,this.lastPosition.y=e.y});a(this,"pointerCancelCallback",e=>{const s=this.mapEvent(e,v.CANCEL);this.onPointerCancel(s),this.markAsOutOfBounds(s.pointerId),this.activePointersCounter=0,this.trackedPointers.clear()});a(this,"pointerEnterCallback",e=>{const s=this.mapEvent(e,v.ENTER);this.onPointerMoveOver(s)});a(this,"pointerLeaveCallback",e=>{const s=this.mapEvent(e,v.LEAVE);this.onPointerMoveOut(s)});a(this,"lostPointerCaptureCallback",e=>{const s=this.mapEvent(e,v.CANCEL);this.trackedPointers.has(s.pointerId)&&(this.onPointerCancel(s),this.activePointersCounter=0,this.trackedPointers.clear())});this.mouseButtonsMapper.set(0,j.LEFT),this.mouseButtonsMapper.set(1,j.MIDDLE),this.mouseButtonsMapper.set(2,j.RIGHT),this.mouseButtonsMapper.set(3,j.BUTTON_4),this.mouseButtonsMapper.set(4,j.BUTTON_5),this.lastPosition={x:-1/0,y:-1/0}}registerListeners(){this.view.addEventListener("pointerdown",this.pointerDownCallback),this.view.addEventListener("pointerup",this.pointerUpCallback),this.view.addEventListener("pointermove",this.pointerMoveCallback),this.view.addEventListener("pointercancel",this.pointerCancelCallback),this.view.addEventListener("pointerenter",this.pointerEnterCallback),this.view.addEventListener("pointerleave",this.pointerLeaveCallback),this.view.addEventListener("lostpointercapture",this.lostPointerCaptureCallback)}unregisterListeners(){this.view.removeEventListener("pointerdown",this.pointerDownCallback),this.view.removeEventListener("pointerup",this.pointerUpCallback),this.view.removeEventListener("pointermove",this.pointerMoveCallback),this.view.removeEventListener("pointercancel",this.pointerCancelCallback),this.view.removeEventListener("pointerenter",this.pointerEnterCallback),this.view.removeEventListener("pointerleave",this.pointerLeaveCallback),this.view.removeEventListener("lostpointercapture",this.lostPointerCaptureCallback)}mapEvent(e,s){const n=this.view.getBoundingClientRect(),{scaleX:r,scaleY:o}=Ks(this.view);return{x:e.clientX,y:e.clientY,offsetX:(e.clientX-n.left)/r,offsetY:(e.clientY-n.top)/o,pointerId:e.pointerId,eventType:s,pointerType:Ni.get(e.pointerType)??y.OTHER,button:this.mouseButtonsMapper.get(e.button),time:e.timeStamp,stylusData:Zs(e)}}resetManager(){super.resetManager(),this.trackedPointers.clear()}}class Kn extends be{constructor(){super(...arguments);a(this,"activationKeys",["Enter"," "]);a(this,"cancelationKeys",["Tab"]);a(this,"isPressed",!1);a(this,"keyDownCallback",e=>{if(this.cancelationKeys.indexOf(e.key)!==-1&&this.isPressed){this.dispatchEvent(e,v.CANCEL);return}this.activationKeys.indexOf(e.key)!==-1&&this.dispatchEvent(e,v.DOWN)});a(this,"keyUpCallback",e=>{this.activationKeys.indexOf(e.key)===-1||!this.isPressed||this.dispatchEvent(e,v.UP)})}dispatchEvent(e,s){if(!(e.target instanceof HTMLElement))return;const n=this.mapEvent(e,s);switch(s){case v.UP:this.isPressed=!1,this.onPointerUp(n);break;case v.DOWN:this.isPressed=!0,this.onPointerDown(n);break;case v.CANCEL:this.isPressed=!1,this.onPointerCancel(n);break}}registerListeners(){this.view.addEventListener("keydown",this.keyDownCallback),this.view.addEventListener("keyup",this.keyUpCallback)}unregisterListeners(){this.view.removeEventListener("keydown",this.keyDownCallback),this.view.removeEventListener("keyup",this.keyUpCallback)}mapEvent(e,s){const n=e.target.getBoundingClientRect(),r={x:(n==null?void 0:n.x)+(n==null?void 0:n.width)/2,y:(n==null?void 0:n.y)+(n==null?void 0:n.height)/2},o={x:(n==null?void 0:n.width)/2,y:(n==null?void 0:n.height)/2};return{x:r.x,y:r.y,offsetX:o.x,offsetY:o.y,pointerId:0,eventType:s,pointerType:y.KEY,time:e.timeStamp}}}class Zn extends be{constructor(){super(...arguments);a(this,"wheelDelta",{x:0,y:0});a(this,"resetDelta",e=>{this.wheelDelta={x:0,y:0}});a(this,"wheelCallback",e=>{this.wheelDelta.x+=e.deltaX,this.wheelDelta.y+=e.deltaY;const s=this.mapEvent(e);this.onWheel(s)})}registerListeners(){this.view.addEventListener("pointermove",this.resetDelta),this.view.addEventListener("wheel",this.wheelCallback)}unregisterListeners(){this.view.removeEventListener("pointermove",this.resetDelta),this.view.removeEventListener("wheel",this.wheelCallback)}mapEvent(e){return{x:e.clientX+this.wheelDelta.x,y:e.clientY+this.wheelDelta.y,offsetX:e.offsetX-e.deltaX,offsetY:e.offsetY-e.deltaY,pointerId:-1,eventType:v.MOVE,pointerType:y.OTHER,time:e.timeStamp,wheelDeltaY:e.wheelDeltaY}}resetManager(){super.resetManager()}}class Qn{constructor(){a(this,"isInitialized",!1);a(this,"eventManagers",[]);a(this,"defaultViewStyles",{userSelect:"",touchAction:""})}init(t,e){if(!t)throw new Error(`Cannot find HTML Element for handler ${e.handlerTag}`);this.isInitialized=!0,this.gestureHandler=e,this.view=yt(t),this.defaultViewStyles={userSelect:this.view.style.userSelect,touchAction:this.view.style.touchAction};const s=e.config;this.setUserSelect(s.enabled),this.setTouchAction(s.enabled),this.setContextMenu(s.enabled),this.eventManagers.push(new Jn(this.view)),this.eventManagers.push(new Kn(this.view)),this.eventManagers.push(new Zn(this.view)),this.eventManagers.forEach(n=>this.gestureHandler.attachEventManager(n))}isPointerInBounds({x:t,y:e}){return ge(this.view,{x:t,y:e})}measureView(){const t=this.view.getBoundingClientRect();return{pageX:t.left,pageY:t.top,width:t.width,height:t.height}}reset(){this.eventManagers.forEach(t=>t.resetManager())}tryResetCursor(){const t=this.gestureHandler.config;t.activeCursor&&t.activeCursor!=="auto"&&this.gestureHandler.state===c.ACTIVE&&(this.view.style.cursor="auto")}shouldDisableContextMenu(t){return t.enableContextMenu===void 0&&this.gestureHandler.isButtonInConfig(j.RIGHT)||t.enableContextMenu===!1}addContextMenuListeners(t){this.shouldDisableContextMenu(t)?this.view.addEventListener("contextmenu",this.disableContextMenu):t.enableContextMenu&&this.view.addEventListener("contextmenu",this.enableContextMenu)}removeContextMenuListeners(t){this.shouldDisableContextMenu(t)?this.view.removeEventListener("contextmenu",this.disableContextMenu):t.enableContextMenu&&this.view.removeEventListener("contextmenu",this.enableContextMenu)}disableContextMenu(t){t.preventDefault()}enableContextMenu(t){t.stopPropagation()}setUserSelect(t){const{userSelect:e}=this.gestureHandler.config;this.view.style.userSelect=t?e??"none":this.defaultViewStyles.userSelect,this.view.style.webkitUserSelect=t?e??"none":this.defaultViewStyles.userSelect}setTouchAction(t){const{touchAction:e}=this.gestureHandler.config;this.view.style.touchAction=t?e??"none":this.defaultViewStyles.touchAction,this.view.style.WebkitTouchCallout=t?e??"none":this.defaultViewStyles.touchAction}setContextMenu(t){const e=this.gestureHandler.config;t?this.addContextMenuListeners(e):this.removeContextMenuListeners(e)}onEnabledChange(t){this.isInitialized&&(this.setUserSelect(t),this.setTouchAction(t),this.setContextMenu(t),t?this.eventManagers.forEach(e=>{e.registerListeners()}):this.eventManagers.forEach(e=>{e.unregisterListeners()}))}onBegin(){}onActivate(){const t=this.gestureHandler.config;(!this.view.style.cursor||this.view.style.cursor==="auto")&&t.activeCursor&&(this.view.style.cursor=t.activeCursor)}onEnd(){this.tryResetCursor()}onCancel(){this.tryResetCursor()}onFail(){this.tryResetCursor()}destroy(t){this.removeContextMenuListeners(t),this.eventManagers.forEach(e=>{e.unregisterListeners()})}get view(){return this._view}set view(t){this._view=t}}let ui=!1;const W={handleSetJSResponder(i,t){console.warn("handleSetJSResponder: ",i,t)},handleClearJSResponder(){console.warn("handleClearJSResponder: ")},createGestureHandler(i,t,e){{if(!(i in li))throw new Error(`react-native-gesture-handler: ${i} is not supported on web.`);const s=li[i];A.createGestureHandler(t,new s(new Qn)),B.instance.configureInteractions(A.getHandler(t),e)}this.updateGestureHandler(t,e)},attachGestureHandler(i,t,e,s){if(!(t instanceof Element||t instanceof te.Component)){ui=!0;const r=A.getHandler(i).constructor.name;throw new Error(`${r} with tag ${i} received child that is not valid HTML element.`)}A.getHandler(i).init(t,s)},updateGestureHandler(i,t){A.getHandler(i).updateGestureConfig(t),B.instance.configureInteractions(A.getHandler(i),t)},getGestureHandlerNode(i){return A.getHandler(i)},dropGestureHandler(i){ui||A.dropGestureHandler(i)},flushOperations(){}};function tr(){Ms()}const er=te.createContext(!1);M.create({container:{flex:1}});M.create({container:{flex:1}});let ir=1;function Ki(){return ir++}function sr(i,t){return i!==void 0&&(i!==Object(i)||!("__isNative"in i))&&t!=="onHandlerStateChange"&&t!=="onGestureEvent"}function ae(i,t,e={}){const s={...e};for(const n of t){let r=i[n];sr(r,n)&&(n==="simultaneousHandlers"||n==="waitFor"?r=nr(i[n]):n==="hitSlop"&&typeof r!="object"&&(r={top:r,left:r,bottom:r,right:r}),s[n]=r)}return s}function nr(i){return i=Ps(i),Q.OS==="web"?i.map(({current:t})=>t).filter(t=>t):i.map(t=>{var e;return Vt[t]||((e=t.current)==null?void 0:e.handlerTag)||-1}).filter(t=>t>0)}let he=!1;function ce(){he||(he=!0,zt(()=>{W.flushOperations(),he=!1}))}const Ut={REANIMATED_WORKLET:1,NATIVE_ANIMATED_EVENT:2,JS_FUNCTION_OLD_API:3,JS_FUNCTION_NEW_API:4};class Qt{static addMountListener(t){return this.mountListeners.add(t),()=>{this.mountListeners.delete(t)}}static addUnmountListener(t){return this.unmountListeners.add(t),()=>{this.unmountListeners.delete(t)}}static gestureHandlerWillMount(t){this.mountListeners.forEach(e=>e(t))}static gestureHandlerWillUnmount(t){this.unmountListeners.forEach(e=>e(t))}static gestureWillMount(t){this.mountListeners.forEach(e=>e(t))}static gestureWillUnmount(t){this.unmountListeners.forEach(e=>e(t))}}a(Qt,"mountListeners",new Set),a(Qt,"unmountListeners",new Set);const z=fs,rr={topOnGestureHandlerEvent:{registrationName:"onGestureHandlerEvent"},topOnGestureHandlerStateChange:{registrationName:"onGestureHandlerStateChange"}},Zi={onGestureHandlerEvent:{registrationName:"onGestureHandlerEvent"},onGestureHandlerStateChange:{registrationName:"onGestureHandlerStateChange"},...Ei()&&Q.OS==="android"&&rr};z.genericDirectEventTypes={...z.genericDirectEventTypes,...Zi};var pi;const le=(pi=z.getViewManagerConfig)==null?void 0:pi.call(z,"getConstants");le&&(le.genericDirectEventTypes={...le.genericDirectEventTypes,...Zi});const{setJSResponder:or=()=>{},clearJSResponder:ar=()=>{}}=z;z.setJSResponder=(i,t)=>{W.handleSetJSResponder(i,t),or(i,t)};z.clearJSResponder=()=>{W.handleClearJSResponder(),ar()};let hr=!0;function fi(i){const t=e=>Array.isArray(e)?e.some(s=>s&&s.current===null):e&&e.current===null;return t(i.simultaneousHandlers)||t(i.waitFor)}const cr={[c.UNDETERMINED]:void 0,[c.BEGAN]:"onBegan",[c.FAILED]:"onFailed",[c.CANCELLED]:"onCancelled",[c.ACTIVE]:"onActivated",[c.END]:"onEnded"},di=1;function Rt({name:i,allowedProps:t=[],config:e={},transformProps:s,customNativeProps:n=[]}){const o=class o extends I.Component{constructor(h){super(h);a(this,"handlerTag",-1);a(this,"onGestureHandlerEvent",h=>{var l,d,p,E;h.nativeEvent.handlerTag===this.handlerTag?typeof this.props.onGestureEvent=="function"&&((d=(l=this.props).onGestureEvent)==null||d.call(l,h)):(E=(p=this.props).onGestureHandlerEvent)==null||E.call(p,h)});a(this,"onGestureHandlerStateChange",h=>{var l,d,p,E;if(h.nativeEvent.handlerTag===this.handlerTag){typeof this.props.onHandlerStateChange=="function"&&((d=(l=this.props).onHandlerStateChange)==null||d.call(l,h));const g=h.nativeEvent.state,_=cr[g],P=_&&this.props[_];P&&typeof P=="function"&&P(h)}else(E=(p=this.props).onGestureHandlerStateChange)==null||E.call(p,h)});a(this,"refHandler",h=>{var p;this.viewNode=h;const l=I.Children.only(this.props.children),d=Ns()?(p=l.props)==null?void 0:p.ref:l==null?void 0:l.ref;d&&(typeof d=="function"?d(h):d.current=h)});a(this,"createGestureHandler",h=>{this.handlerTag=Ki(),this.config=h,W.createGestureHandler(i,this.handlerTag,h)});a(this,"attachGestureHandler",h=>{if(this.viewTag=h,Q.OS==="web")W.attachGestureHandler(this.handlerTag,h,Ut.JS_FUNCTION_OLD_API,this.propsRef);else{As(this.handlerTag,{onGestureEvent:this.onGestureHandlerEvent,onGestureStateChange:this.onGestureHandlerStateChange});const l=(()=>{var P,L;const d=(P=this.props)==null?void 0:P.onGestureEvent,p=d&&("current"in d||"workletEventHandler"in d),E=(L=this.props)==null?void 0:L.onHandlerStateChange,g=E&&("current"in E||"workletEventHandler"in E);return p||g?Ut.REANIMATED_WORKLET:d&&"__isNative"in d?Ut.NATIVE_ANIMATED_EVENT:Ut.JS_FUNCTION_OLD_API})();W.attachGestureHandler(this.handlerTag,h,l)}ce(),zt(()=>{Qt.gestureHandlerWillMount(this)})});a(this,"updateGestureHandler",h=>{this.config=h,W.updateGestureHandler(this.handlerTag,h),ce()});if(this.config={},this.propsRef=I.createRef(),this.isMountedRef=I.createRef(),this.state={allowTouches:hr},h.id){if(Vt[h.id]!==void 0)throw new Error(`Handler with ID "${h.id}" already registered`);Vt[h.id]=this.handlerTag}}componentDidMount(){const h=this.props;if(this.isMountedRef.current=!0,fi(h)&&zt(()=>{this.update(di)}),this.createGestureHandler(ae(s?s(this.props):this.props,[...t,...n],e)),!this.viewNode)throw new Error(`[Gesture Handler] Failed to obtain view for ${o.displayName}. Note that old API doesn't support functional components.`);this.attachGestureHandler(yt(this.viewNode))}componentDidUpdate(){const h=yt(this.viewNode);this.viewTag!==h&&this.attachGestureHandler(h),this.update(di)}componentWillUnmount(){var l;(l=this.inspectorToggleListener)==null||l.remove(),this.isMountedRef.current=!1,Q.OS!=="web"&&Cs(this.handlerTag),W.dropGestureHandler(this.handlerTag),ce();const h=this.props.id;h&&delete Vt[h],Qt.gestureHandlerWillUnmount(this)}update(h){if(!this.isMountedRef.current)return;const l=this.props;if(fi(l)&&h>0)zt(()=>{this.update(h-1)});else{const d=ae(s?s(this.props):this.props,[...t,...n],e);gi(this.config,d)||this.updateGestureHandler(d)}}setNativeProps(h){const l={...this.props,...h},d=ae(s?s(l):l,[...t,...n],e);this.updateGestureHandler(d)}render(){let h=this.onGestureHandlerEvent;const{onGestureEvent:l,onGestureHandlerEvent:d}=this.props;if(l&&typeof l!="function"){if(d)throw new Error("Nesting touch handlers with native animated driver is not supported yet");h=l}else if(d&&typeof d!="function")throw new Error("Nesting touch handlers with native animated driver is not supported yet");let p=this.onGestureHandlerStateChange;const{onHandlerStateChange:E,onGestureHandlerStateChange:g}=this.props;if(E&&typeof E!="function"){if(g)throw new Error("Nesting touch handlers with native animated driver is not supported yet");p=E}else if(g&&typeof g!="function")throw new Error("Nesting touch handlers with native animated driver is not supported yet");const _={onGestureHandlerEvent:this.state.allowTouches?h:void 0,onGestureHandlerStateChange:this.state.allowTouches?p:void 0};this.propsRef.current=_;let P=null;try{P=I.Children.only(this.props.children)}catch{throw new Error(Ne(`${i} got more than one view as a child. If you want the gesture to work on multiple views, wrap them with a common parent and attach the gesture to that view.`))}let L=P.props.children;return I.cloneElement(P,{ref:this.refHandler,collapsable:!1,...ee()?{handlerType:i,handlerTag:this.handlerTag,enabled:this.props.enabled}:{},testID:this.props.testID??P.props.testID,..._},L)}};a(o,"displayName",i),a(o,"contextType",er);let r=o;return r}const Qi=["maxDurationMs","maxDelayMs","numberOfTaps","maxDeltaX","maxDeltaY","maxDist","minPointers"],lr="TapGestureHandler";Rt({name:lr,allowedProps:[...St,...Qi],config:{shouldCancelWhenOutside:!0}});const ur=["minForce","maxForce","feedbackOnActivation"];class ts extends te.Component{componentDidMount(){console.warn(Ne("ForceTouchGestureHandler is not available on this platform. Please use ForceTouchGestureHandler.forceTouchAvailable to conditionally render other components that would provide a fallback behavior specific to your usecase"))}render(){return this.props.children}}a(ts,"forceTouchAvailable",!1);const fr=ts;fr.forceTouchAvailable=!1;const es=["minDurationMs","maxDist","numberOfPointers"],dr="LongPressGestureHandler";Rt({name:dr,allowedProps:[...St,...es],config:{shouldCancelWhenOutside:!0}});const is=["activeOffsetY","activeOffsetX","failOffsetY","failOffsetX","minDist","minVelocity","minVelocityX","minVelocityY","minPointers","maxPointers","avgTouches","enableTrackpadTwoFingerGesture","activateAfterLongPress"],ss=["activeOffsetYStart","activeOffsetYEnd","activeOffsetXStart","activeOffsetXEnd","failOffsetYStart","failOffsetYEnd","failOffsetXStart","failOffsetXEnd"],pr="PanGestureHandler";Rt({name:pr,allowedProps:[...St,...is],config:{},transformProps:Er,customNativeProps:ss});function vr(i){const t={...i};return i.activeOffsetX!==void 0&&(delete t.activeOffsetX,Array.isArray(i.activeOffsetX)?(t.activeOffsetXStart=i.activeOffsetX[0],t.activeOffsetXEnd=i.activeOffsetX[1]):i.activeOffsetX<0?t.activeOffsetXStart=i.activeOffsetX:t.activeOffsetXEnd=i.activeOffsetX),i.activeOffsetY!==void 0&&(delete t.activeOffsetY,Array.isArray(i.activeOffsetY)?(t.activeOffsetYStart=i.activeOffsetY[0],t.activeOffsetYEnd=i.activeOffsetY[1]):i.activeOffsetY<0?t.activeOffsetYStart=i.activeOffsetY:t.activeOffsetYEnd=i.activeOffsetY),i.failOffsetX!==void 0&&(delete t.failOffsetX,Array.isArray(i.failOffsetX)?(t.failOffsetXStart=i.failOffsetX[0],t.failOffsetXEnd=i.failOffsetX[1]):i.failOffsetX<0?t.failOffsetXStart=i.failOffsetX:t.failOffsetXEnd=i.failOffsetX),i.failOffsetY!==void 0&&(delete t.failOffsetY,Array.isArray(i.failOffsetY)?(t.failOffsetYStart=i.failOffsetY[0],t.failOffsetYEnd=i.failOffsetY[1]):i.failOffsetY<0?t.failOffsetYStart=i.failOffsetY:t.failOffsetYEnd=i.failOffsetY),t}function Er(i){return vr(i)}const ns=["numberOfPointers","direction"],gr="FlingGestureHandler";Rt({name:gr,allowedProps:[...St,...ns],config:{}});const rs=["shouldActivateOnStart","disallowInterruption"],os=[...St,...rs],Tr="NativeViewGestureHandler",mr=Rt({name:Tr,allowedProps:os,config:{}}),Pr=[...os,"onGestureHandlerEvent","onGestureHandlerStateChange"];function kt(i,t={}){var s;const e=I.forwardRef((n,r)=>{const{gestureHandlerProps:o,childProps:u}=Object.keys(n).reduce((l,d)=>(Pr.includes(d)?l.gestureHandlerProps[d]=n[d]:l.childProps[d]=n[d],l),{gestureHandlerProps:{...t},childProps:{enabled:n.enabled,hitSlop:n.hitSlop,testID:n.testID}}),f=I.useRef(null),h=I.useRef(null);return I.useImperativeHandle(r,()=>{const l=h.current;return f.current&&l?(f.current.handlerTag=l.handlerTag,f.current):null},[f,h]),$t.jsx(mr,{...o,ref:h,children:$t.jsx(i,{...u,ref:f})})});return e.displayName=(i==null?void 0:i.displayName)||((s=i==null?void 0:i.render)==null?void 0:s.name)||typeof i=="string"&&i||"ComponentWrapper",e}const R={UNDEFINED:0,BEGAN:1,START:2,UPDATE:3,CHANGE:4,END:5,FINALIZE:6,TOUCHES_DOWN:7,TOUCHES_MOVE:8,TOUCHES_UP:9,TOUCHES_CANCELLED:10};class Ir{}let Nr=0;class as extends Ir{constructor(){super();a(this,"gestureId",-1);a(this,"handlerTag",-1);a(this,"handlerName","");a(this,"config",{});a(this,"handlers",{gestureId:-1,handlerTag:-1,isWorklet:[]});this.gestureId=Nr++,this.handlers.gestureId=this.gestureId}addDependency(e,s){const n=this.config[e];this.config[e]=n?Array().concat(n,s):[s]}withRef(e){return this.config.ref=e,this}isWorklet(e){return e.__workletHash!==void 0}onBegin(e){return this.handlers.onBegin=e,this.handlers.isWorklet[R.BEGAN]=this.isWorklet(e),this}onStart(e){return this.handlers.onStart=e,this.handlers.isWorklet[R.START]=this.isWorklet(e),this}onEnd(e){return this.handlers.onEnd=e,this.handlers.isWorklet[R.END]=this.isWorklet(e),this}onFinalize(e){return this.handlers.onFinalize=e,this.handlers.isWorklet[R.FINALIZE]=this.isWorklet(e),this}onTouchesDown(e){return this.config.needsPointerData=!0,this.handlers.onTouchesDown=e,this.handlers.isWorklet[R.TOUCHES_DOWN]=this.isWorklet(e),this}onTouchesMove(e){return this.config.needsPointerData=!0,this.handlers.onTouchesMove=e,this.handlers.isWorklet[R.TOUCHES_MOVE]=this.isWorklet(e),this}onTouchesUp(e){return this.config.needsPointerData=!0,this.handlers.onTouchesUp=e,this.handlers.isWorklet[R.TOUCHES_UP]=this.isWorklet(e),this}onTouchesCancelled(e){return this.config.needsPointerData=!0,this.handlers.onTouchesCancelled=e,this.handlers.isWorklet[R.TOUCHES_CANCELLED]=this.isWorklet(e),this}enabled(e){return this.config.enabled=e,this}shouldCancelWhenOutside(e){return this.config.shouldCancelWhenOutside=e,this}hitSlop(e){return this.config.hitSlop=e,this}activeCursor(e){return this.config.activeCursor=e,this}mouseButton(e){return this.config.mouseButton=e,this}runOnJS(e){return this.config.runOnJS=e,this}simultaneousWithExternalGesture(...e){for(const s of e)this.addDependency("simultaneousWith",s);return this}requireExternalGestureToFail(...e){for(const s of e)this.addDependency("requireToFail",s);return this}blocksExternalGesture(...e){for(const s of e)this.addDependency("blocksHandlers",s);return this}withTestId(e){return this.config.testId=e,this}cancelsTouchesInView(e){return this.config.cancelsTouchesInView=e,this}initialize(){this.handlerTag=Ki(),this.handlers={...this.handlers,handlerTag:this.handlerTag},this.config.ref&&(this.config.ref.current=this)}toGestureArray(){return[this]}prepare(){}get shouldUseReanimated(){return this.config.runOnJS!==!0&&!this.handlers.isWorklet.includes(!1)&&!Os()}}class Or extends as{onUpdate(t){return this.handlers.onUpdate=t,this.handlers.isWorklet[R.UPDATE]=this.isWorklet(t),this}onChange(t){return this.handlers.onChange=t,this.handlers.isWorklet[R.CHANGE]=this.isWorklet(t),this}manualActivation(t){return this.config.manualActivation=t,this}}const Ar=ds(ms);let X;try{X=Ar}catch{X=void 0}X!=null&&X.useSharedValue||(X=void 0);X!==void 0&&!X.setGestureState&&(X.setGestureState=()=>{"worklet";console.warn(Ne("Please use newer version of react-native-reanimated in order to control state of the gestures."))});const Cr=["hoverEffect"];function yr(i,t){"worklet";let e;return t===void 0?e={changeX:i.x,changeY:i.y}:e={changeX:i.x-t.x,changeY:i.y-t.y},{...i,...e}}class xr extends Or{constructor(){super();a(this,"config",{});this.handlerName="HoverGestureHandler"}effect(e){return this.config.hoverEffect=e,this}onChange(e){return this.handlers.changeEventCalculator=yr,super.onChange(e)}}const Lr=[...Xs,...Qi,...is,...ss,...es,...ur,...ns,...Cr,...rs];function Sr(i){var t;return typeof i=="number"?i:i instanceof as?i.handlerTag:((t=i.current)==null?void 0:t.handlerTag)??-1}function ue(i){var t;return((t=i==null?void 0:i.map(Sr))==null?void 0:t.filter(e=>e>0))??[]}function Xr(i){const t=ue(i.config.requireToFail),e=ue(i.config.simultaneousWith),s=ue(i.config.blocksHandlers);return{waitFor:t,simultaneousHandlers:e,blocksHandlers:s}}function Gr(i){}function Fr(){const[i,t]=I.useState(!1);return I.useCallback(()=>{t(!i)},[i,t])}function Yr(){return I.useRef({onGestureHandlerEvent:i=>{jt(i.nativeEvent)},onGestureHandlerStateChange:i=>{jt(i.nativeEvent)}})}const Dr=I.forwardRef((i,t)=>$t.jsx(vi,{ref:t,accessibilityRole:"button",...i})),_r=kt(Dr,{shouldCancelWhenOutside:!1,shouldActivateOnStart:!1});let fe=null;class hs extends I.Component{constructor(e){super(e);a(this,"handleEvent",({nativeEvent:e})=>{const{state:s,oldState:n,pointerInside:r}=e,o=r&&s===c.ACTIVE;o!==this.lastActive&&this.props.onActiveStateChange&&this.props.onActiveStateChange(o),!this.longPressDetected&&n===c.ACTIVE&&s!==c.CANCELLED&&this.lastActive&&this.props.onPress&&this.props.onPress(r),!this.lastActive&&s===(Q.OS!=="android"?c.ACTIVE:c.BEGAN)&&r?(this.longPressDetected=!1,this.props.onLongPress&&(this.longPressTimeout=setTimeout(this.onLongPress,this.props.delayLongPress))):s===c.ACTIVE&&!r&&this.longPressTimeout!==void 0?(clearTimeout(this.longPressTimeout),this.longPressTimeout=void 0):this.longPressTimeout!==void 0&&(s===c.END||s===c.CANCELLED||s===c.FAILED)&&(clearTimeout(this.longPressTimeout),this.longPressTimeout=void 0),this.lastActive=o});a(this,"onLongPress",()=>{var e,s;this.longPressDetected=!0,(s=(e=this.props).onLongPress)==null||s.call(e)});a(this,"onHandlerStateChange",e=>{var s,n;(n=(s=this.props).onHandlerStateChange)==null||n.call(s,e),this.handleEvent(e)});a(this,"onGestureEvent",e=>{var s,n;(n=(s=this.props).onGestureEvent)==null||n.call(s,e),this.handleEvent(e)});this.lastActive=!1,this.longPressDetected=!1}render(){const{rippleColor:e,style:s,...n}=this.props;fe===null&&(fe=Ei());const r=fe?e:vs(e??void 0);return $t.jsx(_r,{ref:this.props.innerRef,rippleColor:r,style:[s,Q.OS==="ios"&&{cursor:void 0}],...n,onGestureEvent:this.onGestureEvent,onHandlerStateChange:this.onHandlerStateChange})}}a(hs,"defaultProps",{delayLongPress:600});ps.createAnimatedComponent(hs);M.create({underlay:{position:"absolute",left:0,right:0,bottom:0,top:0}});kt(Ts,{disallowInterruption:!1});const Ur=kt(gs,{shouldCancelWhenOutside:!1,shouldActivateOnStart:!0,disallowInterruption:!0}),Vr=kt(Es);kt(vi);M.create({container:{overflow:"hidden"},leftActions:{...M.absoluteFillObject,flexDirection:Fe.isRTL?"row-reverse":"row"},rightActions:{...M.absoluteFillObject,flexDirection:Fe.isRTL?"row":"row-reverse"}});ee();M.create({drawerContainer:{...M.absoluteFillObject,zIndex:1001,flexDirection:"row"},containerInFront:{...M.absoluteFillObject,zIndex:1002},containerOnBack:{...M.absoluteFillObject},main:{flex:1,zIndex:0,overflow:"hidden"},overlay:{...M.absoluteFillObject,zIndex:1e3}});tr();export{Lr as A,as as B,R as C,Ds as G,xr as H,Qt as M,X as R,Ur as S,Vr as T,c as a,xt as b,W as c,Ut as d,Xr as e,ae as f,zt as g,Fr as h,Hr as i,yt as j,nr as k,er as l,Yr as m,Or as n,Ir as o,Rr as r,ce as s,Ne as t,kr as u,Gr as v};
