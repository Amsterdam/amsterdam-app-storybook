import{be as ye,j as e,aw as ne,aB as xe,ax as $,aC as se,bf as ie,bg as v,aD as je,aE as ve,bh as be,bi as G,aP as ae,t as re,bj as V,ab as Pe,r as De,bk as W,bl as _e,bm as b,bn as Se,bo as Z,bp as z,V as C,bq as Te,br as we,bs as oe,aK as le,a0 as Ce,n as K,av as ke,o as O,f as Ae,a as Ee,aU as P,q as Me,R as Ve,B as q,a6 as j,aJ as Ie,aa as Be,aZ as Le,ac as Oe,e as qe}from"./iframe-Y99SeN-h.js";import{P as Re}from"./ParkingSessionFormProvider-Cdnrqpyh.js";import{T as Ge,a as I,D as Ue,P as He}from"./Track-odv31-J-.js";import{f as $e}from"./formatTimeRangeToDisplay-C5mscCif.js";import{f as We}from"./formatTimeToDisplay-BcMj3ovy.js";import{u as Ze}from"./useCurrentParkingPermit.web-_tSlU7EX.js";import"./preload-helper-Dp1pzeXC.js";import"./formatDate-CYHa0u8i.js";import"./permit.mock-RN_L1mzj.js";var w=(t=>(t.Success="success",t.Warning="warning",t.Error="error",t))(w||{}),g=(t=>(t.Light="light",t.Medium="medium",t.Heavy="heavy",t.Soft="soft",t.Rigid="rigid",t))(g||{});const B={[w.Success]:[40,100,40],[w.Warning]:[50,100,50],[w.Error]:[60,100,60,100,60],[g.Light]:[40],[g.Medium]:[50],[g.Heavy]:[60],[g.Soft]:[35],[g.Rigid]:[45],selection:[50]};function L(){return typeof window<"u"&&"navigator"in window&&"vibrate"in navigator}const D={async notificationAsync(t){L()&&navigator.vibrate(B[t])},async impactAsync(t){L()&&navigator.vibrate(B[t])},async selectionAsync(){L()&&navigator.vibrate(B.selection)}};async function ze(t=g.Medium){if(!(D!=null&&D.impactAsync))throw new ye("Haptic","impactAsync");await D.impactAsync(t)}const Ke=()=>e.jsxs(ne,{fill:"none",height:160,viewBox:"0 0 160 160",width:160,children:[e.jsxs(xe,{clipPath:"url(#clip0_4356_5678)",children:[e.jsx($,{d:"M143.86 78.5C143.86 42.8776 114.982 14 79.3599 14V9C117.744 9 148.86 40.1162 148.86 78.5C148.86 116.884 117.744 148 79.3599 148V143C114.982 143 143.86 114.122 143.86 78.5Z",fill:"url(#paint0_linear_4356_5678)"}),e.jsx($,{d:"M69 145.86L84.5412 136.888L84.5412 154.833L69 145.86Z",fill:"#00A03C"})]}),e.jsxs(se,{children:[e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"paint0_linear_4356_5678",x1:"81.0001",x2:"79.3599",y1:"43.5",y2:"138",children:[e.jsx(v,{stopColor:"#00A03C",stopOpacity:0}),e.jsx(v,{offset:1,stopColor:"#00A03C"})]}),e.jsx(je,{id:"clip0_4356_5678",children:e.jsx(ve,{fill:"white",height:160,width:160})})]})]}),{width:Ne,height:Ye}=be.get("window"),a=Math.min(Math.min(Ye,Ne)*.7,350),N=16,Je=G.createAnimatedComponent(ae),Xe=G.createAnimatedComponent(ne),Y=t=>{"worklet";const r=Math.round(t/6),d=Math.floor(r/60),n=r%60;return{hours:d,minutes:n}},_=(t,r)=>{"worklet";return t*360+r*6},J=(t,r,d,n,s,l)=>{"worklet";return t<d||t===d&&r<n?{hours:d,minutes:n,clamped:!0}:t>s||t===s&&r>l?{hours:s,minutes:l,clamped:!0}:{hours:t,minutes:r,clamped:!1}},R=({onChange:t,maxHours:r,maxMinutes:d,minHours:n=0,minMinutes:s=0,initialHours:l=0,initialMinutes:o=0})=>{const i=V(_(l,o)),{value:p,enable:x,disable:k}=Pe(!1);De.useEffect(()=>{p||(i.value=W(_(l,o),{damping:10,stiffness:90,overshootClamping:!0}))},[l,o,i]);const c=V(0),u=V(0),A=_e.Pan().onStart(h=>{const m=a/2,f=a/2,y=h.x-m,E=h.y-f;c.value=Math.atan2(E,y),b(x)()}).onUpdate(h=>{const m=a/2,f=a/2,y=h.x-m,E=h.y-f,M=(Math.atan2(E,y)-c.value)*180/Math.PI,{hours:fe,minutes:ge}=Y(i.value+M),{hours:U,minutes:H,clamped:pe}=J(fe,ge,n,s,r??1/0,d??1/0);pe?i.value=_(U,H):i.value+=M,u.value=M,b(t)(U,H)}).onEnd(()=>{u.value>1&&(i.value=W(i.value+u.value*5,{damping:10,stiffness:90,overshootClamping:!0}));const{hours:h,minutes:m}=Y(i.value),{hours:f,minutes:y}=J(h,m,n,s,r??1/0,d??1/0);i.value=_(f,y),b(t)(f,y),b(k)()}),ce=Se(()=>({transform:[{rotate:`${i.value}deg`}]})),de=Z(()=>i.value>=360?0:Math.PI*a*(-1+i.value%360/360)),ue=z(()=>({strokeDashoffset:de.value})),me=Z(()=>i.value-90),he=z(()=>({transform:[{rotate:`${me.value}deg`}]}));return e.jsxs(C,{style:S.container,children:[e.jsxs(Xe,{animatedProps:he,height:a+20,style:S.progressBar,testID:"TimeDurationSpinner",width:a+20,children:[e.jsx(se,{children:e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"gradient",x1:"100%",x2:"0%",y1:"50%",y2:"50%",children:[e.jsx(v,{offset:"0%",stopColor:"#000000",stopOpacity:"1"}),e.jsx(v,{offset:"10%",stopColor:"#004699",stopOpacity:"1"}),e.jsx(v,{offset:"100%",stopColor:"#009DE6",stopOpacity:"1"})]})}),e.jsx(ae,{cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"#ddd",strokeWidth:10}),e.jsx(Je,{animatedProps:ue,cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"url(#gradient)",strokeDasharray:`${Math.PI*a}`,strokeLinecap:"round",strokeWidth:10})]}),e.jsx(Te,{gesture:A,children:e.jsxs(G.View,{style:[S.circle,ce],children:[Array.from({length:N}).map((h,m)=>{const f=360/N*m;return e.jsx(C,{style:[S.line,{transform:[{rotate:`${f}deg`},{translateY:-a/2+40}]}],testID:`TimeDurationSpinnerLine${m}`},m)}),l===0&&o===0&&e.jsx(we,{duration:5e3,children:e.jsx(Ke,{})})]})})]})},S=re.create({container:{height:a+20,width:a+20,justifyContent:"center",alignItems:"center"},circle:{width:a,height:a,borderRadius:a/2,justifyContent:"center",alignItems:"center"},progressBar:{position:"absolute"},line:{position:"absolute",width:2,height:20,backgroundColor:"#000"}});try{R.displayName="TimeDurationSpinner",R.__docgenInfo={description:"",displayName:"TimeDurationSpinner",props:{initialHours:{defaultValue:{value:"0"},description:"",name:"initialHours",required:!1,type:{name:"number"}},initialMinutes:{defaultValue:{value:"0"},description:"",name:"initialMinutes",required:!1,type:{name:"number"}},maxHours:{defaultValue:null,description:"",name:"maxHours",required:!1,type:{name:"number"}},maxMinutes:{defaultValue:null,description:"",name:"maxMinutes",required:!1,type:{name:"number"}},minHours:{defaultValue:{value:"0"},description:"",name:"minHours",required:!1,type:{name:"number"}},minMinutes:{defaultValue:{value:"0"},description:"",name:"minMinutes",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(hours: number, minutes: number) => void"}}}}}catch{}const X=({currentPermit:t,minimumEndTime:r})=>{const{watch:d}=oe(),n=d("startTime"),{field:{value:s,onChange:l}}=le({name:"endTime"}),o=t.max_session_length_in_days===1?n.endOf("day"):void 0,i=r??n,p=i.diff(n,"hour"),x=i.diff(n.add(p,"hours"),"minute"),{isPortrait:k}=Ce();return e.jsxs(Ge,{align:"around",children:[e.jsxs(K,{gutter:"lg",halign:"center",children:[e.jsxs(ke,{children:[e.jsx(O,{level:"h1",text:$e(n,s??n),textAlign:"center"}),e.jsx(O,{level:"h5",text:"Parkeertijd",textAlign:"center"})]}),e.jsxs(Ae,{children:[e.jsx(Ee,{name:"clock",size:"sm",testID:"ParkingSessionEndTimeIcon"})," ","Eindtijd"," ",We(s??n,{includeHoursLabel:!0})]})]}),e.jsx(P,{height:"lg"}),e.jsxs(I,{testID:"ParkingSessionDurationTimePickerTabs",children:[!!k&&e.jsx(I.Tab,{accessibilityLabel:"Parkeertijd kiezen",label:"Parkeertijd",children:e.jsxs(K,{halign:"center",children:[e.jsx(P,{height:"xl"}),e.jsx(R,{initialHours:(s==null?void 0:s.diff(n,"hour"))??0,initialMinutes:s?s.diff(n,"minute")-s.diff(n,"hour")*60:0,maxHours:t.max_session_length_in_days===1?n.endOf("day").diff(n,"hour"):void 0,maxMinutes:t.max_session_length_in_days===1?n.endOf("day").diff(n,"minutes")-n.endOf("day").diff(n,"hour")*60:void 0,minHours:p,minMinutes:x,onChange:(c,u)=>{const A=n.add(c,"hour").add(u,"minute");l(A),Me.OS==="ios"&&ze(g.Light)}}),e.jsxs(C,{style:Q.floatingButtons,children:[e.jsx(P,{height:"md"}),e.jsxs(Ve,{align:"between",grow:1,children:[e.jsx(q,{accessibilityLabel:"Verminder parkeertijd met 5 minuten",label:"-5 min",onPress:()=>{const c=s?s.add(-5,"minute"):void 0,u=i&&(c!=null&&c.isBefore(i))?i:c;l(u)},testID:"ParkingSessionDurationDecreaseButton",variant:"tertiary"}),e.jsx(q,{accessibilityLabel:"Verleng parkeertijd met 5 minuten",label:"+5 min",onPress:()=>{const c=s?s.add(5,"minute"):n.add(5,"minute"),u=o&&c.isAfter(o)?o:c;l(u)},testID:"ParkingSessionDurationIncreaseButton",variant:"tertiary"})]})]}),e.jsx(P,{height:"lg"})]})}),e.jsx(I.Tab,{accessibilityLabel:"Eindtijd kiezen",label:"Eindtijd",children:e.jsx(Ue,{date:(s==null?void 0:s.toDate())??n.toDate(),is24hourSource:"locale",locale:"nl-NL",maximumDate:o==null?void 0:o.toDate(),minimumDate:i.toDate(),mode:"time",onDateChange:c=>{l(j(c))},style:Q.centerSelf,theme:"light"})})]})]})},Q=re.create({centerSelf:{alignSelf:"center"},floatingButtons:{position:"absolute",width:"100%"}});try{X.displayName="ParkingSessionDurationTimePicker",X.__docgenInfo={description:"",displayName:"ParkingSessionDurationTimePicker",props:{currentPermit:{defaultValue:null,description:"",name:"currentPermit",required:!0,type:{name:"ParkingPermit"}},minimumEndTime:{defaultValue:null,description:"",name:"minimumEndTime",required:!1,type:{name:"Dayjs"}}}}}catch{}const Qe=()=>{const{watch:t}=oe(),r=t("startTime"),{field:{value:d,onChange:n}}=le({name:"endTime"}),{close:s}=Ie(),l=Ze(),o=Be(),{height:i,visible:p}=Le(),{max_session_length_in_days:x}=l;return(o==null?void 0:o.scope)===Oe.visitor?j.max(j(),j(t("originalEndTime"))):j(),e.jsxs(qe,{grow:!0,children:[e.jsxs(e.Fragment,{children:[e.jsx(O,{level:"h5",text:"Kies eindtijd en datum",textAlign:"center"}),e.jsx(He,{dateTime:d??r,maxDateTime:r.add(x,"day").endOf("day"),setDateTime:n})]}),e.jsx(q,{label:"Gereed",onPress:s,testID:"ParkingSessionEndTimeBottomSheetContentDoneButton"}),!!p&&e.jsx(C,{style:{height:i}})]})},dt={component:Qe,decorators:t=>e.jsx(Re,{children:e.jsx(t,{})})},T={args:{}};var F,ee,te;T.parameters={...T.parameters,docs:{...(F=T.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {}
}`,...(te=(ee=T.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};const ut=["Default"];export{T as Default,ut as __namedExportsOrder,dt as default};
