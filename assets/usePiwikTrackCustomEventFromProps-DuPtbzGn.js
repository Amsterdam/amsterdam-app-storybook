import{J as he,K as te,n as X,L as be,M as _e,E as $,r as G,N as pe,O as Se,f as Oe}from"./iframe-B7i7tXCx.js";import{u as ve}from"./useTrackException-CaXwDTa1.js";const Y=he(),je=e=>{if(e)return Object.keys(e).filter(r=>e[r]!==void 0).reduce((r,s)=>({...r,[s]:e[s]}),{})},De={[te.appVersion]:_e,[te.appVersionWithBuild]:be},Ce=(e,r=!1)=>r?Object.keys(e).reduce((s,o)=>{const c=te[o]??X[o];return c&&(s[c]=e[o]),s},{}):e,T=(e,r=!1)=>je(Ce({...De,...e},r)),Pe=e=>{const r={};return e&&Object.keys(e).forEach(s=>{if(typeof e[s]!="string"&&typeof e[s]!="number")return;const o=s==="id"?"contentId":s;Object.values(X).includes(o)&&(r[X[o]]=e[s].toString())}),{appInsights:T(r,!0),piwik:T(r,!1)}},se=e=>{const r=(e==null?void 0:e.screenTitle)??(e==null?void 0:e.screenHeaderTitle);if(r)return decodeURIComponent(r)};var w={},U={},q={},ee={},L={},oe;function ye(){if(oe)return L;oe=1,Object.defineProperty(L,"__esModule",{value:!0}),L.encodeString=s;const e=Array.from({length:256},(o,c)=>"%"+((c<16?"0":"")+c.toString(16)).toUpperCase()),r=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function s(o){const c=o.length;if(c===0)return"";let a="",i=0,t=0;e:for(;t<c;t++){let n=o.charCodeAt(t);for(;n<128;){if(r[n]!==1&&(i<t&&(a+=o.slice(i,t)),i=t+1,a+=e[n]),++t===c)break e;n=o.charCodeAt(t)}if(i<t&&(a+=o.slice(i,t)),n<2048){i=t+1,a+=e[192|n>>6]+e[128|n&63];continue}if(n<55296||n>=57344){i=t+1,a+=e[224|n>>12]+e[128|n>>6&63]+e[128|n&63];continue}if(++t,t>=c)throw new Error("URI malformed");const l=o.charCodeAt(t)&1023;i=t+1,n=65536+((n&1023)<<10|l),a+=e[240|n>>18]+e[128|n>>12&63]+e[128|n>>6&63]+e[128|n&63]}return i===0?o:i<c?a+o.slice(i):a}return L}var ae;function ie(){return ae||(ae=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=e.defaultShouldSerializeObject=e.defaultValueSerializer=void 0;const r=ye(),s=a=>{switch(typeof a){case"string":return(0,r.encodeString)(a);case"bigint":case"boolean":return""+a;case"number":if(Number.isFinite(a))return a<1e21?""+a:(0,r.encodeString)(""+a);break}return a instanceof Date?(0,r.encodeString)(a.toISOString()):""};e.defaultValueSerializer=s;const o=a=>a instanceof Date;e.defaultShouldSerializeObject=o;const c=a=>a;e.defaultOptions={nesting:!0,nestingSyntax:"dot",arrayRepeat:!1,arrayRepeatSyntax:"repeat",delimiter:38,valueDeserializer:c,valueSerializer:e.defaultValueSerializer,keyDeserializer:c,shouldSerializeObject:e.defaultShouldSerializeObject}}(ee)),ee}var ce;function me(){if(ce)return q;ce=1,Object.defineProperty(q,"__esModule",{value:!0}),q.getDeepObject=o,q.stringifyObject=l;const e=ie(),r=ye();function s(u){return u==="__proto__"||u==="constructor"||u==="prototype"}function o(u,d,y,p,m){if(s(d))return u;const j=u[d];return typeof j=="object"&&j!==null?j:!p&&(m||typeof y=="number"||typeof y=="string"&&y*0===0&&y.indexOf(".")===-1)?u[d]=[]:u[d]={}}const c=20,a="[]",i="[",t="]",n=".";function l(u,d,y=0,p,m){const{nestingSyntax:j=e.defaultOptions.nestingSyntax,arrayRepeat:C=e.defaultOptions.arrayRepeat,arrayRepeatSyntax:E=e.defaultOptions.arrayRepeatSyntax,nesting:V=e.defaultOptions.nesting,delimiter:D=e.defaultOptions.delimiter,valueSerializer:N=e.defaultOptions.valueSerializer,shouldSerializeObject:F=e.defaultOptions.shouldSerializeObject}=d,P=typeof D=="number"?String.fromCharCode(D):D,R=m===!0&&C,v=j==="dot"||j==="js"&&!m;if(y>c)return"";let h="",b=!0,S=!1;for(const f in u){const O=u[f];if(O===void 0)continue;let g;p?(g=p,R?E==="bracket"&&(g+=a):v?(g+=n,g+=f):(g+=i,g+=f,g+=t)):g=f,b||(h+=P),typeof O=="object"&&O!==null&&!F(O)?(S=O.pop!==void 0,(V||C&&S)&&(h+=l(O,d,y+1,g,S))):(h+=(0,r.encodeString)(g),h+="=",h+=N(O,f)),b&&(b=!1)}return h}return q}var Q={},le;function Re(){if(le)return Q;le=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.decodeURIComponent=o;const e=12,r=0,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function o(i){let t=i.indexOf("%");if(t===-1)return i;const n=i.length;let l="",u=0,d=0,y=t,p=e;for(;t>-1&&t<n;){const m=a(i[t+1],4),j=a(i[t+2],0),C=m|j,E=s[C];if(p=s[256+p+E],d=d<<6|C&s[364+E],p===e)l+=i.slice(u,y),l+=d<=65535?String.fromCharCode(d):String.fromCharCode(55232+(d>>10),56320+(d&1023)),d=0,u=t+3,t=y=i.indexOf("%",u);else{if(p===r)return null;if(t+=3,t<n&&i.charCodeAt(t)===37)continue;return null}}return l+i.slice(u)}const c={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function a(i,t){const n=c[i];return n===void 0?255:n<<t}return Q}var ue;function ke(){if(ue)return U;ue=1,Object.defineProperty(U,"__esModule",{value:!0}),U.numberValueDeserializer=U.numberKeyDeserializer=void 0,U.parse=n;const e=me(),r=ie(),s=Re(),o=l=>{const u=Number(l);return Number.isNaN(u)?l:u};U.numberKeyDeserializer=o;const c=l=>{const u=Number(l);return Number.isNaN(u)?l:u};U.numberValueDeserializer=c;const a=/\+/g,i=function(){};i.prototype=Object.create(null);function t(l,u,d,y,p){let m=l.substring(u,d);return y&&(m=m.replace(a," ")),p&&(m=(0,s.decodeURIComponent)(m)||m),m}function n(l,u){const{valueDeserializer:d=r.defaultOptions.valueDeserializer,keyDeserializer:y=r.defaultOptions.keyDeserializer,arrayRepeatSyntax:p=r.defaultOptions.arrayRepeatSyntax,nesting:m=r.defaultOptions.nesting,arrayRepeat:j=r.defaultOptions.arrayRepeat,nestingSyntax:C=r.defaultOptions.nestingSyntax,delimiter:E=r.defaultOptions.delimiter}=u??{},V=typeof E=="string"?E.charCodeAt(0):E,D=C==="js",N=new i;if(typeof l!="string")return N;const F=l.length;let P="",R=-1,v=-1,h=-1,b=N,S,f="",O="",g=!1,B=!1,k=!1,Z=!1,I=!1,K=!1,z=0,M=-1,x=-1,ne=-1;for(let _=0;_<F+1;_++){if(z=_!==F?l.charCodeAt(_):V,z===V){if(K=v>R,K||(v=_),h!==v-1&&(O=t(l,h+1,M>-1?M:v,k,g),f=y(O),S!==void 0&&(b=(0,e.getDeepObject)(b,S,f,D&&I,void 0))),K||f!==""){K&&(P=l.slice(v+1,_),Z&&(P=P.replace(a," ")),B&&(P=(0,s.decodeURIComponent)(P)||P));const A=d(P,f);if(j){const H=b[f];H===void 0?M>-1?b[f]=[A]:b[f]=A:H.pop?H.push(A):b[f]=[H,A]}else b[f]=A}P="",R=_,v=_,g=!1,B=!1,k=!1,Z=!1,I=!1,M=-1,h=_,b=N,S=void 0,f=""}else z===93?(j&&p==="bracket"&&ne===91&&(M=x),m&&(C==="index"||D)&&v<=R&&(h!==x&&(O=t(l,h+1,_,k,g),f=y(O),S!==void 0&&(b=(0,e.getDeepObject)(b,S,f,void 0,void 0)),S=f,k=!1,g=!1),h=_,I=!1)):z===46?m&&(C==="dot"||D)&&v<=R&&(h!==x&&(O=t(l,h+1,_,k,g),f=y(O),S!==void 0&&(b=(0,e.getDeepObject)(b,S,f,D)),S=f,k=!1,g=!1),I=!0,h=_):z===91?m&&(C==="index"||D)&&v<=R&&(h!==x&&(O=t(l,h+1,_,k,g),f=y(O),D&&S!==void 0&&(b=(0,e.getDeepObject)(b,S,f,D)),S=f,k=!1,g=!1,I=!1),h=_):z===61?v<=R?v=_:B=!0:z===43?v>R?Z=!0:k=!0:z===37&&(v>R?B=!0:g=!0);x=_,ne=z}return N}return U}var J={},fe;function ze(){if(fe)return J;fe=1,Object.defineProperty(J,"__esModule",{value:!0}),J.stringify=r;const e=me();function r(s,o){if(s===null||typeof s!="object")return"";const c=o??{};return(0,e.stringifyObject)(s,c)}return J}var de;function Ee(){return de||(de=1,function(e){var r=w&&w.__createBinding||(Object.create?function(a,i,t,n){n===void 0&&(n=t);var l=Object.getOwnPropertyDescriptor(i,t);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(a,n,l)}:function(a,i,t,n){n===void 0&&(n=t),a[n]=i[t]}),s=w&&w.__exportStar||function(a,i){for(var t in a)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&r(i,a,t)};Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=e.parse=void 0;var o=ke();Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return o.parse}});var c=ze();Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.stringify}}),s(ie(),e)}(w)),w}var ge=Ee();const Ue=e=>{if(!e)return"";const r={};return Object.keys(ge.parse(e)).forEach(s=>{r[s]="___"}),`?${ge.stringify(r)}`},Te=e=>e?`#${e.split("/").map(()=>"___").join("/")}`:"",we=(e="")=>{const[r,s,...o]=e.split("#"),[c,a,...i]=r.split("?");if(o.length||i.length)return c;const t=Ue(a),n=Te(s);return`${c}${t}${n}`},W="useTrackEvents.ts",Ne=(e,r,s,o,c,a)=>({ready:!!o,trackCustomEvent:(i,t,n,l=r,u=void 0)=>{o&&o.trackCustomEvent(l,t,{path:c,customDimensions:T(n),value:u,name:i}).catch(()=>{e($.piwikTrackCustomEvent,W,{category:l,action:t,name:i,routeName:c,value:u})}),s.trackEvent({name:t,properties:{...T(n,!0),value:u,name:i,routeName:c,category:l}})},trackOutlink:(i,t)=>{const n=we(i);o&&o.trackOutlink(n,{...t,customDimensions:T({...t==null?void 0:t.customDimensions,[X.routeName]:c})}).catch(()=>{e($.piwikTrackOutlink,W,{url:n})}),s.trackEvent({name:"outlink",properties:{...T(t==null?void 0:t.customDimensions,!0),url:n,routeName:c,category:r}})},trackScreen:i=>{const t=i??c;if(!t)return;const{appInsights:n,piwik:l}=Pe(a);o&&o.trackScreen(t,{title:se(a),customDimensions:l}).catch(()=>{e($.piwikTrackScreen,W,{path:i})}),s.trackPageView({name:t},{...n,title:se(a)})},trackSearch:(i,t)=>{o&&o.trackSearch(i,{...t,customDimensions:T(t==null?void 0:t.customDimensions)}).catch(()=>{e($.piwikTrackSearch,W)}),s.trackEvent({name:"search",properties:{...T(t==null?void 0:t.customDimensions,!0),keyword:i,routeName:c,category:r}})}}),re=G.createContext(void 0);try{re.displayName="PiwikContext",re.__docgenInfo={description:"The PiwikContext contains the object with all methods, to be used via the usePiwik hook only.",displayName:"PiwikContext",props:{}}}catch{}const Ie=()=>{if(Y.isReady()){const e=Y.getRootState(),r=e==null?void 0:e.routes;if(r)for(let s=r.length-1;s>=0;s--){const o=pe[r[s].name];if(o)return o}}},Me=()=>{const e=G.useContext(re),r=Y.isReady()?Y.getCurrentRoute():void 0,s=Ie()??"general",o=Se(),c=ve();return G.useMemo(()=>Ne(c,s,o,e,r==null?void 0:r.name,(r==null?void 0:r.params)??{}),[e,c,s,o,r==null?void 0:r.name,r==null?void 0:r.params])},xe=e=>{const r=e.logName??e["logging-label"]??e.testID;return r||Oe("No name found in props"),r},Ve=({logAction:e,logCategory:r,logDimensions:s={},logValue:o,onEvent:c,testID:a,logName:i,"logging-label":t})=>{const{trackCustomEvent:n}=Me();return G.useCallback((l,{nameSuffix:u,dimensions:d={},action:y=e}={})=>{c==null||c(l);const p=xe({testID:a,logName:i,"logging-label":t});if(p){const m=u?`:${u}`:"";n(`${p}${m}`,y,{...s,...d},r,o)}},[e,r,s,i,o,c,t,a,n])};export{Me as a,Ie as g,ge as m,Ve as u};
