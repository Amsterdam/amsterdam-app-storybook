import{j as t}from"./jsx-runtime-DNHyKP0h.js";import{r as g}from"./index-B-xgG2PE.js";import{P as p}from"./Pressable-E4pHFvJS.js";import{B as u}from"./Badge-BQ5QvsHq.js";import{P as c}from"./PleaseWait-CocllK75.js";import{S as h}from"./SomethingWentWrong-Bl5ko8ed.js";import{C as x}from"./Column-BVTjdkRj.js";import{R as j}from"./Row-BWITOpr7.js";import{P as k}from"./Phrase-CeZFW5Sy.js";import{T as n}from"./Title-Dk0alyQI.js";import{u as v}from"./useNavigation-BdRzcVWJ.js";import{u as S}from"./useDispatch-jiStvVFn.js";import{u as D,a as I,b as _}from"./useGetParkingSessions-DxGqi6X8.js";import{P as R}from"./routes-CtH9nUKh.js";import{p as T}from"./service-Z4PadIg9.js";import{b as W}from"./types-C2OYdTo_.js";import{a}from"./dayjs-C6sMkNK9.js";const J=()=>{const{navigate:m}=v(),{parkingSessions:e,isLoading:l,isError:d,refetch:r}=D(W.planned);g.useEffect(()=>{e!=null&&e.some(s=>!s.ps_right_id)&&r()},[e,r]),I(r,e!=null&&e.some(s=>"is_paid"in s&&!s.is_paid)?15e3:0);const i=e!=null&&e.length?e.reduce((s,P)=>{const o=a(P.start_date_time);return o.isAfter(s)?s:o},a(e[0].start_date_time)):void 0,f=S();return _(()=>{f(T.util.invalidateTags(["ParkingSessions"]))},e!=null&&e.length?Math.max((i==null?void 0:i.endOf("minute").diff(a(),"milliseconds"))??0,3e4):0),l?t.jsx(c,{testID:"ParkingPermitSessionsPlannedPleaseWait"}):d?t.jsx(h,{testID:"ParkingPlannedSessionsSummarySomethingWentWrong"}):e!=null&&e.length?t.jsx(p,{accessibilityLabel:`${e.length} geplande parkeersessies`,onPress:()=>m(R.parkingPlannedSessions),testID:"ParkingPermitSessionsPlannedBadgeButton",children:t.jsxs(j,{gutter:"sm",children:[t.jsx(n,{color:"link",level:"h5",testID:"ParkingPermitSessionsPlannedTitle",text:"Gepland"}),t.jsx(u,{color:"info",testID:"ParkingPermitSessionsPlannedBadge",value:e.length})]})}):t.jsxs(x,{gutter:"sm",children:[t.jsx(n,{level:"h5",testID:"ParkingPermitSessionsPlannedTitle",text:"Gepland"}),t.jsx(k,{testID:"ParkingPermitSessionsPlannedNoPlannedPhrase",children:"Er zijn geen geplande parkeersessies."})]})};export{J as P};
