{"version":3,"file":"Alert.stories-0593486f.js","sources":["../../src/components/ui/feedback/Alert.types.ts","../../node_modules/@react-navigation/core/lib/module/useNavigation.js","../../src/hooks/navigation/useNavigation.ts","../../src/hooks/navigation/useBlurEffect.ts","../../src/components/ui/feedback/Alert.tsx"],"sourcesContent":["import {IconName} from '@/components/ui/media/iconPaths'\n\nexport enum AlertCloseType {\n  withButton = 'withButton',\n  withoutButton = 'withoutButton',\n}\n\nexport enum AlertVariant {\n  information = 'information',\n  negative = 'negative',\n  positive = 'positive',\n}\n\nexport type AlertVariantConfig = {\n  [v in AlertVariant]: {\n    backgroundColor: string\n    borderColor: string\n    borderWidth: number\n    iconName: IconName\n  }\n}\n","import * as React from 'react';\nimport NavigationContainerRefContext from './NavigationContainerRefContext';\nimport NavigationContext from './NavigationContext';\n/**\n * Hook to access the navigation prop of the parent screen anywhere.\n *\n * @returns Navigation prop of the parent screen.\n */\nexport default function useNavigation() {\n  const root = React.useContext(NavigationContainerRefContext);\n  const navigation = React.useContext(NavigationContext);\n  if (navigation === undefined && root === undefined) {\n    throw new Error(\"Couldn't find a navigation object. Is your component inside NavigationContainer?\");\n  }\n\n  // FIXME: Figure out a better way to do this\n  return navigation ?? root;\n}\n//# sourceMappingURL=useNavigation.js.map","// eslint-disable-next-line no-restricted-imports\nimport {useNavigation as useNavigationOriginal} from '@react-navigation/native'\nimport {NavigationProp, RootStackParams} from '@/app/navigation/types'\n\nexport const useNavigation = <RouteName extends keyof RootStackParams>() =>\n  useNavigationOriginal<NavigationProp<RouteName>>()\n","import {useEffect} from 'react'\nimport {useNavigation} from '@/hooks/navigation/useNavigation'\n\n/**\n * Executes the callback when the screen blurs, i.e. it goes out of focus when you navigate away.\n * This is the opposite of the react-navigation useFocusEffect hook.\n * The `blur` event will be triggered when a modal is opened (as opposed to `beforeRemove`).\n */\nexport const useBlurEffect = (callback: () => void) => {\n  const navigation = useNavigation()\n\n  useEffect(\n    () => navigation.addListener('blur', callback),\n    [callback, navigation],\n  )\n}\n","import {FC, Fragment, ReactNode, useCallback, useEffect, useRef} from 'react'\nimport {\n  LayoutAnimation,\n  Platform,\n  Pressable,\n  StyleSheet,\n  UIManager,\n  View,\n} from 'react-native'\nimport {IconButton} from '@/components/ui/buttons/IconButton'\nimport {Box} from '@/components/ui/containers/Box'\nimport {SingleSelectable} from '@/components/ui/containers/SingleSelectable'\nimport {\n  AlertCloseType,\n  AlertVariant,\n  AlertVariantConfig,\n} from '@/components/ui/feedback/Alert.types'\nimport {Column} from '@/components/ui/layout/Column'\nimport {Row} from '@/components/ui/layout/Row'\nimport {Icon} from '@/components/ui/media/Icon'\nimport {Paragraph} from '@/components/ui/text/Paragraph'\nimport {Title} from '@/components/ui/text/Title'\nimport {useAccessibilityFocus} from '@/hooks/accessibility/useAccessibilityFocus'\nimport {useBlurEffect} from '@/hooks/navigation/useBlurEffect'\nimport {useDispatch} from '@/hooks/redux/useDispatch'\nimport {useSelector} from '@/hooks/redux/useSelector'\nimport {useIsReduceMotionEnabled} from '@/hooks/useIsReduceMotionEnabled'\nimport {resetAlert, selectAlert} from '@/store/slices/alert'\nimport {Theme} from '@/themes/themes'\nimport {useThemable} from '@/themes/useThemable'\nimport {Duration} from '@/types/duration'\nimport {accessibleText} from '@/utils/accessibility/accessibleText'\n\nif (\n  Platform.OS === 'android' &&\n  UIManager.setLayoutAnimationEnabledExperimental\n) {\n  UIManager.setLayoutAnimationEnabledExperimental(true)\n}\n\nexport const Alert = () => {\n  const setAccessibilityFocus = useAccessibilityFocus(Duration.long)\n  const dispatch = useDispatch()\n  const isReduceMotionEnabled = useIsReduceMotionEnabled()\n  const ref = useRef(null)\n\n  const alert = useSelector(selectAlert)\n  const {closeType, content, testID, variant, withIcon} = alert\n  const variantConfig = useThemable(createVariantConfig)\n  const iconName = variantConfig[variant ?? AlertVariant.information].iconName\n\n  const styles = useThemable(createStyles(variant, variantConfig))\n\n  const reset = useCallback(() => dispatch(resetAlert()), [dispatch])\n\n  useBlurEffect(reset)\n\n  useEffect(() => {\n    if (ref.current && alert.content) {\n      setAccessibilityFocus(ref.current)\n    }\n  }, [alert.content, setAccessibilityFocus])\n\n  if (!alert.content) {\n    return null\n  }\n\n  const WrapperComponent: FC<{children: ReactNode}> =\n    closeType === AlertCloseType.withoutButton\n      ? props => (\n          <Pressable\n            accessibilityLanguage=\"nl-NL\"\n            accessibilityRole=\"button\"\n            onPress={() => {\n              if (!isReduceMotionEnabled) {\n                LayoutAnimation.configureNext(\n                  LayoutAnimation.Presets.easeInEaseOut,\n                )\n              }\n\n              dispatch(resetAlert())\n            }}\n            {...props}\n          />\n        )\n      : Fragment\n\n  return (\n    <Box>\n      <WrapperComponent>\n        <View\n          accessibilityLanguage=\"nl-NL\"\n          accessibilityRole=\"alert\"\n          accessible\n          ref={ref}\n          style={styles?.view}\n          testID={testID}>\n          <Row align=\"between\">\n            <SingleSelectable\n              accessibilityLabel={accessibleText(content?.title, content?.text)}\n              accessibilityLanguage=\"nl-NL\"\n              accessibilityRole=\"alert\">\n              <Row gutter=\"md\">\n                {!!withIcon && (\n                  <Icon\n                    color=\"link\"\n                    name={iconName}\n                    size=\"lg\"\n                  />\n                )}\n                <Column>\n                  {!!content?.title && (\n                    <Title\n                      level=\"h4\"\n                      text={content?.title}\n                    />\n                  )}\n                  <Paragraph>{content?.text}</Paragraph>\n                </Column>\n              </Row>\n            </SingleSelectable>\n            {closeType === AlertCloseType.withButton && (\n              <View>\n                <IconButton\n                  accessibilityHint=\"Sluit melding\"\n                  accessibilityLanguage=\"nl-NL\"\n                  icon={\n                    <Icon\n                      color=\"link\"\n                      name=\"close\"\n                      size=\"lg\"\n                    />\n                  }\n                  onPress={() => dispatch(resetAlert())}\n                />\n              </View>\n            )}\n          </Row>\n        </View>\n      </WrapperComponent>\n    </Box>\n  )\n}\n\nconst createStyles =\n  (variant: AlertVariant, variantConfig: AlertVariantConfig) =>\n  ({size}: Theme) => {\n    if (!variant) {\n      return\n    }\n\n    const {backgroundColor, borderColor, borderWidth} = variantConfig[variant]\n\n    return StyleSheet.create({\n      view: {\n        backgroundColor,\n        borderWidth,\n        borderColor,\n        paddingHorizontal: size.spacing.lg,\n        paddingVertical: size.spacing.md,\n      },\n    })\n  }\n\nconst createVariantConfig = ({color}: Theme): AlertVariantConfig => ({\n  [AlertVariant.information]: {\n    backgroundColor: color.box.background.alert,\n    borderColor: color.box.background.alert,\n    borderWidth: 2,\n    iconName: 'alert',\n  },\n  [AlertVariant.negative]: {\n    backgroundColor: color.box.background.white,\n    borderColor: color.severity.negative,\n    borderWidth: 2,\n    iconName: 'alert',\n  },\n  [AlertVariant.positive]: {\n    backgroundColor: color.box.background.white,\n    borderColor: color.severity.positive,\n    borderWidth: 2,\n    iconName: 'checkmark',\n  },\n})\n"],"names":["AlertCloseType","AlertVariant","useNavigation","root","React.useContext","NavigationContainerRefContext","navigation","NavigationContext","useNavigationOriginal","useBlurEffect","callback","useEffect","Platform","UIManager","Alert","setAccessibilityFocus","useAccessibilityFocus","Duration","dispatch","useDispatch","isReduceMotionEnabled","useIsReduceMotionEnabled","ref","useRef","alert","useSelector","selectAlert","closeType","content","testID","variant","withIcon","variantConfig","useThemable","createVariantConfig","iconName","styles","createStyles","reset","useCallback","resetAlert","WrapperComponent","props","jsx","Pressable","LayoutAnimation","Fragment","Box","View","jsxs","Row","SingleSelectable","accessibleText","Icon","Column","Title","Paragraph","IconButton","size","backgroundColor","borderColor","borderWidth","StyleSheet","color"],"mappings":"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","x_google_ignoreList":[1]}