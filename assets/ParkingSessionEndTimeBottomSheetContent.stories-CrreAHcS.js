import{bi as ye,j as e,X as ne,ap as xe,Y as U,aq as se,bj as ie,bk as v,ar as je,as as ve,bl as be,bm as G,aj as ae,S as re,bn as I,b4 as Pe,r as De,bo as Y,bp as _e,bq as b,br as Se,bs as W,bt as z,V as C,bu as Te,bv as we,bw as oe,bg as le,H as Ce,C as N,w as ke,T as O,c as Ae,I as Ee,aM as P,e as Me,R as Ie,g as q,aY as j,bf as Ve,a_ as Le,bx as Be,a$ as Oe,B as qe}from"./iframe-DUP_oGYL.js";import{P as Re}from"./ParkingSessionFormProvider-DQPuChKg.js";import{T as Ge,f as He,a as V,D as $e,P as Ue}from"./Track-B1nv_940.js";import{f as Ye}from"./formatTimeRangeToDisplay-BqE-C5-u.js";import{u as We}from"./useCurrentParkingPermit.web-CJ6ZBS-Q.js";import"./preload-helper-Dp1pzeXC.js";import"./formatDate-wlN67ITE.js";import"./permit.mock-BLpYw96F.js";var w=(t=>(t.Success="success",t.Warning="warning",t.Error="error",t))(w||{}),f=(t=>(t.Light="light",t.Medium="medium",t.Heavy="heavy",t.Soft="soft",t.Rigid="rigid",t))(f||{});const L={[w.Success]:[40,100,40],[w.Warning]:[50,100,50],[w.Error]:[60,100,60,100,60],[f.Light]:[40],[f.Medium]:[50],[f.Heavy]:[60],[f.Soft]:[35],[f.Rigid]:[45],selection:[50]};function B(){return typeof window<"u"&&"navigator"in window&&"vibrate"in navigator}const D={async notificationAsync(t){B()&&navigator.vibrate(L[t])},async impactAsync(t){B()&&navigator.vibrate(L[t])},async selectionAsync(){B()&&navigator.vibrate(L.selection)}};async function ze(t=f.Medium){if(!(D!=null&&D.impactAsync))throw new ye("Haptic","impactAsync");await D.impactAsync(t)}const Ne=()=>e.jsxs(ne,{fill:"none",height:160,viewBox:"0 0 160 160",width:160,children:[e.jsxs(xe,{clipPath:"url(#clip0_4356_5678)",children:[e.jsx(U,{d:"M143.86 78.5C143.86 42.8776 114.982 14 79.3599 14V9C117.744 9 148.86 40.1162 148.86 78.5C148.86 116.884 117.744 148 79.3599 148V143C114.982 143 143.86 114.122 143.86 78.5Z",fill:"url(#paint0_linear_4356_5678)"}),e.jsx(U,{d:"M69 145.86L84.5412 136.888L84.5412 154.833L69 145.86Z",fill:"#00A03C"})]}),e.jsxs(se,{children:[e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"paint0_linear_4356_5678",x1:"81.0001",x2:"79.3599",y1:"43.5",y2:"138",children:[e.jsx(v,{stopColor:"#00A03C",stopOpacity:0}),e.jsx(v,{offset:1,stopColor:"#00A03C"})]}),e.jsx(je,{id:"clip0_4356_5678",children:e.jsx(ve,{fill:"white",height:160,width:160})})]})]}),{width:Xe,height:Ze}=be.get("window"),a=Math.min(Math.min(Ze,Xe)*.7,350),X=16,Ke=G.createAnimatedComponent(ae),Je=G.createAnimatedComponent(ne),Z=t=>{"worklet";const r=Math.round(t/6),u=Math.floor(r/60),n=r%60;return{hours:u,minutes:n}},_=(t,r)=>{"worklet";return t*360+r*6},K=(t,r,u,n,s,l)=>{"worklet";return t<u||t===u&&r<n?{hours:u,minutes:n,clamped:!0}:t>s||t===s&&r>l?{hours:s,minutes:l,clamped:!0}:{hours:t,minutes:r,clamped:!1}},R=({onChange:t,maxHours:r,maxMinutes:u,minHours:n=0,minMinutes:s=0,initialHours:l=0,initialMinutes:o=0})=>{const i=I(_(l,o)),{value:p,enable:x,disable:k}=Pe(!1);De.useEffect(()=>{p||(i.value=Y(_(l,o),{damping:10,stiffness:90,overshootClamping:!0}))},[l,o,i]);const c=I(0),d=I(0),A=_e.Pan().onStart(h=>{const m=a/2,g=a/2,y=h.x-m,E=h.y-g;c.value=Math.atan2(E,y),b(x)()}).onUpdate(h=>{const m=a/2,g=a/2,y=h.x-m,E=h.y-g,M=(Math.atan2(E,y)-c.value)*180/Math.PI,{hours:ge,minutes:fe}=Z(i.value+M),{hours:H,minutes:$,clamped:pe}=K(ge,fe,n,s,r??1/0,u??1/0);pe?i.value=_(H,$):i.value+=M,d.value=M,b(t)(H,$)}).onEnd(()=>{d.value>1&&(i.value=Y(i.value+d.value*5,{damping:10,stiffness:90,overshootClamping:!0}));const{hours:h,minutes:m}=Z(i.value),{hours:g,minutes:y}=K(h,m,n,s,r??1/0,u??1/0);i.value=_(g,y),b(t)(g,y),b(k)()}),ce=Se(()=>({transform:[{rotate:`${i.value}deg`}]})),ue=W(()=>i.value>=360?0:Math.PI*a*(-1+i.value%360/360)),de=z(()=>({strokeDashoffset:ue.value})),me=W(()=>i.value-90),he=z(()=>({transform:[{rotate:`${me.value}deg`}]}));return e.jsxs(C,{style:S.container,children:[e.jsxs(Je,{animatedProps:he,height:a+20,style:S.progressBar,testID:"TimeDurationSpinner",width:a+20,children:[e.jsx(se,{children:e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"gradient",x1:"100%",x2:"0%",y1:"50%",y2:"50%",children:[e.jsx(v,{offset:"0%",stopColor:"#000000",stopOpacity:"1"}),e.jsx(v,{offset:"10%",stopColor:"#004699",stopOpacity:"1"}),e.jsx(v,{offset:"100%",stopColor:"#009DE6",stopOpacity:"1"})]})}),e.jsx(ae,{cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"#ddd",strokeWidth:10}),e.jsx(Ke,{animatedProps:de,cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"url(#gradient)",strokeDasharray:`${Math.PI*a}`,strokeLinecap:"round",strokeWidth:10})]}),e.jsx(Te,{gesture:A,children:e.jsxs(G.View,{style:[S.circle,ce],children:[Array.from({length:X}).map((h,m)=>{const g=360/X*m;return e.jsx(C,{style:[S.line,{transform:[{rotate:`${g}deg`},{translateY:-a/2+40}]}],testID:`TimeDurationSpinnerLine${m}`},m)}),l===0&&o===0&&e.jsx(we,{duration:5e3,children:e.jsx(Ne,{})})]})})]})},S=re.create({container:{height:a+20,width:a+20,justifyContent:"center",alignItems:"center"},circle:{width:a,height:a,borderRadius:a/2,justifyContent:"center",alignItems:"center"},progressBar:{position:"absolute"},line:{position:"absolute",width:2,height:20,backgroundColor:"#000"}});try{R.displayName="TimeDurationSpinner",R.__docgenInfo={description:"",displayName:"TimeDurationSpinner",props:{initialHours:{defaultValue:{value:"0"},description:"",name:"initialHours",required:!1,type:{name:"number"}},initialMinutes:{defaultValue:{value:"0"},description:"",name:"initialMinutes",required:!1,type:{name:"number"}},maxHours:{defaultValue:null,description:"",name:"maxHours",required:!1,type:{name:"number"}},maxMinutes:{defaultValue:null,description:"",name:"maxMinutes",required:!1,type:{name:"number"}},minHours:{defaultValue:{value:"0"},description:"",name:"minHours",required:!1,type:{name:"number"}},minMinutes:{defaultValue:{value:"0"},description:"",name:"minMinutes",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(hours: number, minutes: number) => void"}}}}}catch{}const J=({currentPermit:t,minimumEndTime:r})=>{const{watch:u}=oe(),n=u("startTime"),{field:{value:s,onChange:l}}=le({name:"endTime"}),o=t.max_session_length_in_days===1?n.endOf("day"):void 0,i=r??n,p=i.diff(n,"hour"),x=i.diff(n.add(p,"hours"),"minute"),{isPortrait:k}=Ce();return e.jsxs(Ge,{align:"around",children:[e.jsxs(N,{gutter:"lg",halign:"center",children:[e.jsxs(ke,{children:[e.jsx(O,{level:"h1",text:Ye(n,s??n),textAlign:"center"}),e.jsx(O,{level:"h5",text:"Parkeertijd",textAlign:"center"})]}),e.jsxs(Ae,{children:[e.jsx(Ee,{name:"clock",size:"sm",testID:"ParkingSessionEndTimeIcon"})," ","Eindtijd"," ",He(s??n,{includeHoursLabel:!0})]})]}),e.jsx(P,{height:"lg"}),e.jsxs(V,{testID:"ParkingSessionDurationTimePickerTabs",children:[!!k&&e.jsx(V.Tab,{accessibilityLabel:"Parkeertijd kiezen",label:"Parkeertijd",children:e.jsxs(N,{halign:"center",children:[e.jsx(P,{height:"xl"}),e.jsx(R,{initialHours:(s==null?void 0:s.diff(n,"hour"))??0,initialMinutes:s?s.diff(n,"minute")-s.diff(n,"hour")*60:0,maxHours:t.max_session_length_in_days===1?n.endOf("day").diff(n,"hour"):void 0,maxMinutes:t.max_session_length_in_days===1?n.endOf("day").diff(n,"minutes")-n.endOf("day").diff(n,"hour")*60:void 0,minHours:p,minMinutes:x,onChange:(c,d)=>{const A=n.add(c,"hour").add(d,"minute");l(A),Me.OS==="ios"&&ze(f.Light)}}),e.jsxs(C,{style:Q.floatingButtons,children:[e.jsx(P,{height:"md"}),e.jsxs(Ie,{align:"between",grow:1,children:[e.jsx(q,{accessibilityLabel:"Verminder parkeertijd met 5 minuten",label:"-5 min",onPress:()=>{const c=s?s.add(-5,"minute"):void 0,d=i&&(c!=null&&c.isBefore(i))?i:c;l(d)},testID:"ParkingSessionDurationDecreaseButton",variant:"tertiary"}),e.jsx(q,{accessibilityLabel:"Verleng parkeertijd met 5 minuten",label:"+5 min",onPress:()=>{const c=s?s.add(5,"minute"):n.add(5,"minute"),d=o&&c.isAfter(o)?o:c;l(d)},testID:"ParkingSessionDurationIncreaseButton",variant:"tertiary"})]})]}),e.jsx(P,{height:"lg"})]})}),e.jsx(V.Tab,{accessibilityLabel:"Eindtijd kiezen",label:"Eindtijd",children:e.jsx($e,{date:(s==null?void 0:s.toDate())??n.toDate(),is24hourSource:"locale",locale:"nl-NL",maximumDate:o==null?void 0:o.toDate(),minimumDate:i.toDate(),mode:"time",onDateChange:c=>{l(j(c))},style:Q.centerSelf,theme:"light"})})]})]})},Q=re.create({centerSelf:{alignSelf:"center"},floatingButtons:{position:"absolute",width:"100%"}});try{J.displayName="ParkingSessionDurationTimePicker",J.__docgenInfo={description:"",displayName:"ParkingSessionDurationTimePicker",props:{currentPermit:{defaultValue:null,description:"",name:"currentPermit",required:!0,type:{name:"ParkingPermit"}},minimumEndTime:{defaultValue:null,description:"",name:"minimumEndTime",required:!1,type:{name:"Dayjs"}}}}}catch{}const Qe=()=>{const{watch:t}=oe(),r=t("startTime"),{field:{value:u,onChange:n}}=le({name:"endTime"}),{close:s}=Ve(),l=We(),o=Le(),{height:i,visible:p}=Be(),{max_session_length_in_days:x}=l;return(o==null?void 0:o.scope)===Oe.visitor?j.max(j(),j(t("originalEndTime"))):j(),e.jsxs(qe,{grow:!0,children:[e.jsxs(e.Fragment,{children:[e.jsx(O,{level:"h5",text:"Kies eindtijd en datum",textAlign:"center"}),e.jsx(Ue,{dateTime:u??r,maxDateTime:r.add(x,"day").endOf("day"),setDateTime:n})]}),e.jsx(q,{label:"Gereed",onPress:s,testID:"ParkingSessionEndTimeBottomSheetContentDoneButton"}),!!p&&e.jsx(C,{style:{height:i}})]})},ct={component:Qe,decorators:t=>e.jsx(Re,{children:e.jsx(t,{})})},T={args:{}};var F,ee,te;T.parameters={...T.parameters,docs:{...(F=T.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {}
}`,...(te=(ee=T.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};const ut=["Default"];export{T as Default,ut as __namedExportsOrder,ct as default};
