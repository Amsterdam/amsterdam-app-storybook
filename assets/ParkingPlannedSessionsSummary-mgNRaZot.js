import{aE as u,r as c,ao as r,a as f,aF as h,j as t,aB as p}from"./iframe-D-CkrNsu.js";import{P as x}from"./Pressable--jsMcAy4.js";import{B as j}from"./Badge-DVn3r-B5.js";import{P as k}from"./PleaseWait-D3szRRp6.js";import{S as v}from"./SomethingWentWrong-D9vjCg1c.js";import{C as S}from"./Column-z6bpjVBc.js";import{R as D}from"./Row-CR3pG2ZI.js";import{P as I}from"./Phrase-CvKJoMf_.js";import{T as o}from"./Title-B82ycydy.js";import{u as _}from"./useNavigation-t9LgYvyU.js";import{u as B,a as E,b as R}from"./useGetParkingSessions-BArpoE97.js";const F=()=>{const{navigate:m}=_(),{parkingSessions:e,isLoading:l,isError:d,refetch:a}=B(u.planned);c.useEffect(()=>{e!=null&&e.some(s=>!s.ps_right_id)&&a()},[e,a]),E(a,e!=null&&e.some(s=>"is_paid"in s&&!s.is_paid)?15e3:0);const i=e!=null&&e.length?e.reduce((s,g)=>{const n=r(g.start_date_time);return n.isAfter(s)?s:n},r(e[0].start_date_time)):void 0,P=f();return R(()=>{P(h.util.invalidateTags(["ParkingSessions"]))},e!=null&&e.length?Math.max((i==null?void 0:i.endOf("minute").diff(r(),"milliseconds"))??0,3e4):0),l?t.jsx(k,{testID:"ParkingPermitSessionsPlannedPleaseWait"}):d?t.jsx(v,{testID:"ParkingPlannedSessionsSummarySomethingWentWrong"}):e!=null&&e.length?t.jsx(x,{accessibilityLabel:`${e.length} geplande parkeersessies`,onPress:()=>m(p.parkingPlannedSessions),testID:"ParkingPermitSessionsPlannedBadgeButton",children:t.jsxs(D,{gutter:"sm",children:[t.jsx(o,{color:"link",level:"h5",testID:"ParkingPermitSessionsPlannedTitle",text:"Gepland"}),t.jsx(j,{color:"info",testID:"ParkingPermitSessionsPlannedBadge",value:e.length})]})}):t.jsxs(S,{gutter:"sm",children:[t.jsx(o,{level:"h5",testID:"ParkingPermitSessionsPlannedTitle",text:"Gepland"}),t.jsx(I,{testID:"ParkingPermitSessionsPlannedNoPlannedPhrase",children:"Er zijn geen geplande parkeersessies."})]})};export{F as P};
