{"version":3,"file":"index-546e8b88.js","sources":["../../node_modules/react-native-web/dist/exports/InteractionManager/TaskQueue.js","../../node_modules/react-native-web/dist/modules/requestIdleCallback/index.js","../../node_modules/react-native-web/dist/exports/InteractionManager/index.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\n/**\n * Copyright (c) Nicolas Gallagher.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nimport invariant from 'fbjs/lib/invariant';\nclass TaskQueue {\n  constructor(_ref) {\n    var onMoreTasks = _ref.onMoreTasks;\n    this._onMoreTasks = onMoreTasks;\n    this._queueStack = [{\n      tasks: [],\n      popable: true\n    }];\n  }\n  enqueue(task) {\n    this._getCurrentQueue().push(task);\n  }\n  enqueueTasks(tasks) {\n    tasks.forEach(task => this.enqueue(task));\n  }\n  cancelTasks(tasksToCancel) {\n    this._queueStack = this._queueStack.map(queue => _objectSpread(_objectSpread({}, queue), {}, {\n      tasks: queue.tasks.filter(task => tasksToCancel.indexOf(task) === -1)\n    })).filter((queue, idx) => queue.tasks.length > 0 || idx === 0);\n  }\n  hasTasksToProcess() {\n    return this._getCurrentQueue().length > 0;\n  }\n\n  /**\n   * Executes the next task in the queue.\n   */\n  processNext() {\n    var queue = this._getCurrentQueue();\n    if (queue.length) {\n      var task = queue.shift();\n      try {\n        if (typeof task === 'object' && task.gen) {\n          this._genPromise(task);\n        } else if (typeof task === 'object' && task.run) {\n          task.run();\n        } else {\n          invariant(typeof task === 'function', 'Expected Function, SimpleTask, or PromiseTask, but got:\\n' + JSON.stringify(task, null, 2));\n          task();\n        }\n      } catch (e) {\n        e.message = 'TaskQueue: Error with task ' + (task.name || '') + ': ' + e.message;\n        throw e;\n      }\n    }\n  }\n  _getCurrentQueue() {\n    var stackIdx = this._queueStack.length - 1;\n    var queue = this._queueStack[stackIdx];\n    if (queue.popable && queue.tasks.length === 0 && stackIdx > 0) {\n      this._queueStack.pop();\n      return this._getCurrentQueue();\n    } else {\n      return queue.tasks;\n    }\n  }\n  _genPromise(task) {\n    var length = this._queueStack.push({\n      tasks: [],\n      popable: false\n    });\n    var stackIdx = length - 1;\n    var stackItem = this._queueStack[stackIdx];\n    task.gen().then(() => {\n      stackItem.popable = true;\n      this.hasTasksToProcess() && this._onMoreTasks();\n    }).catch(ex => {\n      setTimeout(() => {\n        ex.message = \"TaskQueue: Error resolving Promise in task \" + task.name + \": \" + ex.message;\n        throw ex;\n      }, 0);\n    });\n  }\n}\nexport default TaskQueue;","/**\n * Copyright (c) Nicolas Gallagher.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\nimport canUseDOM from '../canUseDom';\nvar _requestIdleCallback = function _requestIdleCallback(cb, options) {\n  return setTimeout(() => {\n    var start = Date.now();\n    cb({\n      didTimeout: false,\n      timeRemaining() {\n        return Math.max(0, 50 - (Date.now() - start));\n      }\n    });\n  }, 1);\n};\nvar _cancelIdleCallback = function _cancelIdleCallback(id) {\n  clearTimeout(id);\n};\nvar isSupported = canUseDOM && typeof window.requestIdleCallback !== 'undefined';\nvar requestIdleCallback = isSupported ? window.requestIdleCallback : _requestIdleCallback;\nvar cancelIdleCallback = isSupported ? window.cancelIdleCallback : _cancelIdleCallback;\nexport default requestIdleCallback;\nexport { cancelIdleCallback };","/**\n * Copyright (c) Nicolas Gallagher.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nimport invariant from 'fbjs/lib/invariant';\nimport TaskQueue from './TaskQueue';\nimport EventEmitter from '../../vendor/react-native/vendor/emitter/EventEmitter';\nimport requestIdleCallback from '../../modules/requestIdleCallback';\nvar _emitter = new EventEmitter();\nvar InteractionManager = {\n  Events: {\n    interactionStart: 'interactionStart',\n    interactionComplete: 'interactionComplete'\n  },\n  /**\n   * Schedule a function to run after all interactions have completed.\n   */\n  runAfterInteractions(task) {\n    var tasks = [];\n    var promise = new Promise(resolve => {\n      _scheduleUpdate();\n      if (task) {\n        tasks.push(task);\n      }\n      tasks.push({\n        run: resolve,\n        name: 'resolve ' + (task && task.name || '?')\n      });\n      _taskQueue.enqueueTasks(tasks);\n    });\n    return {\n      then: promise.then.bind(promise),\n      done: promise.then.bind(promise),\n      cancel: () => {\n        _taskQueue.cancelTasks(tasks);\n      }\n    };\n  },\n  /**\n   * Notify manager that an interaction has started.\n   */\n  createInteractionHandle() {\n    _scheduleUpdate();\n    var handle = ++_inc;\n    _addInteractionSet.add(handle);\n    return handle;\n  },\n  /**\n   * Notify manager that an interaction has completed.\n   */\n  clearInteractionHandle(handle) {\n    invariant(!!handle, 'Must provide a handle to clear.');\n    _scheduleUpdate();\n    _addInteractionSet.delete(handle);\n    _deleteInteractionSet.add(handle);\n  },\n  addListener: _emitter.addListener.bind(_emitter),\n  /**\n   *\n   * @param deadline\n   */\n  setDeadline(deadline) {\n    _deadline = deadline;\n  }\n};\nvar _interactionSet = new Set();\nvar _addInteractionSet = new Set();\nvar _deleteInteractionSet = new Set();\nvar _taskQueue = new TaskQueue({\n  onMoreTasks: _scheduleUpdate\n});\nvar _nextUpdateHandle = 0;\nvar _inc = 0;\nvar _deadline = -1;\n\n/**\n * Schedule an asynchronous update to the interaction state.\n */\nfunction _scheduleUpdate() {\n  if (!_nextUpdateHandle) {\n    if (_deadline > 0) {\n      _nextUpdateHandle = setTimeout(_processUpdate);\n    } else {\n      _nextUpdateHandle = requestIdleCallback(_processUpdate);\n    }\n  }\n}\n\n/**\n * Notify listeners, process queue, etc\n */\nfunction _processUpdate() {\n  _nextUpdateHandle = 0;\n  var interactionCount = _interactionSet.size;\n  _addInteractionSet.forEach(handle => _interactionSet.add(handle));\n  _deleteInteractionSet.forEach(handle => _interactionSet.delete(handle));\n  var nextInteractionCount = _interactionSet.size;\n  if (interactionCount !== 0 && nextInteractionCount === 0) {\n    _emitter.emit(InteractionManager.Events.interactionComplete);\n  } else if (interactionCount === 0 && nextInteractionCount !== 0) {\n    _emitter.emit(InteractionManager.Events.interactionStart);\n  }\n  if (nextInteractionCount === 0) {\n    // It seems that we can't know the running time of the current event loop,\n    // we can only calculate the running time of the current task queue.\n    var begin = Date.now();\n    while (_taskQueue.hasTasksToProcess()) {\n      _taskQueue.processNext();\n      if (_deadline > 0 && Date.now() - begin >= _deadline) {\n        _scheduleUpdate();\n        break;\n      }\n    }\n  }\n  _addInteractionSet.clear();\n  _deleteInteractionSet.clear();\n}\nexport default InteractionManager;"],"names":["TaskQueue","_ref","onMoreTasks","task","tasks","tasksToCancel","queue","_objectSpread","idx","invariant","e","stackIdx","length","stackItem","ex","TaskQueue$1","_requestIdleCallback","cb","options","start","isSupported","canUseDOM","requestIdleCallback","requestIdleCallback$1","_emitter","EventEmitter","InteractionManager","promise","resolve","_scheduleUpdate","_taskQueue","handle","_inc","_addInteractionSet","_deleteInteractionSet","deadline","_deadline","_interactionSet","_nextUpdateHandle","_processUpdate","interactionCount","nextInteractionCount","begin","InteractionManager$1"],"mappings":"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","x_google_ignoreList":[0,1,2]}