var W=Object.defineProperty;var X=(t,n,e)=>n in t?W(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var g=(t,n,e)=>X(t,typeof n!="symbol"?n+"":n,e);import{b6 as P,bp as k,r as c,bq as q,br as B,bs as j,bt as z,m as $,a8 as N,j as S}from"./iframe-ByDjrXCK.js";import{R as O,a as d,G as J,T as C,C as l,t as M,g as w,b as T,f as p,A as D,r as F,e as I,s as y,c as A,M as U,u as Z,i as K,d as Q,h as x,v as ee,j as te,k as ne,l as ae,B as H,m as v,n as re,H as se}from"./index-BxEdfW3I.js";function ie(t,n,e){return P(t,n,e,!0)}const oe=P,Ie=k()?ie:oe;function Ve(t,n){const e=c.useRef(null);let r=Object.values(t.__closure??{});k()&&!r.length&&n!=null&&n.length&&(r=n),n===void 0?n=[...r,t.__workletHash]:n.push(t.__workletHash),e.current===null&&(e.current=q(B(t)));const i=e.current;return c.useEffect(()=>{const s=j(()=>{"worklet";i.value=t()},r,[i]);return()=>{z(s)}},n),i}function le(t,n){"worklet";switch(t){case l.BEGAN:return n.onBegin;case l.START:return n.onStart;case l.UPDATE:return n.onUpdate;case l.CHANGE:return n.onChange;case l.END:return n.onEnd;case l.FINALIZE:return n.onFinalize;case l.TOUCHES_DOWN:return n.onTouchesDown;case l.TOUCHES_MOVE:return n.onTouchesMove;case l.TOUCHES_UP:return n.onTouchesUp;case l.TOUCHES_CANCELLED:return n.onTouchesCancelled}}function ue(t){"worklet";switch(t){case C.TOUCHES_DOWN:return l.TOUCHES_DOWN;case C.TOUCHES_MOVE:return l.TOUCHES_MOVE;case C.TOUCHES_UP:return l.TOUCHES_UP;case C.TOUCHES_CANCELLED:return l.TOUCHES_CANCELLED}return l.UNDEFINED}function m(t,n,e,...r){"worklet";const i=le(t,n);n.isWorklet[t]?i==null||i(e,...r):i&&console.warn(M("Animated gesture callback must be a worklet"))}function ce(t){"worklet";return t.oldState!=null}function he(t){"worklet";return t.eventType!=null}function fe(t,n){if(!O)return;const e=O.useSharedValue(null),r=O.useSharedValue([]),i=[],a=o=>{"worklet";var E;const h=e.value;if(h)for(let f=0;f<h.length;f++){const u=h[f];o.handlerTag===u.handlerTag&&(ce(o)?o.oldState===d.UNDETERMINED&&o.state===d.BEGAN?m(l.BEGAN,u,o):(o.oldState===d.BEGAN||o.oldState===d.UNDETERMINED)&&o.state===d.ACTIVE?(m(l.START,u,o),r.value[u.handlerTag]=void 0):o.oldState!==o.state&&o.state===d.END?(o.oldState===d.ACTIVE&&m(l.END,u,o,!0),m(l.FINALIZE,u,o,!0)):(o.state===d.FAILED||o.state===d.CANCELLED)&&o.state!==o.oldState&&(o.oldState===d.ACTIVE&&m(l.END,u,o,!1),m(l.FINALIZE,u,o,!1)):he(o)?(i[f]||(i[f]=J.create(o.handlerTag)),o.eventType!==C.UNDETERMINED&&m(ue(o.eventType),u,o,i[f])):(m(l.UPDATE,u,o),u.onChange&&u.changeEventCalculator&&(m(l.CHANGE,u,(E=u.changeEventCalculator)==null?void 0:E.call(u,o,r.value[u.handlerTag])),r.value[u.handlerTag]=o)))}},s=O.useEvent(a,["onGestureHandlerStateChange","onGestureHandlerEvent"],n);t.animatedEventHandler=s,t.animatedHandlers=e}function V({preparedGesture:t,gestureConfig:n,gesturesToAttach:e,viewTag:r,webEventHandlersRef:i}){n.initialize(),w(()=>{t.isMounted&&n.prepare()});for(const a of e)T.createGestureHandler(a.handlerName,a.handlerTag,p(a.config,D)),F(a.handlerTag,a,a.config.testId);w(()=>{if(t.isMounted){for(const a of e)T.updateGestureHandler(a.handlerTag,p(a.config,D,I(a)));y()}});for(const a of e){const s=a.shouldUseReanimated?A.REANIMATED_WORKLET:A.JS_FUNCTION_NEW_API;$.OS==="web"?T.attachGestureHandler(a.handlerTag,r,A.JS_FUNCTION_OLD_API,i):T.attachGestureHandler(a.handlerTag,r,s),U.gestureWillMount(a)}if(t.attachedGestures=e,t.animatedHandlers){const a=s=>s.shouldUseReanimated;t.animatedHandlers.value=e.filter(a).map(s=>s.handlers)}}function _(t,n){if(n.length!==t.attachedGestures.length)return!0;for(let e=0;e<n.length;e++)if(n[e].handlerName!==t.attachedGestures[e].handlerName||n[e].shouldUseReanimated!==t.attachedGestures[e].shouldUseReanimated)return!0;return!1}function L(t){for(const n of t.attachedGestures)T.dropGestureHandler(n.handlerTag),Z(n.handlerTag,n.config.testId),U.gestureWillUnmount(n);y()}const Y=c.forwardRef(({children:t},n)=>{try{const e=N.Children.only(t);return K(e)?N.cloneElement(e,{ref:n},e.props.children):S.jsx("div",{ref:n,style:{display:"contents"},children:e})}catch{throw new Error(M("GestureDetector got more than one view as a child. If you want the gesture to work on multiple views, wrap them with a common parent and attach the gesture to that view."))}}),de=Y;function ge(t,n,e){n.prepare();for(let i=0;i<e.length;i++){const a=t.attachedGestures[i];e[i].handlerTag!==a.handlerTag&&(e[i].handlerTag=a.handlerTag,e[i].handlers.handlerTag=a.handlerTag)}const r=t.attachedGestures;w(()=>{if(!t.isMounted||r!==t.attachedGestures)return;let i=r.length!==e.length;for(let a=0;a<e.length;a++){const s=r[a];s.handlers.gestureId!==e[a].handlers.gestureId&&(e[a].shouldUseReanimated||s.shouldUseReanimated)&&(i=!0),s.config=e[a].config,s.handlers=e[a].handlers,T.updateGestureHandler(s.handlerTag,p(s.config,D,I(s))),F(s.handlerTag,s,s.config.testId)}if(t.animatedHandlers&&i){const a=r.filter(s=>s.shouldUseReanimated).map(s=>s.handlers);t.animatedHandlers.value=a}y()})}function me(t,n,e,r,i){const a=Q();return c.useCallback(o=>{const h=x(t.viewRef),E=h!==t.previousViewTag;E||_(n,e)?(ee(t.viewRef),L(n),V({preparedGesture:n,gestureConfig:r,gesturesToAttach:e,webEventHandlersRef:i,viewTag:h}),E&&(t.previousViewTag=h,t.forceRebuildReanimatedEvent=!0,a())):o||ge(n,r,e)},[a,r,e,n,t,i])}function Ee(t,n){return c.useCallback(r=>{r!==null&&(t.viewRef=r,t.previousViewTag===-1&&(t.previousViewTag=x(t.viewRef)),t.firstRender||n(!0))},[t,n])}function G(t,n){if(t===void 0)return!1;for(const e of te(t))if(e===n.handlerTag)return!0;return!1}function Te(t,n){c.useEffect(()=>U.addMountListener(e=>{for(const r of n.attachedGestures){const i=r.config.blocksHandlers,a=r.config.requireToFail,s=r.config.simultaneousWith;if(G(i,e)||G(a,e)||G(s,e)){t();return}}}),[t,n])}function Ce(t,n){const e=["userSelect","enableContextMenu","touchAction"];for(const r of e){const i=t[r];if(i!==void 0)for(const a of n.toGestureArray()){const s=a.config;s[r]=i}}}const _e=t=>{c.useContext(ne);const n=t.gesture;Ce(t,n);const e=c.useMemo(()=>n.toGestureArray(),[n]),r=e.some(f=>f.shouldUseReanimated),i=ae(),a=c.useRef({firstRender:!0,viewRef:null,previousViewTag:-1,forceRebuildReanimatedEvent:!1}).current,s=N.useRef({attachedGestures:[],animatedEventHandler:null,animatedHandlers:null,shouldUseReanimated:r,isMounted:!1}).current,o=me(a,s,e,n,i),h=Ee(a,o),E=a.firstRender||a.forceRebuildReanimatedEvent||_(s,e);return a.forceRebuildReanimatedEvent=!1,fe(s,E),c.useLayoutEffect(()=>{const f=x(a.viewRef);return s.isMounted=!0,V({preparedGesture:s,gestureConfig:n,gesturesToAttach:e,webEventHandlersRef:i,viewTag:f}),()=>{s.isMounted=!1,L(s)}},[]),c.useEffect(()=>{a.firstRender?a.firstRender=!1:o()},[t]),Te(o,s),r?S.jsx(de,{ref:h,onGestureHandlerEvent:s.animatedEventHandler,children:t.children}):S.jsx(Y,{ref:h,children:t.children})};class He extends H{constructor(){super();g(this,"config",{});this.handlerName="FlingGestureHandler"}numberOfPointers(e){return this.config.numberOfPointers=e,this}direction(e){return this.config.direction=e,this}}function ve(t,n){"worklet";let e;return n===void 0?e={forceChange:t.force}:e={forceChange:t.force-n.force},{...t,...e}}class Re extends v{constructor(){super();g(this,"config",{});this.handlerName="ForceTouchGestureHandler"}minForce(e){return this.config.minForce=e,this}maxForce(e){return this.config.maxForce=e,this}feedbackOnActivation(e){return this.config.feedbackOnActivation=e,this}onChange(e){return this.handlers.changeEventCalculator=ve,super.onChange(e)}}function b(t,n){return t===void 0?[...n]:[...t,...n]}class R extends re{constructor(...e){super();g(this,"gestures",[]);g(this,"simultaneousGestures",[]);g(this,"requireGesturesToFail",[]);this.gestures=e}prepareSingleGesture(e,r,i){if(e instanceof H){const a={...e.config};a.simultaneousWith=b(a.simultaneousWith,r),a.requireToFail=b(a.requireToFail,i),e.config=a}else e instanceof R&&(e.simultaneousGestures=r,e.requireGesturesToFail=i,e.prepare())}prepare(){for(const e of this.gestures)this.prepareSingleGesture(e,this.simultaneousGestures,this.requireGesturesToFail)}initialize(){for(const e of this.gestures)e.initialize()}toGestureArray(){return this.gestures.flatMap(e=>e.toGestureArray())}}class Oe extends R{prepare(){const n=this.gestures.map(e=>this.gestures.filter(r=>r!==e).flatMap(r=>r.toGestureArray()));for(let e=0;e<this.gestures.length;e++)this.prepareSingleGesture(this.gestures[e],n[e],this.requireGesturesToFail)}}class Ae extends R{prepare(){const n=this.gestures.map(r=>r.toGestureArray());let e=[];for(let r=0;r<this.gestures.length;r++)this.prepareSingleGesture(this.gestures[r],this.simultaneousGestures,this.requireGesturesToFail.concat(e)),e=e.concat(n[r])}}class Ge extends H{constructor(){super();g(this,"config",{});this.handlerName="LongPressGestureHandler",this.shouldCancelWhenOutside(!0)}minDuration(e){return this.config.minDurationMs=e,this}maxDistance(e){return this.config.maxDist=e,this}numberOfPointers(e){return this.config.numberOfPointers=e,this}}function Ne(t,n){"worklet";let e;return n===void 0?e={changeX:t.translationX,changeY:t.translationY}:e={changeX:t.translationX-n.translationX,changeY:t.translationY-n.translationY},{...t,...e}}class Se extends v{constructor(){super();g(this,"config",{});this.handlerName="PanGestureHandler"}activeOffsetY(e){return Array.isArray(e)?(this.config.activeOffsetYStart=e[0],this.config.activeOffsetYEnd=e[1]):e<0?this.config.activeOffsetYStart=e:this.config.activeOffsetYEnd=e,this}activeOffsetX(e){return Array.isArray(e)?(this.config.activeOffsetXStart=e[0],this.config.activeOffsetXEnd=e[1]):e<0?this.config.activeOffsetXStart=e:this.config.activeOffsetXEnd=e,this}failOffsetY(e){return Array.isArray(e)?(this.config.failOffsetYStart=e[0],this.config.failOffsetYEnd=e[1]):e<0?this.config.failOffsetYStart=e:this.config.failOffsetYEnd=e,this}failOffsetX(e){return Array.isArray(e)?(this.config.failOffsetXStart=e[0],this.config.failOffsetXEnd=e[1]):e<0?this.config.failOffsetXStart=e:this.config.failOffsetXEnd=e,this}minPointers(e){return this.config.minPointers=e,this}maxPointers(e){return this.config.maxPointers=e,this}minDistance(e){return this.config.minDist=e,this}minVelocity(e){return this.config.minVelocity=e,this}minVelocityX(e){return this.config.minVelocityX=e,this}minVelocityY(e){return this.config.minVelocityY=e,this}averageTouches(e){return this.config.avgTouches=e,this}enableTrackpadTwoFingerGesture(e){return this.config.enableTrackpadTwoFingerGesture=e,this}activateAfterLongPress(e){return this.config.activateAfterLongPress=e,this}onChange(e){return this.handlers.changeEventCalculator=Ne,super.onChange(e)}}function we(t,n){"worklet";let e;return n===void 0?e={scaleChange:t.scale}:e={scaleChange:t.scale/n.scale},{...t,...e}}class pe extends v{constructor(){super(),this.handlerName="PinchGestureHandler"}onChange(n){return this.handlers.changeEventCalculator=we,super.onChange(n)}}function De(t,n){"worklet";let e;return n===void 0?e={rotationChange:t.rotation}:e={rotationChange:t.rotation-n.rotation},{...t,...e}}class ye extends v{constructor(){super(),this.handlerName="RotationGestureHandler"}onChange(n){return this.handlers.changeEventCalculator=De,super.onChange(n)}}class Ue extends H{constructor(){super();g(this,"config",{});this.handlerName="TapGestureHandler",this.shouldCancelWhenOutside(!0)}minPointers(e){return this.config.minPointers=e,this}numberOfTaps(e){return this.config.numberOfTaps=e,this}maxDistance(e){return this.config.maxDist=e,this}maxDuration(e){return this.config.maxDurationMs=e,this}maxDelay(e){return this.config.maxDelayMs=e,this}maxDeltaX(e){return this.config.maxDeltaX=e,this}maxDeltaY(e){return this.config.maxDeltaY=e,this}}class xe extends H{constructor(){super(),this.config={},this.handlerName="NativeViewGestureHandler"}shouldActivateOnStart(n){return this.config.shouldActivateOnStart=n,this}disallowInterruption(n){return this.config.disallowInterruption=n,this}}function be(t,n){"worklet";return t}class Pe extends v{constructor(){super(),this.handlerName="ManualGestureHandler"}onChange(n){return this.handlers.changeEventCalculator=be,super.onChange(n)}}const Le={Tap:()=>new Ue,Pan:()=>new Se,Pinch:()=>new pe,Rotation:()=>new ye,Fling:()=>new He,LongPress:()=>new Ge,ForceTouch:()=>new Re,Native:()=>new xe,Manual:()=>new Pe,Hover:()=>new se,Race:(...t)=>new R(...t),Simultaneous(...t){return new Oe(...t)},Exclusive(...t){return new Ae(...t)}};export{Le as G,Ie as a,_e as b,Ve as u};
