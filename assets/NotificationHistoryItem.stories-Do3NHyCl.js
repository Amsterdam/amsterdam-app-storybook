import{r as i,ao as _,ap as T,aq as j,ar as P,as as R,at as B,au as E,_ as M,av as A,aw as L,ax as $,ay as v,j as s,V as N,S as O,N as U}from"./iframe-DEChLOno.js";import{P as V}from"./PressableBase-DRyoiHt6.js";import{B as q}from"./Box-CY_cUHEL.js";import{B as z}from"./Badge-DPiq5iA5.js";import{C as W}from"./Column-CXC3ZJ4q.js";import{R as G}from"./Row-CbAlU6tY.js";import{I as Y}from"./Icon-DwYWQUEE.js";import{I as J}from"./Image-CFJzy0Ht.js";import{P as K}from"./Paragraph-DD0Esipp.js";import{P as Q}from"./Phrase-BiLMRzux.js";import{T as X}from"./Title-CuUgUbt4.js";import{u as Z}from"./useNavigation-0ti2EOWZ.js";import{u as tt}from"./useDeviceContext-B-3hLlZb.js";import{u as et}from"./useThemable-BHSrwbDZ.js";import{a as at}from"./accessibleText-gmNPjmn1.js";import"./preload-helper-Dp1pzeXC.js";import"./usePiwikTrackCustomEventFromProps-HAj55Hf2.js";import"./useTrackException-DmiG9XSR.js";import"./layoutStyles-D263OpbN.js";import"./AccessibleText-Bzqwrg6t.js";import"./formatNumber-BOnMa6yj.js";import"./mapCrossAxisAlignment-DpnuLLqj.js";import"./mapMainAxisAlignment-BOa0GzUh.js";import"./index-BnL3ZBv0.js";import"./types-CVDZqz9V.js";const ot=i.createContext(void 0),nt=i.createContext(void 0);function st(){return i.useContext(nt)}function rt(){const e=i.useContext(ot),o=i.useContext(_),{options:t}=i.useContext(T),a=st(),n=(t==null?void 0:t.getPathFromState)??j,r=(t==null?void 0:t.getStateFromPath)??P,l=(t==null?void 0:t.getActionFromState)??R,d=i.useCallback((c,u)=>{var m;if((t==null?void 0:t.enabled)===!1)return;const f=e&&(o!=null&&o.key)&&a?o.key===((m=B(a))==null?void 0:m.key)&&e.getState().routes.some(y=>y.key===o.key):!1,g={routes:[{name:c,params:u}]},p=y=>{if(y){const I=y.routes[0];return f&&!I.state?g:{routes:[{...I,state:p(I.state)}]}}return g},b=p(a);return n(b,t==null?void 0:t.config)},[t==null?void 0:t.enabled,t==null?void 0:t.config,o==null?void 0:o.key,e,a,n]),x=i.useCallback(c=>{if(!c.startsWith("/"))throw new Error(`The href must start with '/' (${c}).`);const u=r(c,t==null?void 0:t.config);if(u)return l(u,t==null?void 0:t.config)??E(u);throw new Error("Failed to parse the href to a navigation state.")},[t==null?void 0:t.config,r,l]);return{buildHref:d,buildAction:x}}function it(){const e=i.useContext(M),{buildAction:o}=rt();return i.useCallback(a=>{if(e===void 0)throw new Error("Couldn't find a navigation object. Is your component inside NavigationContainer?");const n=o(a);e.dispatch(n)},[o,e])}const lt=(e,o=!0)=>{var t,a;return(a=(t=A.find(n=>{var r;return n.slug===((r=e==null?void 0:e.data)==null?void 0:r.module_slug)}))==null?void 0:t.onNotificationEvent)==null?void 0:a.call(t,L.PRESS,{notification:e},o,$.dispatch)},ct=v().localeData().weekdays(),ut=e=>{if(!e)return"";const o=v(e),t=v(),a=o.startOf("day").diff(t.startOf("day"),"days"),n=a===0,r=a===-1,l=a>-7&&a<-1;return n?o.format("HH.mm"):r?"gisteren":l?ct[o.get("day")]:o.format("D MMMM")},S=({item:{body:e,context:o,created_at:t,id:a,image:n,is_read:r,module_slug:l,title:d},enabledModules:x=[]})=>{const{navigate:c}=Z(),{fontScale:u}=tt(),f=x.find(({slug:m})=>m===l),g=et(mt(u)),p=it();if(!f)return null;const{icon:b}=f,C=ut(t);return s.jsx(V,{accessibilityLabel:at(r?void 0:"Ongelezen bericht: ",d,e,`ontvangen: ${C}`),onPress:()=>{const m=lt({id:a,title:d,body:e,data:o},!1);m?p(m):l&&c(l)},testID:`NotificationHistoryItem${a}Button`,children:s.jsx(q,{insetHorizontal:"md",insetVertical:"smd",children:s.jsxs(G,{gutter:"md",valign:"start",children:[s.jsx(N,{style:g.iconContainer,children:n&&n.sources[0]?s.jsx(J,{aspectRatio:"square",source:n.sources[0],testID:`NotificationHistoryItem${a}Image`}):s.jsx(Y,{color:"inverse",name:b,size:"lg",testID:`NotificationHistoryItem${a}Icon`})}),s.jsxs(W,{grow:1,shrink:1,children:[s.jsx(X,{level:"h5",testID:`NotificationHistoryItem${a}Title`,text:d}),s.jsx(K,{testID:`NotificationHistoryItem${a}DescriptionText`,children:e}),s.jsx(Q,{color:"secondary",testID:`NotificationHistoryItem${a}CreationDatePhrase`,variant:"body",children:C})]}),!r&&s.jsx(N,{style:g.badgeContainer,children:s.jsx(z,{testID:`NotificationHistoryItem${a}IsUnreadBadge`,variant:"extraSmall"})})]})})})},D=6,mt=e=>({color:o,size:t})=>O.create({iconContainer:{backgroundColor:o.notificationHistory.itemIcon.background,justifyContent:"center",alignItems:"center",width:t.iconContainer.lg*e,height:t.iconContainer.lg*e,marginTop:D*e},badgeContainer:{marginTop:D*e}});try{S.displayName="NotificationHistoryItem",S.__docgenInfo={description:"",displayName:"NotificationHistoryItem",props:{enabledModules:{defaultValue:{value:"[]"},description:"",name:"enabledModules",required:!1,type:{name:"Module[]"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Notification"}}}}}catch{}const k=U["construction-work"],Mt={component:S},h={args:{enabledModules:[{moduleSlug:k,moduleAppReason:null,moduleFallbackUrl:null,releaseFallbackUrl:null,moduleButtonLabel:null,releaseButtonLabel:null,releaseAppReason:null,title:"Werkzaamheden",icon:"construction-work",slug:k,status:1,description:"",version:"1.0.0"}],item:{title:"De nieuwe brug is geplaatst",module_slug:k,created_at:"2022-01-15 10:30:00",pushed_at:"2022-01-15 10:30:00",is_read:!1,id:"1",context:{},body:"De nieuwe brug is geplaatst"}}};var H,w,F;h.parameters={...h.parameters,docs:{...(H=h.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    enabledModules: [{
      moduleSlug: slug,
      moduleAppReason: null,
      moduleFallbackUrl: null,
      releaseFallbackUrl: null,
      moduleButtonLabel: null,
      releaseButtonLabel: null,
      releaseAppReason: null,
      title: 'Werkzaamheden',
      icon: 'construction-work',
      slug,
      status: 1,
      description: '',
      version: '1.0.0'
    }],
    item: {
      title: 'De nieuwe brug is geplaatst',
      module_slug: slug,
      created_at: '2022-01-15 10:30:00',
      pushed_at: '2022-01-15 10:30:00',
      is_read: false,
      id: '1',
      context: {},
      body: 'De nieuwe brug is geplaatst'
    }
  }
}`,...(F=(w=h.parameters)==null?void 0:w.docs)==null?void 0:F.source}}};const At=["Default"];export{h as Default,At as __namedExportsOrder,Mt as default};
