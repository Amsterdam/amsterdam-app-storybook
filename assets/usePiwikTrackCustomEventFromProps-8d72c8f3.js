import{r as i}from"./index-76fb7be0.js";import{n as V,g as F}from"./getCurrentModuleSlugFromNavigationRootState-894d5e8f.js";import{b as K,c as W,d as N}from"./development-c7ad5cf4.js";import{V as z,a as j,P as S,b as P,c as B,d as $}from"./index-e454650f.js";import{u as A}from"./useSentry-fc738ad7.js";import{j as G}from"./index-1401012c.js";import{P as Y}from"./invariant-f1a82cf7.js";import{N as k}from"./index-14cede91.js";import{S as g,s as H}from"./logging-6b5dcfe6.js";var M=(t=>(t[t.searchTerm=3]="searchTerm",t[t.searchResultAmount=4]="searchResultAmount",t[t.searchType=5]="searchType",t[t.searchResultTitle=6]="searchResultTitle",t[t.searchResultUrl=7]="searchResultUrl",t[t.searchResultType=8]="searchResultType",t[t.searchResultSelected=9]="searchResultSelected",t[t.contentTitle=10]="contentTitle",t[t.contentSubject=11]="contentSubject",t[t.contentTeam=12]="contentTeam",t[t.contentPublicationDate=13]="contentPublicationDate",t[t.contentType=14]="contentType",t[t.userIntext=15]="userIntext",t[t.searchMachine=16]="searchMachine",t[t.pageType=17]="pageType",t[t.contentId=20]="contentId",t[t.newState=36]="newState",t))(M||{}),_=(t=>(t[t.userType=1]="userType",t[t.userCity=2]="userCity",t[t.appVersion=18]="appVersion",t[t.appVersionWithBuild=19]="appVersionWithBuild",t[t.reduceMotionEnabled=21]="reduceMotionEnabled",t[t.screenReaderEnabled=22]="screenReaderEnabled",t[t.accessibilityServiceEnabled=23]="accessibilityServiceEnabled",t[t.boldTextEnabled=24]="boldTextEnabled",t[t.grayscaleEnabled=25]="grayscaleEnabled",t[t.invertColorsEnabled=26]="invertColorsEnabled",t[t.reduceTransparencyEnabled=27]="reduceTransparencyEnabled",t[t.fontScale=28]="fontScale",t[t.isLandscape=29]="isLandscape",t[t.isPortrait=30]="isPortrait",t[t.isTablet=31]="isTablet",t[t.hasCameraPermission=32]="hasCameraPermission",t[t.hasPhotosPermission=33]="hasPhotosPermission",t[t.hasLocationPermission=34]="hasLocationPermission",t[t.hasNotificationPermission=35]="hasNotificationPermission",t))(_||{}),X=(t=>(t.accessibilityAction="accessibilityAction",t.accessibilityChange="accessibilityChange",t.addressAdd="addressAdd",t.addressChange="addressChange",t.buttonPress="buttonPress",t.deviceInfoChange="deviceInfoChange",t.radioChange="radioChange",t.startUp="startUp",t.swipeOut="swipeOut",t.toForeground="toForeground",t.toggle="toggle",t))(X||{}),p=(t=>(t.alreadyInitialized="Piwik Pro SDK has been already initialized",t.missingEnvVars="PIWIK_PRO_URL or PIWIK_PRO_ID are not defined in env",t))(p||{});const q=(t,e)=>!(e!=null&&e.id)&&typeof(e==null?void 0:e.id)!="number"?t:{...t,[M.contentId]:e.id.toString()},J=t=>(t==null?void 0:t.screenTitle)??(t==null?void 0:t.screenHeaderTitle),Q=t=>{if(t)return Object.keys(t).filter(e=>t[e]!==void 0).reduce((e,a)=>({...e,[a]:t[a]}),{})},Z={[_.appVersion]:z,[_.appVersionWithBuild]:j},b=t=>Q({...t,...Z});function D(t){if(!Number.isInteger(t))throw new Error("Parameter must be an integer number")}function T(t){t&&Object.entries(t).forEach(e=>{let[a,u]=e;const n=parseInt(a,10);if(a!==n.toString())throw new Error("ID (key) must be an integer");if(n<1)throw new Error("ID (key) must be an integer greater than 0")})}function m(t){t.forEach(e=>{let a=e.customDimensions;if(a){if(Object.keys(a).length>20)throw new Error("Max 20 product custom dimensions, 20 is max ID.");T(a)}})}function tt(t){if(!/^[0-9a-f]{16}$/.test(t))throw new Error(`Visitor ID ${t} has invalid format. The format must match the regular expression: ^[0-9a-f]{16}$`)}const et="1.1.0",at=`The package 'react-native-piwik-pro-sdk' doesn't seem to be linked. Make sure: 

`+Y.select({ios:`- You have run 'pod install'
`,default:""})+`- You rebuilt the app after installing the package
- You are not using Expo managed workflow
`,r=k.PiwikProSdk?k.PiwikProSdk:new Proxy({},{get(){throw new Error(at)}});async function rt(t,e){return await r.init(t,e,et)}async function ct(t,e){return s(e),await r.trackScreen(t,e)}async function nt(t,e,a){return s(a),await r.trackCustomEvent(t,e,a)}async function ut(t,e){return s(e),await r.trackException(t,e)}async function st(t,e,a){return s(a),await r.trackSocialInteraction(t,e,a)}async function ot(t,e){return s(e),await r.trackDownload(t,e)}async function lt(){return await r.trackApplicationInstall()}async function dt(t,e){return s(e),await r.trackOutlink(t,e)}async function ft(t,e){return s(e),await r.trackSearch(t,e)}async function it(t,e){return s(e),await r.trackImpression(t,e)}async function yt(t,e,a){return s(a),await r.trackInteraction(t,e,a)}async function ht(t,e){return s(e),await r.trackGoal(t,e)}async function gt(t,e,a){return await r.trackEcommerce(t,e,a)}async function It(t,e){return s(e),m(t),await r.trackEcommerceProductDetailView(t,e)}async function mt(t,e,a){return s(a),m(t),await r.trackEcommerceCartUpdate(t,e,a)}async function Et(t,e){return s(e),m(t),await r.trackEcommerceAddToCart(t,e)}async function bt(t,e){return s(e),m(t),await r.trackEcommerceRemoveFromCart(t,e)}async function Ct(t,e,a,u){return s(u),m(a),await r.trackEcommerceOrder(t,e,a,u)}async function vt(t){return await r.trackCampaign(t)}async function Tt(t){if(Array.isArray(t)){if(!t.length)throw new Error("Profile attributes cannot be an empty array");return await r.trackProfileAttributes(t)}return await r.trackProfileAttributes([t])}async function pt(){return await r.getProfileAttributes()}async function Rt(t){return await r.checkAudienceMembership(t)}async function _t(t){return await r.setUserId(t)}async function Ot(){return await r.getUserId()}async function Vt(t){return await r.setUserEmail(t)}async function kt(){return await r.getUserEmail()}async function wt(t){return tt(t),await r.setVisitorId(t)}async function xt(){return await r.getVisitorId()}async function Ut(t){return await r.setSessionTimeout(t)}async function Nt(){return await r.getSessionTimeout()}async function At(){return await r.startNewSession()}async function Mt(){return await r.dispatch()}async function Lt(t){return D(t),await r.setDispatchInterval(t)}async function Ft(){return await r.getDispatchInterval()}async function Kt(t){return await r.setIncludeDefaultCustomVariables(t)}async function Wt(){return await r.getIncludeDefaultCustomVariables()}async function zt(t){return await r.setAnonymizationState(t)}async function jt(){return await r.isAnonymizationOn()}async function St(t){return await r.setOptOut(t)}async function Pt(t){return await r.setDryRun(t)}async function Bt(){return await r.getDryRun()}async function $t(){return await r.getOptOut()}async function Gt(t){return await r.setPrefixing(t)}async function Yt(){return await r.isPrefixingOn()}function s(t){T(t==null?void 0:t.customDimensions),T(t==null?void 0:t.visitCustomVariables),T(t==null?void 0:t.screenCustomVariables)}const I={init:rt,trackScreen:ct,trackCustomEvent:nt,trackException:ut,trackSocialInteraction:st,trackDownload:ot,trackApplicationInstall:lt,trackOutlink:dt,trackSearch:ft,trackImpression:it,trackInteraction:yt,trackGoal:ht,trackEcommerce:gt,trackEcommerceProductDetailView:It,trackEcommerceCartUpdate:mt,trackEcommerceAddToCart:Et,trackEcommerceRemoveFromCart:bt,trackEcommerceOrder:Ct,trackCampaign:vt,trackProfileAttributes:Tt,getProfileAttributes:pt,checkAudienceMembership:Rt,setUserId:_t,getUserId:Ot,setUserEmail:Vt,getUserEmail:kt,setVisitorId:wt,getVisitorId:xt,setSessionTimeout:Ut,getSessionTimeout:Nt,startNewSession:At,dispatch:Mt,setDispatchInterval:Lt,getDispatchInterval:Ft,setIncludeDefaultCustomVariables:Kt,getIncludeDefaultCustomVariables:Wt,setAnonymizationState:zt,isAnonymizationOn:jt,setOptOut:St,getOptOut:$t,setDryRun:Pt,getDryRun:Bt,setPrefixing:Gt,isPrefixingOn:Yt},[w,x]=K?[S,P]:[B,$],Ht=async()=>!w||!x?Promise.reject(p.missingEnvVars):(await I.init(w,x),await I.trackApplicationInstall(),await I.setIncludeDefaultCustomVariables(!0),Promise.resolve()),R=i.createContext(void 0),U=({children:t})=>{const{sendSentryErrorLog:e}=A(),[a,u]=i.useState();return i.useEffect(()=>{a===void 0&&Ht().then(()=>{u(I)}).catch(n=>{if(n.message===p.alreadyInitialized){u(I);return}u(null),n.message!==p.missingEnvVars&&e(g.piwikInitialization,"piwik.provider.tsx",{error:n})})},[a,e]),G(R.Provider,{value:a,children:t})};try{R.displayName="PiwikContext",R.__docgenInfo={description:"The PiwikContext contains the object with all methods, to be used via the usePiwik hook only.",displayName:"PiwikContext",props:{}}}catch{}try{U.displayName="PiwikProvider",U.__docgenInfo={description:"",displayName:"PiwikProvider",props:{}}}catch{}const C=()=>N("piwik not initialized"),Xt={ready:!1,trackCustomEvent:C,trackOutlink:C,trackScreen:C,trackSearch:C},v="usePiwik.ts",qt=({trackCustomEvent:t,trackOutlink:e,trackScreen:a,trackSearch:u},n,E,f,y)=>({ready:!0,trackCustomEvent:(o,c,l,d=E,h=void 0)=>{W("trackCustomEvent",{name:o,action:c,dimensions:l,category:d,value:h}),t(d,c,{path:f,customDimensions:b(l),value:h}).catch(()=>{n(g.piwikTrackCustomEvent,v,{category:d,action:c,name:o,path:f,value:h})})},trackOutlink:(o,c)=>{const l=H(o);e(l,{...c,customDimensions:b(c==null?void 0:c.customDimensions)}).catch(()=>{n(g.piwikTrackOutlink,v,{url:l})})},trackScreen:(o,c)=>{const l=o??f;if(!l)return;const d=q(c==null?void 0:c.customDimensions,y);a(l,{...c,title:J(y),customDimensions:b(d)}).catch(()=>{n(g.piwikTrackScreen,v,{path:o})})},trackSearch:(o,c)=>{u(o,{...c,customDimensions:b(c==null?void 0:c.customDimensions)}).catch(()=>{n(g.piwikTrackSearch,v)})}}),Jt=()=>{const t=i.useContext(R),{sendSentryErrorLog:e}=A(),a=V.isReady()?V.getCurrentRoute():void 0,u=F()??"general";return i.useMemo(()=>t?qt(t,e,u,a==null?void 0:a.name,a==null?void 0:a.params):Xt,[t,e,u,a==null?void 0:a.name,a==null?void 0:a.params])},Qt=t=>{const e=t.logName??t["sentry-label"]??t.testID;return e||N("No name found in props"),e},se=({logAction:t,logCategory:e,logDimensions:a={},logValue:u,onEvent:n,testID:E,logName:f,"sentry-label":y})=>{const{trackCustomEvent:o}=Jt();return i.useCallback((c,{nameSuffix:l,dimensions:d={},action:h=t}={})=>{n==null||n(c);const O=Qt({testID:E,logName:f,"sentry-label":y});if(O){const L=l?`:${l}`:"";o(`${O}${L}`,h,{...a,...d},e,u)}},[t,e,a,f,u,n,y,E,o])};export{X as P,M as a,se as u};
