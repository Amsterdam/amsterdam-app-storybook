import{j as t}from"./jsx-runtime-DNHyKP0h.js";import{r as p}from"./index-B-xgG2PE.js";import{P}from"./Pressable-COBztUDM.js";import{B as g}from"./Badge-BYLpRoy1.js";import{P as u}from"./PleaseWait-Cw5BE80A.js";import{S as h}from"./SomethingWentWrong-BqkD4aCF.js";import{C as v}from"./Column-CNEXbMdz.js";import{R as d}from"./Row-BvNvwgkX.js";import{P as x}from"./Phrase-C8sCjSjt.js";import{T as n}from"./Title-DE9ozyvI.js";import{u as S}from"./useNavigation-CzlnAToN.js";import{u as j}from"./useBoolean-DwbfAoJh.js";import{u as k,a as A}from"./useGetParkingSessions-Cxao_4Pe.js";import{P as I}from"./ParkingActiveSessionNavigationButton-zooHZus7.js";import{u as _}from"./useCurrentParkingPermit.web-DpIhF-QI.js";import{P as B}from"./routes-CtH9nUKh.js";import{u as D}from"./slice-CjYaxz-7.js";import{a as R,b as E}from"./types-C2OYdTo_.js";const Q=()=>{const{navigate:m}=S(),{parkingSessions:e,isLoading:f,isError:c,refetch:r}=k(E.active),i=D(),l=_(),{value:o,enable:a}=j(!1);return p.useEffect(()=>{(i==null?void 0:i.scope)!==R.visitor&&!o&&e!=null&&e.some(s=>!s.ps_right_id)&&(r(),a())},[e,o,i==null?void 0:i.scope,r,a]),A(r,e!=null&&e.some(s=>"is_paid"in s&&!s.is_paid)?5e3:0),f?t.jsx(u,{testID:"ParkingPermitSessionsActivePleaseWait"}):c?t.jsx(h,{testID:"ParkingActiveSessionsSummarySomethingWentWrong"}):!e||e.length<=5?t.jsxs(v,{gutter:"sm",children:[t.jsx(n,{level:"h5",testID:"ParkingPermitSessionsActiveTitle",text:"Nu actief"}),e!=null&&e.length?e.map(s=>t.jsx(I,{noEndTime:l.no_endtime,parkingSession:s},s.ps_right_id??s.vehicle_id)):t.jsx(x,{testID:"ParkingPermitSessionsActiveNotActivePhrase",children:"Er zijn geen actieve parkeersessies."})]}):t.jsx(P,{accessibilityLabel:`${e.length} actieve parkeersessies`,onPress:()=>m(B.parkingActiveSessions),testID:"ParkingPermitSessionsActiveBadgeButton",children:t.jsxs(d,{gutter:"sm",children:[t.jsx(n,{color:"link",level:"h5",testID:"ParkingPermitSessionsActiveTitle",text:"Actief"}),t.jsx(g,{color:"info",testID:"ParkingPermitSessionsActiveBadge",value:e.length})]})})};export{Q as P};
