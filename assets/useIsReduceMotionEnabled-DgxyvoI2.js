import{r as a}from"./index-B-xgG2PE.js";import{a as N}from"./_commonjsHelpers-D6-XlEtG.js";import{A as u}from"./index-DeJff1tQ.js";import{N as l,a as S}from"./NativeEventEmitter-CjF4_R2K.js";import{P as d}from"./index-BiinuClr.js";import{A as E}from"./index-996-O__M.js";const m="ReactNativeAppLifecycle",_="ON_START",L="ON_STOP",v=[];let s=u.currentState;const O=(e,t)=>(t.push(e),{remove:()=>{const r=t.indexOf(e);r!==-1&&t.splice(r,1)}}),T=(e,t)=>e==="change"?O(t,v):u.addEventListener(e,t),b=(e,t)=>{e!==t&&v.forEach(r=>r(t))},M=new l(S[m]);M.addListener(m,e=>{const t=s;switch(e.type){case _:s="active";break;case L:s="background";break;default:s="unknown"}b(t,s)});const R={addEventListener:T,get currentState(){return s},get isAvailable(){return s!=="unknown"}},y=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"})),o=N(y),P={addEventListener(e,t){return d.OS==="android"?o.default.addEventListener(e,t):u.addEventListener(e,t)},get currentState(){return d.OS==="android"?o.default.currentState:u.currentState},get isAvailable(){return d.OS==="android"?o.default.isAvailable:u.isAvailable}},w=({onChange:e,onForeground:t,onBackground:r,onInactive:i}={})=>{const c=a.useRef("unknown");a.useEffect(()=>{const A=n=>{c.current!=="active"&&n==="active"?t==null||t():c.current!=="inactive"&&n==="inactive"?i==null||i():c.current!=="background"&&n==="background"&&(r==null||r()),e==null||e(n),c.current=n},p=P.addEventListener("change",A);return()=>p.remove()},[e,t,r,i])};let f=!1;const z=({callback:e,callbackAfterAppStateChange:t=!0}={},r=[])=>(w({onForeground:()=>{E.isReduceMotionEnabled().then(i=>{f=i,t&&(e==null||e(i))})}}),a.useEffect(()=>{E.isReduceMotionEnabled().then(i=>{f=i,e==null||e(i)})},r),f);export{P as A,f as i,z as u};
