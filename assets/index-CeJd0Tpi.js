import{_ as Te}from"./extends-CF3RwP-h.js";import{c as se,s as ge,_ as Ie}from"./index-DaXhXLBr.js";import{r as E}from"./index-Cs7sjTYM.js";import{i as ee,h as ue,g as xe}from"./TextAncestorContext-aRigYKLY.js";import{u as _e}from"./index-KNTxeJap.js";import{V as Ue}from"./index-CVb019Wa.js";var ke=()=>{};function De(){var e=!1;if(se)try{var n={};Object.defineProperty(n,"passive",{get(){return e=!0,!1}}),window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{}return e}var Fe=De();function Ke(e){return e==null?!1:Fe?e:!!e.capture}function Ne(){return this.cancelBubble}function Be(){return this.defaultPrevented}function Re(e){return e.nativeEvent=e,e.persist=ke,e.isDefaultPrevented=Be,e.isPropagationStopped=Ne,e}function i(e,n,r,s){var o=Ke(s),u=a=>r(Re(a));return e.addEventListener(n,u,o),function(){e!=null&&e.removeEventListener(n,u,o)}}var Ae=()=>typeof window<"u"&&window.PointerEvent!=null,m="keyboard",l="keyboard",_,U,k=!1,Ve=new Set,D="keyboard",g="mouse",X="touch",We="blur",ie="contextmenu",Ye="focus",je="keydown",le="mousedown",ve="mousemove",de="mouseup",ce="pointerdown",fe="pointermove",ye="scroll",me="selectionchange",Ee="touchcancel",Pe="touchmove",be="touchstart",$e="visibilitychange",ne={passive:!0},d={capture:!0,passive:!0};function pe(){(_!=null||U!=null)&&(_!=null&&(l=_,_=null),U!=null&&(m=U,U=null),O())}function Ge(){_=l,U=m,m=D,l=D,O(),k=!1}function Xe(){pe()}function ze(e){e.metaKey||e.altKey||e.ctrlKey||l!==D&&(l=D,m=D,O())}function qe(){document.visibilityState!=="hidden"&&pe()}function y(e){var n=e.type;if(Ae()){if(n===ce){m!==e.pointerType&&(l=e.pointerType,m=e.pointerType,O());return}if(n===fe){l!==e.pointerType&&(l=e.pointerType,O());return}}else{if(k||(n===le&&m!==g&&(l=g,m=g,O()),n===ve&&l!==g&&(l=g,O())),n===be){k=!0,e.touches&&e.touches.length>1&&(k=!1),m!==X&&(l=X,m=X,O());return}(n===ie||n===de||n===me||n===ye||n===Ee||n===Pe)&&(k=!1)}}se&&(i(window,We,Ge,ne),i(window,Ye,Xe,ne),i(document,je,ze,d),i(document,$e,qe,d),i(document,ce,y,d),i(document,fe,y,d),i(document,ie,y,d),i(document,le,y,d),i(document,ve,y,d),i(document,de,y,d),i(document,Ee,y,d),i(document,Pe,y,d),i(document,be,y,d),i(document,me,y,d),i(document,ye,y,d));function O(){var e={activeModality:m,modality:l};Ve.forEach(n=>{n(e)})}function Je(){return l}function I(e,n){var r=ee(()=>new Map),s=ee(()=>(o,u)=>{var a=r.get(o);a!=null&&a(),u==null&&(r.delete(o),u=()=>{});var v=i(o,e,u,n);return r.set(o,v),v});return ue(()=>()=>{r.forEach(o=>{o()}),r.clear()},[r]),s}var Qe={},x={passive:!0},te="react-gui:hover:lock",re="react-gui:hover:unlock",Ze=()=>typeof window<"u"&&window.PointerEvent!=null;function oe(e,n,r){var s=document.createEvent("CustomEvent"),o=Qe,u=o.bubbles,a=u===void 0?!0:u,v=o.cancelable,P=v===void 0?!0:v,b=o.detail;s.initCustomEvent(n,a,P,b),e.dispatchEvent(s)}function z(e){var n=e.pointerType;return n??Je()}function en(e,n){var r=n.contain,s=n.disabled,o=n.onHoverStart,u=n.onHoverChange,a=n.onHoverUpdate,v=n.onHoverEnd,P=Ze(),b=I(P?"pointermove":"mousemove",x),F=I(P?"pointerenter":"mouseenter",x),H=I(P?"pointerleave":"mouseleave",x),L=I(te,x),S=I(re,x);ue(()=>{var p=e.current;if(p!==null){var T=function(t){v!=null&&v(t),u!=null&&u(!1),b(p,null),H(p,null)},K=function(t){var c=e.current;c!=null&&z(t)!=="touch"&&(r&&oe(c,re),T(t))},N=function(t){z(t)!=="touch"&&a!=null&&(t.x==null&&(t.x=t.clientX),t.y==null&&(t.y=t.clientY),a(t))},w=function(t){o!=null&&o(t),u!=null&&u(!0),a!=null&&b(p,s?null:N),H(p,s?null:K)},B=function(t){var c=e.current;if(c!=null&&z(t)!=="touch"){r&&oe(c,te),w(t);var R=function(M){M.target!==c&&T(t)},V=function(M){M.target!==c&&w(t)};L(c,s?null:R),S(c,s?null:V)}};F(p,s?null:B)}},[F,b,H,L,S,r,s,o,u,a,v,e])}var nn=["children","delayLongPress","delayPressIn","delayPressOut","disabled","onBlur","onContextMenu","onFocus","onHoverIn","onHoverOut","onKeyDown","onLongPress","onPress","onPressMove","onPressIn","onPressOut","style","tabIndex","testOnly_hovered","testOnly_pressed"];function tn(e,n){var r=e.children,s=e.delayLongPress,o=e.delayPressIn,u=e.delayPressOut,a=e.disabled,v=e.onBlur,P=e.onContextMenu,b=e.onFocus,F=e.onHoverIn,H=e.onHoverOut,L=e.onKeyDown,S=e.onLongPress,p=e.onPress,T=e.onPressMove,K=e.onPressIn,N=e.onPressOut,w=e.style,B=e.tabIndex,C=e.testOnly_hovered,t=e.testOnly_pressed,c=Ie(e,nn),R=q(C===!0),V=R[0],W=R[1],M=q(!1),Oe=M[0],A=M[1],J=q(t===!0),he=J[0],Q=J[1],h=E.useRef(null),Le=xe(n,h),we=E.useMemo(()=>({delayLongPress:s,delayPressStart:o,delayPressEnd:u,disabled:a,onLongPress:S,onPress:p,onPressChange:Q,onPressStart:K,onPressMove:T,onPressEnd:N}),[s,o,u,a,S,p,K,T,N,Q]),Y=_e(h,we),j=Y.onContextMenu,$=Y.onKeyDown;en(h,{contain:!0,disabled:a,onHoverChange:W,onHoverStart:F,onHoverEnd:H});var Z={hovered:V,focused:Oe,pressed:he},Ce=E.useCallback(f=>{f.nativeEvent.target===h.current&&(A(!1),v!=null&&v(f))},[h,A,v]),Me=E.useCallback(f=>{f.nativeEvent.target===h.current&&(A(!0),b!=null&&b(f))},[h,A,b]),He=E.useCallback(f=>{j!=null&&j(f),P!=null&&P(f)},[P,j]),Se=E.useCallback(f=>{$!=null&&$(f),L!=null&&L(f)},[L,$]),G;return B!==void 0?G=B:G=a?-1:0,E.createElement(Ue,Te({},c,Y,{"aria-disabled":a,onBlur:Ce,onContextMenu:He,onFocus:Me,onKeyDown:Se,ref:Le,style:[a?ae.disabled:ae.active,typeof w=="function"?w(Z):w],tabIndex:G}),typeof r=="function"?r(Z):r)}function q(e){var n=E.useState(!1),r=n[0],s=n[1];return[r||e,s]}var ae=ge.create({active:{cursor:"pointer",touchAction:"manipulation"},disabled:{pointerEvents:"box-none"}}),rn=E.memo(E.forwardRef(tn));rn.displayName="Pressable";export{rn as M};
