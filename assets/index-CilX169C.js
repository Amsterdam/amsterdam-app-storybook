import{_ as ge,a as me,s as E,d as he,b as k}from"./index-Cm4QxXoK.js";import{_ as be}from"./extends-CF3RwP-h.js";import{r as l}from"./index-B-xgG2PE.js";import{D as H}from"./index-Ri0BYtkV.js";import{T as ye}from"./TextAncestorContext-Z5dgoe9Q.js";import{V as J}from"./index-DoMT7H_C.js";var Se=[];function X(e){return Se[e-1]}var pe=/^data:/;class d{static has(t){var r=d._entries,a=pe.test(t);return a||!!r[t]}static add(t){var r=d._entries,a=Date.now();r[t]?(r[t].lastUsedTimestamp=a,r[t].refCount+=1):r[t]={lastUsedTimestamp:a,refCount:1}}static remove(t){var r=d._entries;r[t]&&(r[t].refCount-=1),d._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var t=d._entries,r=Object.keys(t);if(r.length+1>d._maximumEntries){var a,n;r.forEach(o=>{var u=t[o];(!n||u.lastUsedTimestamp<n.lastUsedTimestamp)&&u.refCount===0&&(a=o,n=u)}),a&&delete t[a]}}}d._maximumEntries=256;d._entries={};var M=0,I={},v={abort(e){var t=I[""+e];t&&(t.onerror=null,t.onload=null,t=null,delete I[""+e])},getSize(e,t,r){var a=!1,n=setInterval(u,16),o=v.load(e,u,g);function u(){var c=I[""+o];if(c){var i=c.naturalHeight,s=c.naturalWidth;i&&s&&(t(s,i),a=!0)}a&&(v.abort(o),clearInterval(n))}function g(){typeof r=="function"&&r(),v.abort(o),clearInterval(n)}},has(e){return d.has(e)},load(e,t,r){M+=1;var a=new window.Image;return a.onerror=r,a.onload=n=>{var o=()=>t({nativeEvent:n});typeof a.decode=="function"?a.decode().then(o,o):setTimeout(o,0)},a.src=e,I[""+M]=a,M},prefetch(e){return new Promise((t,r)=>{v.load(e,()=>{d.add(e),d.remove(e),t()},r)})},queryCache(e){var t={};return e.forEach(r=>{d.has(r)&&(t[r]="disk/memory")}),Promise.resolve(t)}};class w{static get(){return H.get("window").scale}static getFontScale(){return H.get("window").fontScale||w.get()}static getPixelSizeForLayoutSize(t){return Math.round(t*w.get())}static roundToNearestPixel(t){var r=w.get();return Math.round(t*r)/r}}var Ee=["aria-label","accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],we="ERRORED",O="LOADED",Q="LOADING",Le="IDLE",ze=0,xe=/^(data:image\/svg\+xml;utf8,)(.*)/;function ke(e,t){return e&&t!=null?l.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},l.createElement("defs",null,l.createElement("filter",{id:"tint-"+t,suppressHydrationWarning:!0},l.createElement("feFlood",{floodColor:""+e,key:e}),l.createElement("feComposite",{in2:"SourceAlpha",operator:"in"})))):null}function Ie(e,t,r,a){var n=E.flatten(e),o=n.filter,u=n.resizeMode,g=n.shadowOffset,c=n.tintColor;n.resizeMode,n.tintColor;var i=[],s=null;if(o&&i.push(o),t&&i.push("blur("+t+"px)"),g){var m=he(n);m&&i.push("drop-shadow("+m+")")}return(a||c)&&r!=null&&i.push("url(#tint-"+r+")"),i.length>0&&(s=i.join(" ")),[u,s,c]}function De(e){if(typeof e=="number"){var t=X(e),r=t.height,a=t.width;return{height:r,width:a}}else if(e!=null&&!Array.isArray(e)&&typeof e=="object"){var n=e.height,o=e.width;return{height:n,width:o}}}function P(e){var t=null;if(typeof e=="number"){var r=X(e);if(r==null)throw new Error('Image: asset with ID "'+e+'" could not be found. Please check the image source or packager.');var a=r.scales[0];if(r.scales.length>1){var n=w.get();a=r.scales.reduce((s,m)=>Math.abs(m-n)<Math.abs(s-n)?m:s)}var o=a!==1?"@"+a+"x":"";t=r?r.httpServerLocation+"/"+r.name+o+"."+r.type:""}else typeof e=="string"?t=e:e&&typeof e.uri=="string"&&(t=e.uri);if(t){var u=t.match(xe);if(u){var g=u[1],c=u[2],i=encodeURIComponent(c);return""+g+i}}return t}var Y=l.forwardRef((e,t)=>{var r=e["aria-label"],a=e.accessibilityLabel,n=e.blurRadius,o=e.defaultSource,u=e.draggable,g=e.onError,c=e.onLayout,i=e.onLoad,s=e.onLoadEnd,m=e.onLoadStart,Z=e.pointerEvents,D=e.source,T=e.style,K=ge(e,Ee),_=r||a,N=l.useState(()=>{var f=P(D);if(f!=null){var h=v.has(f);if(h)return O}return Le}),j=N[0],L=N[1],q=l.useState({}),F=q[0],ee=q[1],te=l.useContext(ye),C=l.useRef(null),B=l.useRef(ze++),b=l.useRef(null),re=j===O||j===Q&&o==null,R=Ie(T,n,B.current,e.tintColor),ae=R[0],ne=R[1],oe=R[2],y=e.resizeMode||ae||"cover",ie=e.tintColor||oe,U=re?D:o,z=P(U),le=De(U),ue=z?'url("'+z+'")':null,V=de(),se=z?me("img",{alt:_||"",style:p.accessibilityImage$raw,draggable:u||!1,ref:C,src:z}):null;function de(){if(C.current!=null&&(y==="center"||y==="repeat")){var f=C.current,h=f.naturalHeight,S=f.naturalWidth,G=F.height,W=F.width;if(h&&S&&G&&W){var $=Math.min(1,W/S,G/h),fe=Math.ceil($*S),ve=Math.ceil($*h);return fe+"px "+ve+"px"}}}function ce(f){if(y==="center"||y==="repeat"||c){var h=f.nativeEvent.layout;c&&c(f),ee(h)}}var x=P(D);return l.useEffect(()=>{f(),x!=null&&(L(Q),m&&m(),b.current=v.load(x,function(S){L(O),i&&i(S),s&&s()},function(){L(we),g&&g({nativeEvent:{error:"Failed to load resource "+x}}),s&&s()}));function f(){b.current!=null&&(v.abort(b.current),b.current=null)}return f},[x,b,L,g,i,s,m]),l.createElement(J,be({},K,{"aria-label":_,onLayout:ce,pointerEvents:Z,ref:t,style:[p.root,te&&p.inline,le,T,p.undo,{boxShadow:null}]}),l.createElement(J,{style:[p.image,Ce[y],{backgroundImage:ue,filter:ne},V!=null&&{backgroundSize:V}],suppressHydrationWarning:!0}),se,ke(ie,B.current))});Y.displayName="Image";var A=Y;A.getSize=function(e,t,r){v.getSize(e,t,r)};A.prefetch=function(e){return v.prefetch(e)};A.queryCache=function(e){return v.queryCache(e)};var p=E.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},undo:{blurRadius:null,shadowColor:null,shadowOpacity:null,shadowOffset:null,shadowRadius:null,tintColor:null,overlayColor:null,resizeMode:null},image:k(k({},E.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:k(k({},E.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),Ce=E.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}});export{A as I,w as P};
