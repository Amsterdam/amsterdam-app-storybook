import{r as o}from"./index-76fb7be0.js";import{a as l}from"./_commonjsHelpers-de833af9.js";import{A as c}from"./index-5d7f9d89.js";import{N}from"./NativeEventEmitter-7be6cb46.js";import{N as L}from"./index-14cede91.js";import{P as d}from"./invariant-f1a82cf7.js";import{A as p}from"./index-8ad79f0b.js";const m="ReactNativeAppLifecycle",_="ON_START",O="ON_STOP",v=[];let s=c.currentState;const T=(e,t)=>(t.push(e),{remove:()=>{const r=t.indexOf(e);r!==-1&&t.splice(r,1)}}),b=(e,t)=>e==="change"?T(t,v):c.addEventListener(e,t),y=(e,t)=>{e!==t&&v.forEach(r=>r(t))},M=new N(L[m]);M.addListener(m,e=>{const t=s;switch(e.type){case _:s="active";break;case O:s="background";break;default:s="unknown"}y(t,s)});const R={addEventListener:b,get currentState(){return s},get isAvailable(){return s!=="unknown"}},P=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"})),a=l(P),E={addEventListener(e,t){return d.OS==="android"?a.default.addEventListener(e,t):c.addEventListener(e,t)},get currentState(){return d.OS==="android"?a.default.currentState:c.currentState},get isAvailable(){return d.OS==="android"?a.default.isAvailable:c.isAvailable}},V=()=>{const[e,t]=o.useState(E.currentState);return o.useEffect(()=>{const r=E.addEventListener("change",i=>{t(i)});return()=>r.remove()},[]),e},w=({onChange:e,onForeground:t,onBackground:r,onInactive:i}={})=>{const n=V();return o.useEffect(()=>{const A=u=>{n!=="active"&&u==="active"?t==null||t():n!=="inactive"&&u==="inactive"?i==null||i():n!=="background"&&u==="background"&&(r==null||r()),e==null||e(u)},S=E.addEventListener("change",A);return()=>S.remove()},[e,t,r,i,n]),n};let f=!1;const x=({callback:e,callbackAfterAppStateChange:t=!0}={},r=[])=>(w({onForeground:()=>{p.isReduceMotionEnabled().then(i=>{f=i,t&&(e==null||e(i))})}}),o.useEffect(()=>{p.isReduceMotionEnabled().then(i=>{f=i,e==null||e(i)})},r),f);export{f as i,x as u};
