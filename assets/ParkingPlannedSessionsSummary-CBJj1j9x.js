import{aF as u,r as c,ap as r,a as f,aG as h,j as t,aC as p}from"./iframe-SBnegFsJ.js";import{P as x}from"./Pressable-sz6G5WJt.js";import{B as j}from"./Badge-BkOlcAy8.js";import{P as k}from"./PleaseWait-CR1Ps6SI.js";import{S as v}from"./SomethingWentWrong-Bemixblt.js";import{C as S}from"./Column-Ba3EH6EQ.js";import{R as D}from"./Row-4_InZ7s7.js";import{P as I}from"./Phrase-DnPMtQQR.js";import{T as o}from"./Title-CaQdwlAZ.js";import{u as _}from"./useNavigation-C7UzPgRO.js";import{u as R,a as T,b as W}from"./useGetParkingSessions-Bws9yDiN.js";const F=()=>{const{navigate:m}=_(),{parkingSessions:e,isLoading:l,isError:d,refetch:a}=R(u.planned);c.useEffect(()=>{e!=null&&e.some(s=>!s.ps_right_id)&&a()},[e,a]),T(a,e!=null&&e.some(s=>"is_paid"in s&&!s.is_paid)?15e3:0);const i=e!=null&&e.length?e.reduce((s,g)=>{const n=r(g.start_date_time);return n.isAfter(s)?s:n},r(e[0].start_date_time)):void 0,P=f();return W(()=>{P(h.util.invalidateTags(["ParkingSessions"]))},e!=null&&e.length?Math.max((i==null?void 0:i.endOf("minute").diff(r(),"milliseconds"))??0,3e4):0),l?t.jsx(k,{testID:"ParkingPermitSessionsPlannedPleaseWait"}):d?t.jsx(v,{testID:"ParkingPlannedSessionsSummarySomethingWentWrong"}):e!=null&&e.length?t.jsx(x,{accessibilityLabel:`${e.length} geplande parkeersessies`,onPress:()=>m(p.parkingPlannedSessions),testID:"ParkingPermitSessionsPlannedBadgeButton",children:t.jsxs(D,{gutter:"sm",children:[t.jsx(o,{color:"link",level:"h5",testID:"ParkingPermitSessionsPlannedTitle",text:"Gepland"}),t.jsx(j,{color:"info",testID:"ParkingPermitSessionsPlannedBadge",value:e.length})]})}):t.jsxs(S,{gutter:"sm",children:[t.jsx(o,{level:"h5",testID:"ParkingPermitSessionsPlannedTitle",text:"Gepland"}),t.jsx(I,{testID:"ParkingPermitSessionsPlannedNoPlannedPhrase",children:"Er zijn geen geplande parkeersessies."})]})};export{F as P};
