import{_ as H}from"./extends-CF3RwP-h.js";import{_ as se,s as j,b as S,c as Oe}from"./index-BRs9ZavV.js";import{V as E}from"./index-DNzWYFc8.js";import{P as xe,i as g,D as Pe}from"./index-C9LjRz3B.js";import{R as F,r as m}from"./index-Cs7sjTYM.js";import{U as ue,g as Ve,j as ze}from"./TextAncestorContext-CgUd_yOy.js";import{g as Fe}from"./_commonjsHelpers-BosuxZz1.js";import{E as De}from"./NativeEventEmitter-CdIviC7q.js";var Ne=function i(e,t,r){if(r===void 0&&(r=-1),r===0)return!0;if(e===t||typeof e=="function"&&typeof t=="function")return!1;if(typeof e!="object"||e===null)return e!==t;if(typeof t!="object"||t===null||e.constructor!==t.constructor)return!0;if(Array.isArray(e)){var n=e.length;if(t.length!==n)return!0;for(var l=0;l<n;l++)if(i(e[l],t[l],r-1))return!0}else{for(var a in e)if(i(e[a],t[a],r-1))return!0;for(var s in t)if(e[s]===void 0&&t[s]!==void 0)return!0}return!1};function ve(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function Ae(i,e){if(i){if(typeof i=="string")return ve(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ve(i,e):void 0}}function B(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=Ae(i))||e){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ke=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function Be(i){i.colors,i.enabled,i.onRefresh,i.progressBackgroundColor,i.progressViewOffset,i.refreshing,i.size,i.tintColor,i.title,i.titleColor;var e=se(i,Ke);return F.createElement(E,e)}var X={_currentlyFocusedNode:null,currentlyFocusedField(){return document.activeElement!==this._currentlyFocusedNode&&(this._currentlyFocusedNode=null),this._currentlyFocusedNode},focusTextInput(i){i!==null&&(this._currentlyFocusedNode=i,document.activeElement!==i&&ue.focus(i))},blurTextInput(i){i!==null&&(this._currentlyFocusedNode=null,document.activeElement===i&&ue.blur(i))}},We=()=>{X.blurTextInput(X.currentlyFocusedField())},$e=["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"];function ge(i){return{nativeEvent:{contentOffset:{get x(){return i.target.scrollLeft},get y(){return i.target.scrollTop}},contentSize:{get height(){return i.target.scrollHeight},get width(){return i.target.scrollWidth}},layoutMeasurement:{get height(){return i.target.offsetHeight},get width(){return i.target.offsetWidth}}},timeStamp:Date.now()}}function Ue(i,e){var t=Date.now()-i;return e>0&&t>=e}var je=m.forwardRef((i,e)=>{var t=i.onScroll,r=i.onTouchMove,n=i.onWheel,l=i.scrollEnabled,a=l===void 0?!0:l,s=i.scrollEventThrottle,o=s===void 0?0:s,h=i.showsHorizontalScrollIndicator,c=i.showsVerticalScrollIndicator,u=i.style,d=se(i,$e),f=m.useRef({isScrolling:!1,scrollLastTick:0}),p=m.useRef(null),v=m.useRef(null);function y(_){return w=>{a&&_&&_(w)}}function C(_){_.stopPropagation(),_.target===v.current&&(_.persist(),p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{T(_)},100),f.current.isScrolling?Ue(f.current.scrollLastTick,o)&&R(_):b(_))}function b(_){f.current.isScrolling=!0,R(_)}function R(_){f.current.scrollLastTick=Date.now(),t&&t(ge(_))}function T(_){f.current.isScrolling=!1,t&&t(ge(_))}var L=h===!1||c===!1;return m.createElement(E,H({},d,{onScroll:C,onTouchMove:y(r),onWheel:y(n),ref:Ve(v,e),style:[u,!a&&_e.scrollDisabled,L&&_e.hideScrollbar]}))}),_e=j.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});function ie(i){return function(){return i}}var W=function(){};W.thatReturns=ie;W.thatReturnsFalse=ie(!1);W.thatReturnsTrue=ie(!0);W.thatReturnsNull=ie(null);W.thatReturnsThis=function(){return this};W.thatReturnsArgument=function(i){return i};var qe=W,Ge=qe,Ye=Ge,Qe=Ye;const Xe=Fe(Qe);var Je=["contentContainerStyle","horizontal","onContentSizeChange","refreshControl","stickyHeaderIndices","pagingEnabled","forwardedRef","keyboardDismissMode","onScroll","centerContent"],ye={},Ze=16;class et extends F.Component{constructor(){super(...arguments),this._scrollNodeRef=null,this._innerViewRef=null,this.isTouching=!1,this.lastMomentumScrollBeginTime=0,this.lastMomentumScrollEndTime=0,this.observedScrollSinceBecomingResponder=!1,this.becameResponderWhileAnimating=!1,this.scrollResponderHandleScrollShouldSetResponder=()=>this.isTouching,this.scrollResponderHandleStartShouldSetResponderCapture=e=>this.scrollResponderIsAnimating(),this.scrollResponderHandleTerminationRequest=()=>!this.observedScrollSinceBecomingResponder,this.scrollResponderHandleTouchEnd=e=>{var t=e.nativeEvent;this.isTouching=t.touches.length!==0,this.props.onTouchEnd&&this.props.onTouchEnd(e)},this.scrollResponderHandleResponderRelease=e=>{this.props.onResponderRelease&&this.props.onResponderRelease(e);var t=X.currentlyFocusedField();!this.props.keyboardShouldPersistTaps&&t!=null&&e.target!==t&&!this.observedScrollSinceBecomingResponder&&!this.becameResponderWhileAnimating&&(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(e),X.blurTextInput(t))},this.scrollResponderHandleScroll=e=>{this.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(e)},this.scrollResponderHandleResponderGrant=e=>{this.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(e),this.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},this.scrollResponderHandleScrollBeginDrag=e=>{this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(e)},this.scrollResponderHandleScrollEndDrag=e=>{this.props.onScrollEndDrag&&this.props.onScrollEndDrag(e)},this.scrollResponderHandleMomentumScrollBegin=e=>{this.lastMomentumScrollBeginTime=Date.now(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(e)},this.scrollResponderHandleMomentumScrollEnd=e=>{this.lastMomentumScrollEndTime=Date.now(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(e)},this.scrollResponderHandleTouchStart=e=>{this.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(e)},this.scrollResponderHandleTouchMove=e=>{this.props.onTouchMove&&this.props.onTouchMove(e)},this.scrollResponderIsAnimating=()=>{var e=Date.now(),t=e-this.lastMomentumScrollEndTime,r=t<Ze||this.lastMomentumScrollEndTime<this.lastMomentumScrollBeginTime;return r},this.scrollResponderScrollTo=(e,t,r)=>{if(typeof e=="number")console.warn("`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.");else{var n=e||ye;e=n.x,t=n.y,r=n.animated}var l=this.getScrollableNode(),a=e||0,s=t||0;l!=null&&(typeof l.scroll=="function"?l.scroll({top:s,left:a,behavior:r?"smooth":"auto"}):(l.scrollLeft=a,l.scrollTop=s))},this.scrollResponderZoomTo=(e,t)=>{xe.OS!=="ios"&&g("zoomToRect is not implemented")},this.scrollResponderScrollNativeHandleToKeyboard=(e,t,r)=>{this.additionalScrollOffset=t||0,this.preventNegativeScrollOffset=!!r,ue.measureLayout(e,this.getInnerViewNode(),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard)},this.scrollResponderInputMeasureAndScrollToKeyboard=(e,t,r,n)=>{var l=Pe.get("window").height;this.keyboardWillOpenTo&&(l=this.keyboardWillOpenTo.endCoordinates.screenY);var a=t-l+n+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(a=Math.max(0,a)),this.scrollResponderScrollTo({x:0,y:a,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},this.scrollResponderKeyboardWillShow=e=>{this.keyboardWillOpenTo=e,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(e)},this.scrollResponderKeyboardWillHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(e)},this.scrollResponderKeyboardDidShow=e=>{e&&(this.keyboardWillOpenTo=e),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(e)},this.scrollResponderKeyboardDidHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(e)},this.flashScrollIndicators=()=>{this.scrollResponderFlashScrollIndicators()},this.getScrollResponder=()=>this,this.getScrollableNode=()=>this._scrollNodeRef,this.getInnerViewRef=()=>this._innerViewRef,this.getInnerViewNode=()=>this._innerViewRef,this.getNativeScrollRef=()=>this._scrollNodeRef,this.scrollTo=(e,t,r)=>{if(typeof e=="number")console.warn("`scrollTo(y, x, animated)` is deprecated. Use `scrollTo({x: 5, y: 5, animated: true})` instead.");else{var n=e||ye;t=n.x,e=n.y,r=n.animated}this.scrollResponderScrollTo({x:t||0,y:e||0,animated:r!==!1})},this.scrollToEnd=e=>{var t=(e&&e.animated)!==!1,r=this.props.horizontal,n=this.getScrollableNode(),l=r?n.scrollWidth:0,a=r?0:n.scrollHeight;this.scrollResponderScrollTo({x:l,y:a,animated:t})},this._handleContentOnLayout=e=>{var t=e.nativeEvent.layout,r=t.width,n=t.height;this.props.onContentSizeChange(r,n)},this._handleScroll=e=>{this.props.keyboardDismissMode==="on-drag"&&We(),this.scrollResponderHandleScroll(e)},this._setInnerViewRef=e=>{this._innerViewRef=e},this._setScrollNodeRef=e=>{this._scrollNodeRef=e,e!=null&&(e.getScrollResponder=this.getScrollResponder,e.getInnerViewNode=this.getInnerViewNode,e.getInnerViewRef=this.getInnerViewRef,e.getNativeScrollRef=this.getNativeScrollRef,e.getScrollableNode=this.getScrollableNode,e.scrollTo=this.scrollTo,e.scrollToEnd=this.scrollToEnd,e.flashScrollIndicators=this.flashScrollIndicators,e.scrollResponderZoomTo=this.scrollResponderZoomTo,e.scrollResponderScrollNativeHandleToKeyboard=this.scrollResponderScrollNativeHandleToKeyboard);var t=ze(this.props.forwardedRef);t(e)}}scrollResponderHandleStartShouldSetResponder(){return!1}scrollResponderHandleResponderReject(){Xe(!1,"ScrollView doesn't take rejection well - scrolls anyway")}scrollResponderFlashScrollIndicators(){}scrollResponderTextInputFocusError(e){console.error("Error measuring text field: ",e)}render(){var e=this.props,t=e.contentContainerStyle,r=e.horizontal,n=e.onContentSizeChange,l=e.refreshControl,a=e.stickyHeaderIndices,s=e.pagingEnabled;e.forwardedRef,e.keyboardDismissMode,e.onScroll;var o=e.centerContent,h=se(e,Je),c={};n&&(c={onLayout:this._handleContentOnLayout});var u=!r&&Array.isArray(a),d=u||s?F.Children.map(this.props.children,(R,T)=>{var L=u&&a.indexOf(T)>-1;return R!=null&&(L||s)?F.createElement(E,{style:[L&&D.stickyHeader,s&&D.pagingEnabledChild]},R):R}):this.props.children,f=F.createElement(E,H({},c,{children:d,collapsable:!1,ref:this._setInnerViewRef,style:[r&&D.contentContainerHorizontal,o&&D.contentContainerCenterContent,t]})),p=r?D.baseHorizontal:D.baseVertical,v=r?D.pagingEnabledHorizontal:D.pagingEnabledVertical,y=S(S({},h),{},{style:[p,s&&v,this.props.style],onTouchStart:this.scrollResponderHandleTouchStart,onTouchMove:this.scrollResponderHandleTouchMove,onTouchEnd:this.scrollResponderHandleTouchEnd,onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,onScrollShouldSetResponder:this.scrollResponderHandleScrollShouldSetResponder,onScroll:this._handleScroll,onResponderGrant:this.scrollResponderHandleResponderGrant,onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,onResponderTerminate:this.scrollResponderHandleTerminate,onResponderRelease:this.scrollResponderHandleResponderRelease,onResponderReject:this.scrollResponderHandleResponderReject}),C=je;g(C!==void 0,"ScrollViewClass must not be undefined");var b=F.createElement(C,H({},y,{ref:this._setScrollNodeRef}),f);return l?F.cloneElement(l,{style:y.style},b):b}}var Ce={flexGrow:1,flexShrink:1,transform:"translateZ(0)",WebkitOverflowScrolling:"touch"},D=j.create({baseVertical:S(S({},Ce),{},{flexDirection:"column",overflowX:"hidden",overflowY:"auto"}),baseHorizontal:S(S({},Ce),{},{flexDirection:"row",overflowX:"auto",overflowY:"hidden"}),contentContainerHorizontal:{flexDirection:"row"},contentContainerCenterContent:{justifyContent:"center",flexGrow:1},stickyHeader:{position:"sticky",top:0,zIndex:10},pagingEnabledHorizontal:{scrollSnapType:"x mandatory"},pagingEnabledVertical:{scrollSnapType:"y mandatory"},pagingEnabledChild:{scrollSnapAlign:"start"}}),de=F.forwardRef((i,e)=>F.createElement(et,H({},i,{forwardedRef:e})));de.displayName="ScrollView";class tt{constructor(e){var t=e.onMoreTasks;this._onMoreTasks=t,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(t=>this.enqueue(t))}cancelTasks(e){this._queueStack=this._queueStack.map(t=>S(S({},t),{},{tasks:t.tasks.filter(r=>e.indexOf(r)===-1)})).filter((t,r)=>t.tasks.length>0||r===0)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{typeof t=="object"&&t.gen?this._genPromise(t):typeof t=="object"&&t.run?t.run():(g(typeof t=="function",`Expected Function, SimpleTask, or PromiseTask, but got:
`+JSON.stringify(t,null,2)),t())}catch(r){throw r.message="TaskQueue: Error with task "+(t.name||"")+": "+r.message,r}}}_getCurrentQueue(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&t.tasks.length===0&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}_genPromise(e){var t=this._queueStack.push({tasks:[],popable:!1}),r=t-1,n=this._queueStack[r];e.gen().then(()=>{n.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(l=>{setTimeout(()=>{throw l.message="TaskQueue: Error resolving Promise in task "+e.name+": "+l.message,l},0)})}}var rt=function(e,t){return setTimeout(()=>{var r=Date.now();e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-r))}})},1)},st=Oe&&typeof window.requestIdleCallback<"u",it=st?window.requestIdleCallback:rt,J=new De,fe={Events:{interactionStart:"interactionStart",interactionComplete:"interactionComplete"},runAfterInteractions(i){var e=[],t=new Promise(r=>{U(),i&&e.push(i),e.push({run:r,name:"resolve "+(i&&i.name||"?")}),ee.enqueueTasks(e)});return{then:t.then.bind(t),done:t.then.bind(t),cancel:()=>{ee.cancelTasks(e)}}},createInteractionHandle(){U();var i=++nt;return Z.add(i),i},clearInteractionHandle(i){g(!!i,"Must provide a handle to clear."),U(),Z.delete(i),pe.add(i)},addListener:J.addListener.bind(J),setDeadline(i){te=i}},q=new Set,Z=new Set,pe=new Set,ee=new tt({onMoreTasks:U}),Y=0,nt=0,te=-1;function U(){Y||(te>0?Y=setTimeout(Se):Y=it(Se))}function Se(){Y=0;var i=q.size;Z.forEach(r=>q.add(r)),pe.forEach(r=>q.delete(r));var e=q.size;if(i!==0&&e===0?J.emit(fe.Events.interactionComplete):i===0&&e!==0&&J.emit(fe.Events.interactionStart),e===0){for(var t=Date.now();ee.hasTasksToProcess();)if(ee.processNext(),te>0&&Date.now()-t>=te){U();break}}Z.clear(),pe.clear()}class lt{constructor(e,t){this._delay=t,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=fe.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function be(i,e,t){return e<i?i:e>t?t:e}function ot(){return console.log(...arguments)}class at{constructor(e){g(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(g(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var t=this._findRegion(e.first),r=t[0],n=t[1],l=this._findRegion(e.last),a=l[0],s=l[1];if(!(n===s&&!r.isSpacer)){var o=[],h=[],c=S(S({},e),{},{isSpacer:!1});r.first<c.first&&(r.isSpacer?o.push({first:r.first,last:c.first-1,isSpacer:!0}):c.first=r.first),a.last>c.last&&(a.isSpacer?h.push({first:c.last+1,last:a.last,isSpacer:!0}):c.last=a.last);var u=[...o,c,...h],d=s-n+1;this._regions.splice(n,d,...u)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((t,r)=>t.first===e._regions[r].first&&t.last===e._regions[r].last&&t.isSpacer===e._regions[r].isSpacer)}_findRegion(e){for(var t=0,r=this._regions.length-1;t<=r;){var n=Math.floor((t+r)/2),l=this._regions[n];if(e>=l.first&&e<=l.last)return[l,n];e<l.first?r=n-1:e>l.last&&(t=n+1)}g(!1,"A region was not found containing cellIdx "+e)}}class ht{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,t){var r;g(!this._childrenToCellKey.has(e),"Trying to add already present child list");var n=(r=this._cellKeyToChildren.get(t))!==null&&r!==void 0?r:new Set;n.add(e),this._cellKeyToChildren.set(t,n),this._childrenToCellKey.set(e,t)}remove(e){var t=this._childrenToCellKey.get(e);g(t!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var r=this._cellKeyToChildren.get(t);g(r,"_cellKeyToChildren should contain cellKey"),r.delete(e),r.size===0&&this._cellKeyToChildren.delete(t)}forEach(e){for(var t=B(this._cellKeyToChildren.values()),r;!(r=t()).done;)for(var n=r.value,l=B(n),a;!(a=l()).done;){var s=a.value;e(s)}}forEachInCell(e,t){for(var r,n=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],l=B(n),a;!(a=l()).done;){var s=a.value;t(s)}}anyInCell(e,t){for(var r,n=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],l=B(n),a;!(a=l()).done;){var s=a.value;if(t(s))return!0}return!1}size(){return this._childrenToCellKey.size}}class Re{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var G=[],Te=10,le=null;class ct{static addListener(e){return le===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),G.push(e),{remove:()=>{G=G.filter(t=>e!==t)}}}static setSampleRate(e){le=e}static setMinSampleCount(e){Te=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new Re,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(le||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<Te){this._resetData();return}var t=global.performance.now()-e,r=S(S({},this._info),{},{total_time_spent:t});G.forEach(n=>n(r)),this._resetData()}}}computeBlankness(e,t,r){if(!this._enabled||e.getItemCount(e.data)===0||t.last<t.first||this._samplesStartTime==null)return 0;var n=r.dOffset,l=r.offset,a=r.velocity,s=r.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(s),this._info.pixels_scrolled+=Math.round(Math.abs(n));var o=Math.round(Math.abs(a)*1e3),h=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=h-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=h-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var c=0,u=t.first,d=this._getFrameMetrics(u,e);u<=t.last&&(!d||!d.inLayout);)d=this._getFrameMetrics(u,e),u++;d&&u>0&&(c=Math.min(s,Math.max(0,d.offset-l)));for(var f=0,p=t.last,v=this._getFrameMetrics(p,e);p>=t.first&&(!v||!v.inLayout);)v=this._getFrameMetrics(p,e),p--;if(v&&p<e.getItemCount(e.data)-1){var y=v.offset+v.length;f=Math.min(s,Math.max(0,l+s-y))}var C=Math.round(c+f),b=C/s;return b>0?(this._anyBlankStartTime=h,this._info.any_blank_speed_sum+=o,this._info.any_blank_count++,this._info.pixels_blank+=C,b>.5&&(this._mostlyBlankStartTime=h,this._info.mostly_blank_count++)):(o<.01||Math.abs(n)<1)&&this.deactivateAndFlush(),b}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new Re,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class ut extends m.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,t){typeof e=="function"?super.setState((r,n)=>{this._inAsyncStateUpdate=!0;var l;try{l=e(r,n)}catch(a){throw a}finally{this._inAsyncStateUpdate=!1}return l},t):super.setState(e,t)}_installSetStateHooks(){var e=this,t=this.props,r=this.state;Object.defineProperty(this,"props",{get(){return g(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),t},set(n){t=n}}),Object.defineProperty(this,"state",{get(){return g(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),r},set(n){r=n}})}}class we{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,t,r,n,l){var a=e.getItemCount(e.data),s=this._config,o=s.itemVisiblePercentThreshold,h=s.viewAreaCoveragePercentThreshold,c=h!=null,u=c?h:o;g(u!=null&&o!=null!=(h!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var d=[];if(a===0)return d;var f=-1,p=l||{first:0,last:a-1},v=p.first,y=p.last;if(y>=a)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:l,itemCount:a})),[];for(var C=v;C<=y;C++){var b=n(C,e);if(b){var R=b.offset-t,T=R+b.length;if(R<r&&T>0)f=C,dt(c,u,R,T,r,b.length)&&d.push(C);else if(f>=0)break}}return d}onUpdate(e,t,r,n,l,a,s){var o=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||o===0||!n(0,e))){var h=[];if(o&&(h=this.computeViewableItems(e,t,r,n,s)),!(this._viewableIndices.length===h.length&&this._viewableIndices.every((u,d)=>u===h[d])))if(this._viewableIndices=h,this._config.minimumViewTime){var c=setTimeout(()=>{this._timers.delete(c),this._onUpdateSync(e,h,a,l)},this._config.minimumViewTime);this._timers.add(c)}else this._onUpdateSync(e,h,a,l)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,t,r,n){t=t.filter(b=>this._viewableIndices.includes(b));for(var l=this._viewableItems,a=new Map(t.map(b=>{var R=n(b,!0,e);return[R.key,R]})),s=[],o=B(a),h;!(h=o()).done;){var c=h.value,u=c[0],d=c[1];l.has(u)||s.push(d)}for(var f=B(l),p;!(p=f()).done;){var v=p.value,y=v[0],C=v[1];a.has(y)||s.push(S(S({},C),{},{isViewable:!1}))}s.length>0&&(this._viewableItems=a,r({viewableItems:Array.from(a.values()),changed:s,viewabilityConfig:this._config}))}}function dt(i,e,t,r,n,l){if(pt(t,r,n))return!0;var a=ft(t,r,n),s=100*(i?a/n:a/l);return s>=e}function ft(i,e,t){var r=Math.min(e,t)-Math.max(i,0);return Math.max(0,r)}function pt(i,e,t){return i>=0&&e<=t&&e>i}var re=m.createContext(null);function mt(i){var e=i.children,t=i.value,r=m.useMemo(()=>({cellKey:null,getScrollMetrics:t.getScrollMetrics,horizontal:t.horizontal,getOutermostParentListRef:t.getOutermostParentListRef,registerAsNestedChild:t.registerAsNestedChild,unregisterAsNestedChild:t.unregisterAsNestedChild}),[t.getScrollMetrics,t.horizontal,t.getOutermostParentListRef,t.registerAsNestedChild,t.unregisterAsNestedChild]);return m.createElement(re.Provider,{value:r},e)}function Q(i){var e=i.cellKey,t=i.children,r=m.useContext(re),n=m.useMemo(()=>r==null?null:S(S({},r),{},{cellKey:e}),[r,e]);return m.createElement(re.Provider,{value:n},t)}class vt extends m.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,t=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([t,r],{highlighted:!0})},unhighlight:()=>{var e=this.props,t=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([t,r],{highlighted:!1})},updateProps:(e,t)=>{var r=this.props,n=r.cellKey,l=r.prevCellKey;this.props.onUpdateSeparators([e==="leading"?l:n],t)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,t){return{separatorProps:S(S({},t.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(t=>({separatorProps:S(S({},t.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,t,r,n){if(e&&t&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),t)return m.createElement(t,{item:r,index:n,separators:this._separators});if(e)return e({item:r,index:n,separators:this._separators});g(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,t=e.CellRendererComponent,r=e.ItemSeparatorComponent,n=e.ListItemComponent,l=e.cellKey,a=e.horizontal,s=e.item,o=e.index,h=e.inversionStyle,c=e.onCellFocusCapture,u=e.onCellLayout,d=e.renderItem,f=this._renderElement(d,n,s,o),p=m.isValidElement(r)?r:r&&m.createElement(r,this.state.separatorProps),v=h?a?[oe.rowReverse,h]:[oe.columnReverse,h]:a?[oe.row,h]:h,y=t?m.createElement(t,H({cellKey:l,index:o,item:s,style:v,onFocusCapture:c},u&&{onLayout:this._onLayout}),f,p):m.createElement(E,H({style:v,onFocusCapture:c},u&&{onLayout:this._onLayout}),f,p);return m.createElement(Q,{cellKey:this.props.cellKey},y)}}var oe=j.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function gt(i,e,t,r){r===void 0&&(r=1);for(var n=e.getItemCount(e.data),l=[],a=0;a<i.length;a++)for(var s=i[a],o=0,h=n-1;o<=h;){var c=o+(h-o>>>1),u=t(c,e),d=u.offset*r,f=(u.offset+u.length)*r;if(c===0&&s<d||c!==0&&s<=d)h=c-1;else if(s>f)o=c+1;else{l[a]=c;break}}return l}function _t(i,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,i.last)-Math.max(e.first,i.first))}function yt(i,e,t,r,n,l){var a=i.getItemCount(i.data);if(a===0)return{first:0,last:-1};var s=l.offset,o=l.velocity,h=l.visibleLength,c=l.zoomScale,u=c===void 0?1:c,d=Math.max(0,s),f=d+h,p=(t-1)*h,v=.5,y=o>1?"after":o<-1?"before":"none",C=Math.max(0,d-(1-v)*p),b=Math.max(0,f+v*p),R=n(a-1,i).offset*u;if(R<C)return{first:Math.max(0,a-1-e),last:a-1};var T=gt([C,d,f,b],i,n,u),L=T[0],_=T[1],w=T[2],I=T[3];L=L??0,_=_??Math.max(0,L),I=I??a-1,w=w??Math.min(I,_+e-1);for(var O={first:_,last:w},P=_t(r,O);!(_<=L&&w>=I);){var M=P>=e,N=_<=r.first||_>r.last,V=_>L&&(!M||!N),$=w>=r.last||w<r.first,z=w<I&&(!M||!$);if(M&&!V&&!z)break;V&&!(y==="after"&&z&&$)&&(N&&P++,_--),z&&!(y==="before"&&V&&N)&&($&&P++,w++)}if(!(w>=_&&_>=0&&w<a&&_>=L&&w<=I&&_<=O.first&&w>=O.last))throw new Error("Bad window calculation "+JSON.stringify({first:_,last:w,itemCount:a,overscanFirst:L,overscanLast:I,visible:O}));return{first:_,last:w}}function me(i,e){return typeof i=="object"&&(i==null?void 0:i.key)!=null?i.key:typeof i=="object"&&(i==null?void 0:i.id)!=null?i.id:String(e)}var ne={exports:{}};function He(i,e){if(i!=null)return i;var t=new Error(e!==void 0?e:"Got unexpected "+i);throw t.framesToPop=1,t}ne.exports=He;ne.exports.default=He;Object.defineProperty(ne.exports,"__esModule",{value:!0});var Ct=ne.exports;const St=Fe(Ct);var Ie=.001,ae=!1,he="";function A(i){return i??!1}function bt(i){return i??10}function ce(i){return i??10}function Rt(i){return i??2}function Le(i){return i??2}function Ee(i,e){return i*e/2}function Tt(i){return i??50}function Me(i){return i??21}function wt(i,e){for(var t=i.length-1;t>=0;t--)if(e(i[t]))return i[t];return null}class k extends ut{scrollToEnd(e){var t=e?e.animated:!0,r=this.props.getItemCount(this.props.data)-1;if(!(r<0)){var n=this.__getFrameMetricsApprox(r,this.props),l=Math.max(0,n.offset+n.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(A(this.props.horizontal)?{x:l,animated:t}:{y:l,animated:t})}}}scrollToIndex(e){var t=this.props,r=t.data,n=t.horizontal,l=t.getItemCount,a=t.getItemLayout,s=t.onScrollToIndexFailed,o=e.animated,h=e.index,c=e.viewOffset,u=e.viewPosition;if(g(h>=0,"scrollToIndex out of range: requested index "+h+" but minimum is 0"),g(l(r)>=1,"scrollToIndex out of range: item length "+l(r)+" but minimum is 1"),g(h<l(r),"scrollToIndex out of range: requested index "+h+" is out of 0 to "+(l(r)-1)),!a&&h>this._highestMeasuredFrameIndex){g(!!s,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),s({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:h});return}var d=this.__getFrameMetricsApprox(Math.floor(h),this.props),f=Math.max(0,this._getOffsetApprox(h,this.props)-(u||0)*(this._scrollMetrics.visibleLength-d.length))-(c||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(n?{x:f,animated:o}:{y:f,animated:o})}}scrollToItem(e){for(var t=e.item,r=this.props,n=r.data,l=r.getItem,a=r.getItemCount,s=a(n),o=0;o<s;o++)if(l(n,o)===t){this.scrollToIndex(S(S({},e),{},{index:o}));break}}scrollToOffset(e){var t=e.animated,r=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(A(this.props.horizontal)?{x:r,animated:t}:{y:r,animated:t})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var t;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=s=>{this._nestedChildLists.add(s.ref,s.cellKey),this._hasInteracted&&s.ref.recordInteraction()},this._unregisterAsNestedChild=s=>{this._nestedChildLists.remove(s.ref)},this._onUpdateSeparators=(s,o)=>{s.forEach(h=>{var c=h!=null&&this._cellRefs[h];c&&c.updateSeparatorProps(o)})},this._getSpacerKey=s=>s?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new ht,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=s=>{this._scrollRef=s},this._defaultRenderScrollComponent=s=>{var o=s.onRefresh;if(this._isNestedWithSameOrientation())return m.createElement(E,s);if(o){var h;return g(typeof s.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((h=s.refreshing)!==null&&h!==void 0?h:"undefined")+"`"),m.createElement(de,H({},s,{refreshControl:s.refreshControl==null?m.createElement(Be,{refreshing:s.refreshing,onRefresh:o,progressViewOffset:s.progressViewOffset}):s.refreshControl}))}else return m.createElement(de,s)},this._onCellLayout=(s,o,h)=>{var c=s.nativeEvent.layout,u={offset:this._selectOffset(c),length:this._selectLength(c),index:h,inLayout:!0},d=this._frames[o];!d||u.offset!==d.offset||u.length!==d.length||h!==d.index?(this._totalCellLength+=u.length-(d?d.length:0),this._totalCellsMeasured+=d?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[o]=u,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,h),this._scheduleCellsToRenderUpdate()):this._frames[o].inLayout=!0,this._triggerRemeasureForChildListsInCell(o),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=s=>{delete this._cellRefs[s];var o=this._frames[s];o&&(this._frames[s]=S(S({},o),{},{inLayout:!1}))},this._onLayout=s=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(s.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(s),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=s=>{this.props.onLayout&&this.props.onLayout(s)},this._onLayoutFooter=s=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(s.nativeEvent.layout)},this._onLayoutHeader=s=>{this._headerLength=this._selectLength(s.nativeEvent.layout)},this._onContentSizeChange=(s,o)=>{s>0&&o>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:St(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(s,o),this._scrollMetrics.contentLength=this._selectLength({height:o,width:s}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=s=>{var o=s.offset-this._offsetFromParentVirtualizedList,h=s.visibleLength,c=o-this._scrollMetrics.offset,u=this._scrollMetrics.contentLength;return{visibleLength:h,contentLength:u,offset:o,dOffset:c}},this._onScroll=s=>{this._nestedChildLists.forEach(C=>{C._onScroll(s)}),this.props.onScroll&&this.props.onScroll(s);var o=s.timeStamp,h=this._selectLength(s.nativeEvent.layoutMeasurement),c=this._selectLength(s.nativeEvent.contentSize),u=this._selectOffset(s.nativeEvent.contentOffset),d=u-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var f=this._convertParentScrollMetrics({visibleLength:h,offset:u});h=f.visibleLength,c=f.contentLength,u=f.offset,d=f.dOffset}var p=this._scrollMetrics.timestamp?Math.max(1,o-this._scrollMetrics.timestamp):1,v=d/p;p>500&&this._scrollMetrics.dt>500&&c>5*h&&!this._hasWarned.perf&&(ot("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:p,prevDt:this._scrollMetrics.dt,contentLength:c}),this._hasWarned.perf=!0);var y=s.nativeEvent.zoomScale<0?1:s.nativeEvent.zoomScale;this._scrollMetrics={contentLength:c,dt:p,dOffset:d,offset:u,timestamp:o,velocity:v,visibleLength:h,zoomScale:y},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),v!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=s=>{this._nestedChildLists.forEach(o=>{o._onScrollBeginDrag(s)}),this._viewabilityTuples.forEach(o=>{o.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(s)},this._onScrollEndDrag=s=>{this._nestedChildLists.forEach(h=>{h._onScrollEndDrag(s)});var o=s.nativeEvent.velocity;o&&(this._scrollMetrics.velocity=this._selectOffset(o)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(s)},this._onMomentumScrollBegin=s=>{this._nestedChildLists.forEach(o=>{o._onMomentumScrollBegin(s)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(s)},this._onMomentumScrollEnd=s=>{this._nestedChildLists.forEach(o=>{o._onMomentumScrollEnd(s)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(s)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((s,o)=>{var h=this._adjustCellsAroundViewport(o,s.cellsAroundViewport),c=k._createRenderMask(o,h,this._getNonViewportRenderRegions(o));return h.first===s.cellsAroundViewport.first&&h.last===s.cellsAroundViewport.last&&c.equals(s.renderMask)?null:{cellsAroundViewport:h,renderMask:c}})},this._createViewToken=(s,o,h)=>{var c=h.data,u=h.getItem,d=u(c,s);return{index:s,item:d,key:this._keyExtractor(d,s,h),isViewable:o}},this._getOffsetApprox=(s,o)=>{if(Number.isInteger(s))return this.__getFrameMetricsApprox(s,o).offset;var h=this.__getFrameMetricsApprox(Math.floor(s),o),c=s-Math.floor(s);return h.offset+c*h.length},this.__getFrameMetricsApprox=(s,o)=>{var h=this._getFrameMetrics(s,o);if(h&&h.index===s)return h;var c=o.data,u=o.getItemCount,d=o.getItemLayout;return g(s>=0&&s<u(c),"Tried to get frame for out of range index "+s),g(!d,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*s}},this._getFrameMetrics=(s,o)=>{var h=o.data,c=o.getItem,u=o.getItemCount,d=o.getItemLayout;g(s>=0&&s<u(h),"Tried to get frame for out of range index "+s);var f=c(h,s),p=this._frames[this._keyExtractor(f,s,o)];return(!p||p.index!==s)&&d?d(h,s):p},this._getNonViewportRenderRegions=s=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var o=this._cellRefs[this._lastFocusedCellKey],h=o.props.index,c=s.getItemCount(s.data);if(h>=c||this._keyExtractor(s.getItem(s.data,h),h,s)!==this._lastFocusedCellKey)return[];for(var u=h,d=0,f=u-1;f>=0&&d<this._scrollMetrics.visibleLength;f--)u--,d+=this.__getFrameMetricsApprox(f,s).length;for(var p=h,v=0,y=p+1;y<c&&v<this._scrollMetrics.visibleLength;y++)p++,v+=this.__getFrameMetricsApprox(y,s).length;return[{first:u,last:p}]},this._checkProps(e),this._fillRateHelper=new ct(this._getFrameMetrics),this._updateCellsToRenderBatcher=new lt(this._updateCellsToRender,(t=this.props.updateCellsBatchingPeriod)!==null&&t!==void 0?t:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(s=>({viewabilityHelper:new we(s.viewabilityConfig),onViewableItemsChanged:s.onViewableItemsChanged}));else{var r=this.props,n=r.onViewableItemsChanged,l=r.viewabilityConfig;n&&this._viewabilityTuples.push({viewabilityHelper:new we(l),onViewableItemsChanged:n})}var a=k._initialRenderRegion(e);this.state={cellsAroundViewport:a,renderMask:k._createRenderMask(e,a)},this.invertedWheelEventHandler=s=>{var o=this.props.horizontal?s.target.scrollLeft:s.target.scrollTop,h=this.props.horizontal?s.target.scrollWidth:s.target.scrollHeight,c=this.props.horizontal?s.target.clientWidth:s.target.clientHeight,u=h>c,d=this.props.horizontal?s.deltaX||s.wheelDeltaX:s.deltaY||s.wheelDeltaY,f=d;u&&(f=d<0?Math.min(d+o,0):Math.max(d-(h-c-o),0));var p=d-f;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var v=this._scrollRef.getScrollableNode();if(this.props.horizontal){s.target.scrollLeft+=p;var y=v.scrollLeft-f;v.scrollLeft=this.props.getItemLayout?y:Math.min(y,this._totalCellLength)}else{s.target.scrollTop+=p;var C=v.scrollTop-f;v.scrollTop=this.props.getItemLayout?C:Math.min(C,this._totalCellLength)}s.preventDefault()}}}_checkProps(e){var t=e.onScroll,r=e.windowSize,n=e.getItemCount,l=e.data,a=e.initialScrollIndex;g(!t||!t.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),g(Me(r)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),g(n,'VirtualizedList: The "getItemCount" prop must be provided');var s=n(l);a!=null&&!this._hasTriggeredInitialScrollToIndex&&(a<0||s>0&&a>=s)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+a+'" is not valid (list has '+s+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,t,r){var n=e.getItemCount(e.data);g(t.first>=0&&t.last>=t.first-1&&t.last<n,'Invalid cells around viewport "['+t.first+", "+t.last+']" was passed to VirtualizedList._createRenderMask');var l=new at(n);if(n>0){for(var a=[t,...r??[]],s=0,o=a;s<o.length;s++){var h=o[s];l.addCells(h)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var c=k._initialRenderRegion(e);l.addCells(c)}var u=new Set(e.stickyHeaderIndices);k._ensureClosestStickyHeader(e,u,l,t.first)}return l}static _initialRenderRegion(e){var t,r=e.getItemCount(e.data),n=Math.max(0,Math.min(r-1,Math.floor((t=e.initialScrollIndex)!==null&&t!==void 0?t:0))),l=Math.min(r,n+bt(e.initialNumToRender))-1;return{first:n,last:l}}static _ensureClosestStickyHeader(e,t,r,n){for(var l=e.ListHeaderComponent?1:0,a=n-1;a>=0;a--)if(t.has(a+l)){r.addCells({first:a,last:a});break}}_adjustCellsAroundViewport(e,t){var r=e.data,n=e.getItemCount,l=Le(e.onEndReachedThreshold),a=this._scrollMetrics,s=a.contentLength,o=a.offset,h=a.visibleLength,c=s-h-o;if(h<=0||s<=0)return t.last>=n(r)?k._constrainToItemCount(t,e):t;var u;if(e.disableVirtualization){var d=c<l*h?ce(e.maxToRenderPerBatch):0;u={first:0,last:Math.min(t.last+d,n(r)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(c)>=Number.EPSILON)return t.last>=n(r)?k._constrainToItemCount(t,e):t;u=yt(e,ce(e.maxToRenderPerBatch),Me(e.windowSize),t,this.__getFrameMetricsApprox,this._scrollMetrics),g(u.last<n(r),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var f=this._findFirstChildWithMore(u.first,u.last);u.last=f??u.last}return u}_findFirstChildWithMore(e,t){for(var r=e;r<=t;r++){var n=this._indicesToKeys.get(r);if(n!=null&&this._nestedChildLists.anyInCell(n,l=>l.hasMore()))return r}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler);else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,t){var r=e.getItemCount(e.data);if(r===t.renderMask.numCells())return t;var n=k._constrainToItemCount(t.cellsAroundViewport,e);return{cellsAroundViewport:n,renderMask:k._createRenderMask(e,n)}}_pushCells(e,t,r,n,l,a){var s=this,o=this.props,h=o.CellRendererComponent,c=o.ItemSeparatorComponent,u=o.ListHeaderComponent,d=o.ListItemComponent,f=o.data,p=o.debug,v=o.getItem,y=o.getItemCount,C=o.getItemLayout,b=o.horizontal,R=o.renderItem,T=u?1:0,L=y(f)-1,_;l=Math.min(L,l);for(var w=function(){var P=v(f,I),M=s._keyExtractor(P,I,s.props);s._indicesToKeys.set(I,M),r.has(I+T)&&t.push(e.length);var N=C==null||p||s._fillRateHelper.enabled();e.push(m.createElement(vt,H({CellRendererComponent:h,ItemSeparatorComponent:I<L?c:void 0,ListItemComponent:d,cellKey:M,horizontal:b,index:I,inversionStyle:a,item:P,key:M,prevCellKey:_,onUpdateSeparators:s._onUpdateSeparators,onCellFocusCapture:V=>s._onCellFocusCapture(M),onUnmount:s._onCellUnmount,ref:V=>{s._cellRefs[M]=V},renderItem:R},N&&{onCellLayout:s._onCellLayout}))),_=M},I=n;I<=l;I++)w()}static _constrainToItemCount(e,t){var r=t.getItemCount(t.data),n=Math.min(r-1,e.last),l=ce(t.maxToRenderPerBatch);return{first:be(0,r-1-l,e.first),last:n}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===A(this.props.horizontal))}_keyExtractor(e,t,r){if(r.keyExtractor!=null)return r.keyExtractor(e,t);var n=me(e,t);return n===String(t)&&(ae=!0,e.type&&e.type.displayName&&(he=e.type.displayName)),n}render(){this._checkProps(this.props);var e=this.props,t=e.ListEmptyComponent,r=e.ListFooterComponent,n=e.ListHeaderComponent,l=this.props,a=l.data,s=l.horizontal,o=this.props.inverted?A(this.props.horizontal)?x.horizontallyInverted:x.verticallyInverted:null,h=[],c=new Set(this.props.stickyHeaderIndices),u=[];if(n){c.has(0)&&u.push(0);var d=m.isValidElement(n)?n:m.createElement(n,null);h.push(m.createElement(Q,{cellKey:this._getCellKey()+"-header",key:"$header"},m.createElement(E,{onLayout:this._onLayoutHeader,style:[o,this.props.ListHeaderComponentStyle]},d)))}var f=this.props.getItemCount(a);if(f===0&&t){var p=m.isValidElement(t)?t:m.createElement(t,null);h.push(m.createElement(Q,{cellKey:this._getCellKey()+"-empty",key:"$empty"},m.cloneElement(p,{onLayout:z=>{this._onLayoutEmpty(z),p.props.onLayout&&p.props.onLayout(z)},style:[o,p.props.style]})))}if(f>0){ae=!1,he="";for(var v=this._getSpacerKey(!s),y=this.state.renderMask.enumerateRegions(),C=wt(y,z=>z.isSpacer),b=B(y),R;!(R=b()).done;){var T=R.value;if(T.isSpacer){if(this.props.disableVirtualization)continue;var L=T===C,_=L&&!this.props.getItemLayout,w=_?be(T.first-1,T.last,this._highestMeasuredFrameIndex):T.last,I=this.__getFrameMetricsApprox(T.first,this.props),O=this.__getFrameMetricsApprox(w,this.props),P=O.offset+O.length-I.offset;h.push(m.createElement(E,{key:"$spacer-"+T.first,style:{[v]:P}}))}else this._pushCells(h,u,c,T.first,T.last,o)}!this._hasWarned.keys&&ae&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",he),this._hasWarned.keys=!0)}if(r){var M=m.isValidElement(r)?r:m.createElement(r,null);h.push(m.createElement(Q,{cellKey:this._getFooterCellKey(),key:"$footer"},m.createElement(E,{onLayout:this._onLayoutFooter,style:[o,this.props.ListFooterComponentStyle]},M)))}var N=S(S({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:Tt(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:u,style:o?[o,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<f-1;var V=m.createElement(mt,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:A(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},m.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(N),{ref:this._captureScrollRef},h)),$=V;return this.props.debug?m.createElement(E,{style:x.debug},$,this._renderDebugOverlay()):$}componentDidUpdate(e){var t=this.props,r=t.data,n=t.extraData;(r!==e.data||n!==e.extraData)&&this._viewabilityTuples.forEach(a=>{a.viewabilityHelper.resetViewableIndices()});var l=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),l&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,t=>{t.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,t,r,n)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:t}),this._scrollMetrics.contentLength=this._selectLength({width:r,height:n});var l=this._convertParentScrollMetrics(this.context.getScrollMetrics()),a=this._scrollMetrics.visibleLength!==l.visibleLength||this._scrollMetrics.offset!==l.offset;a&&(this._scrollMetrics.visibleLength=l.visibleLength,this._scrollMetrics.offset=l.offset,this._nestedChildLists.forEach(s=>{s.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),t=[],r=this.props.getItemCount(this.props.data),n=0;n<r;n++){var l=this.__getFrameMetricsApprox(n,this.props);l.inLayout&&t.push(l)}var a=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,s=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),o=s.offset+s.length-a,h=this._scrollMetrics.offset,c=this._scrollMetrics.visibleLength;return m.createElement(E,{style:[x.debugOverlayBase,x.debugOverlay]},t.map((u,d)=>m.createElement(E,{key:"f"+d,style:[x.debugOverlayBase,x.debugOverlayFrame,{top:u.offset*e,height:u.length*e}]})),m.createElement(E,{style:[x.debugOverlayBase,x.debugOverlayFrameLast,{top:a*e,height:o*e}]}),m.createElement(E,{style:[x.debugOverlayBase,x.debugOverlayFrameVis,{top:h*e,height:c*e}]}))}_selectLength(e){return A(this.props.horizontal)?e.width:e.height}_selectOffset(e){return A(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,t=e.data,r=e.getItemCount,n=e.onStartReached,l=e.onStartReachedThreshold,a=e.onEndReached,s=e.onEndReachedThreshold,o=e.initialScrollIndex,h=this._scrollMetrics,c=h.contentLength,u=h.visibleLength,d=h.offset,f=d,p=c-u-d;f<Ie&&(f=0),p<Ie&&(p=0);var v=2,y=l!=null?l*u:v,C=s!=null?s*u:v,b=f<=y,R=p<=C;a&&this.state.cellsAroundViewport.last===r(t)-1&&R&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,a({distanceFromEnd:p})):n!=null&&this.state.cellsAroundViewport.first===0&&b&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!o||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,n({distanceFromStart:f})):(this._sentStartForContentLength=b?this._sentStartForContentLength:0,this._sentEndForContentLength=R?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,t=e.first,r=e.last,n=this._scrollMetrics,l=n.offset,a=n.visibleLength,s=n.velocity,o=this.props.getItemCount(this.props.data),h=!1,c=Rt(this.props.onStartReachedThreshold),u=Le(this.props.onEndReachedThreshold);if(t>0){var d=l-this.__getFrameMetricsApprox(t,this.props).offset;h=d<0||s<-2&&d<Ee(c,a)}if(!h&&r>=0&&r<o-1){var f=this.__getFrameMetricsApprox(r,this.props).offset-(l+a);h=f<0||s>2&&f<Ee(u,a)}if(h&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,t){this._viewabilityTuples.forEach(r=>{r.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,r.onViewableItemsChanged,t)})}}k.contextType=re;var x=j.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),ke=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function It(i,e){return!!(i===e||ke(i)&&ke(e))}function Lt(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!It(i[t],e[t]))return!1;return!0}function Et(i,e){e===void 0&&(e=Lt);var t=null;function r(){for(var n=[],l=0;l<arguments.length;l++)n[l]=arguments[l];if(t&&t.lastThis===this&&e(n,t.lastArgs))return t.lastResult;var a=i.apply(this,n);return t={lastResult:a,lastArgs:n,lastThis:this},a}return r.clear=function(){t=null},r}var Mt=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function kt(i){return i??xe.OS==="android"}function K(i){return i??1}function xt(i){return typeof Object(i).length=="number"}class Kt extends m.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=t=>{this._listRef=t},this._getItem=(t,r)=>{var n=K(this.props.numColumns);if(n>1){for(var l=[],a=0;a<n;a++){var s=r*n+a;if(s<t.length){var o=t[s];l.push(o)}}return l}else return t[r]},this._getItemCount=t=>{if(t!=null&&xt(t)){var r=K(this.props.numColumns);return r>1?Math.ceil(t.length/r):t.length}else return 0},this._keyExtractor=(t,r)=>{var n,l=K(this.props.numColumns),a=(n=this.props.keyExtractor)!==null&&n!==void 0?n:me;return l>1?(g(Array.isArray(t),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",l),t.map((s,o)=>a(s,r*l+o)).join(":")):a(t,r)},this._renderer=(t,r,n,l,a)=>{var s=K(l),o=c=>t?m.createElement(t,c):r?r(c):null,h=c=>{if(s>1){var u=c.item,d=c.index;return g(Array.isArray(u),"Expected array of items with numColumns > 1"),m.createElement(E,{style:[Ft.row,n]},u.map((f,p)=>{var v=o({item:f,index:d*s+p,separators:c.separators});return v!=null?m.createElement(m.Fragment,{key:p},v):null}))}else return o(c)};return t?{ListItemComponent:h}:{renderItem:h}},this._memoizedRenderer=Et(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(t=>({viewabilityConfig:t.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(t.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){g(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),g(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),g(!Ne(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),g(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var t=e.getItem,r=e.getItemCount,n=e.horizontal,l=e.columnWrapperStyle,a=e.onViewableItemsChanged,s=e.viewabilityConfigCallbackPairs,o=K(this.props.numColumns);g(!t&&!r,"FlatList does not support custom data formats."),o>1?g(!n,"numColumns does not support horizontal."):g(!l,"columnWrapperStyle not supported for single column lists"),g(!(a&&s),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,t){var r,n=K(this.props.numColumns),l=(r=this.props.keyExtractor)!==null&&r!==void 0?r:me;t.item.forEach((a,s)=>{g(t.index!=null,"Missing index!");var o=t.index*n+s;e.push(S(S({},t),{},{item:a,key:l(a,o),index:o}))})}_createOnViewableItemsChanged(e){return t=>{var r=K(this.props.numColumns);if(e)if(r>1){var n=[],l=[];t.viewableItems.forEach(a=>this._pushMultiColumnViewable(l,a)),t.changed.forEach(a=>this._pushMultiColumnViewable(n,a)),e({viewableItems:l,changed:n})}else e(t)}}render(){var e=this.props,t=e.numColumns,r=e.columnWrapperStyle,n=e.removeClippedSubviews,l=e.strictMode,a=l===void 0?!1:l,s=se(e,Mt),o=a?this._memoizedRenderer:this._renderer;return m.createElement(k,H({},s,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:kt(n)},o(this.props.ListItemComponent,this.props.renderItem,r,t,this.props.extraData)))}}var Ft=j.create({row:{flexDirection:"row"}});export{Kt as F,fe as I,Be as R,X as T,k as V,B as _,de as a,We as d,me as k};
