import{r as A}from"./index-mfbfsM12.js";import"./index-8JwjhRSi.js";import{E as K,P as We,a as ke,b as qe,c as Xe,u as Me,M as Qe,d as Je}from"./useTrackException-BhQuYC5A.js";import{b as Ze,d as Ve,a as et}from"./development-DYCnWZjk.js";import{a as tt,b as rt}from"./index-Bcpfmd17.js";import{c as z}from"./_commonjsHelpers-BosuxZz1.js";import{j as at}from"./jsx-runtime-Bxcv0yjW.js";import{P as nt,N as pe}from"./index-DOpK3Ow6.js";var Re="DELAY",I="ERROR",be="LONG_PRESS_DETECTED",P="NOT_RESPONDER",$="RESPONDER_ACTIVE_LONG_PRESS_START",ue="RESPONDER_ACTIVE_PRESS_START",he="RESPONDER_INACTIVE_PRESS_START",st="RESPONDER_GRANT",te="RESPONDER_RELEASE",Ue="RESPONDER_TERMINATED",Se=Object.freeze({NOT_RESPONDER:{DELAY:I,RESPONDER_GRANT:he,RESPONDER_RELEASE:I,RESPONDER_TERMINATED:I,LONG_PRESS_DETECTED:I},RESPONDER_INACTIVE_PRESS_START:{DELAY:ue,RESPONDER_GRANT:I,RESPONDER_RELEASE:P,RESPONDER_TERMINATED:P,LONG_PRESS_DETECTED:I},RESPONDER_ACTIVE_PRESS_START:{DELAY:I,RESPONDER_GRANT:I,RESPONDER_RELEASE:P,RESPONDER_TERMINATED:P,LONG_PRESS_DETECTED:$},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:I,RESPONDER_GRANT:I,RESPONDER_RELEASE:P,RESPONDER_TERMINATED:P,LONG_PRESS_DETECTED:$},ERROR:{DELAY:P,RESPONDER_GRANT:he,RESPONDER_RELEASE:P,RESPONDER_TERMINATED:P,LONG_PRESS_DETECTED:P}}),ze=e=>e.getAttribute("role"),ge=e=>e.tagName.toLowerCase(),Oe=e=>e===ue||e===$,re=e=>ze(e)==="button",Te=e=>e===he||e===ue||e===$,ct=e=>e===Ue||e===te,ve=e=>{var t=e.key,r=e.target,c=t===" "||t==="Spacebar",a=ge(r)==="button"||re(r);return t==="Enter"||c&&a},it=450,ut=50;class ot{constructor(t){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=P,this.configure(t)}configure(t){this._config=t}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var t=(a,s)=>{a.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=P,this._isPointerTouch=a.nativeEvent.type==="touchstart",this._receiveSignal(st,a);var f=fe(this._config.delayPressStart,0,ut);s!==!1&&f>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(Re,a)},f):this._receiveSignal(Re,a);var l=fe(this._config.delayLongPress,10,it);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(a)},l+f)},r=a=>{this._receiveSignal(te,a)},c=a=>{var s=this._config.onPress,f=a.target;if(this._touchState!==P&&ve(a)){r(a),document.removeEventListener("keyup",c);var l=f.getAttribute("role"),g=ge(f),_=l==="link"||g==="a"||g==="button"||g==="input"||g==="select"||g==="textarea";s!=null&&!_&&s(a)}};return{onStartShouldSetResponder:a=>{var s=this._config.disabled;return s&&re(a.currentTarget)&&a.stopPropagation(),s==null?!0:!s},onKeyDown:a=>{var s=this._config.disabled,f=a.key,l=a.target;if(!s&&ve(a)){this._touchState===P&&(t(a,!1),document.addEventListener("keyup",c));var g=f===" "||f==="Spacebar",_=ze(l),h=_==="button"||_==="menuitem";g&&h&&ge(l)!=="button"&&a.preventDefault(),a.stopPropagation()}},onResponderGrant:a=>t(a),onResponderMove:a=>{this._config.onPressMove!=null&&this._config.onPressMove(a);var s=Pe(a);if(this._touchActivatePosition!=null){var f=this._touchActivatePosition.pageX-s.pageX,l=this._touchActivatePosition.pageY-s.pageY;Math.hypot(f,l)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:a=>r(a),onResponderTerminate:a=>{a.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(Ue,a)},onResponderTerminationRequest:a=>{var s=this._config,f=s.cancelable,l=s.disabled,g=s.onLongPress;return!l&&g!=null&&this._isPointerTouch&&a.nativeEvent.type==="contextmenu"?!1:f??!0},onClick:a=>{var s=this._config,f=s.disabled,l=s.onPress;f?re(a.currentTarget)&&a.stopPropagation():(a.stopPropagation(),this._longPressDispatched||this._selectionTerminated?a.preventDefault():l!=null&&a.altKey===!1&&l(a))},onContextMenu:a=>{var s=this._config,f=s.disabled,l=s.onLongPress;f?re(a.currentTarget)&&a.stopPropagation():l!=null&&this._isPointerTouch&&!a.defaultPrevented&&(a.preventDefault(),a.stopPropagation())}}}_receiveSignal(t,r){var c=this._touchState,a=null;Se[c]!=null&&(a=Se[c][t]),!(this._touchState===P&&t===te)&&(a==null||a===I?console.error("PressResponder: Invalid signal "+t+" for state "+c+" on responder"):c!==a&&(this._performTransitionSideEffects(c,a,t,r),this._touchState=a))}_performTransitionSideEffects(t,r,c,a){if(ct(c)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),Te(t)&&c===be){var s=this._config.onLongPress;s!=null&&a.nativeEvent.key==null&&(s(a),this._longPressDispatched=!0)}var f=Oe(t),l=Oe(r);if(!f&&l?this._activate(a):f&&!l&&this._deactivate(a),Te(t)&&c===te){var g=this._config,_=g.onLongPress,h=g.onPress;if(h!=null){var p=_!=null&&t===$;p||!l&&!f&&(this._activate(a),this._deactivate(a))}}this._cancelPressDelayTimeout()}_activate(t){var r=this._config,c=r.onPressChange,a=r.onPressStart,s=Pe(t);this._touchActivatePosition={pageX:s.pageX,pageY:s.pageY},a!=null&&a(t),c!=null&&c(!0)}_deactivate(t){var r=this._config,c=r.onPressChange,a=r.onPressEnd;function s(){a!=null&&a(t),c!=null&&c(!1)}var f=fe(this._config.delayPressEnd);f>0?this._pressOutDelayTimeout=setTimeout(()=>{s()},f):s()}_handleLongPress(t){(this._touchState===ue||this._touchState===$)&&this._receiveSignal(be,t)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function fe(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),Math.max(t,e??r)}function Pe(e){var t=e.nativeEvent,r=t.changedTouches,c=t.touches;return c!=null&&c.length>0?c[0]:r!=null&&r.length>0?r[0]:e.nativeEvent}function oa(e,t){var r=A.useRef(null);r.current==null&&(r.current=new ot(t));var c=r.current;return A.useEffect(()=>{c.configure(t)},[t,c]),A.useEffect(()=>()=>{c.reset()},[c]),A.useDebugValue(t),c.getEventHandlers()}function lt(){return{type:"GO_BACK"}}function ft(){if(typeof(arguments.length<=0?void 0:arguments[0])=="string")return{type:"NAVIGATE",payload:{name:arguments.length<=0?void 0:arguments[0],params:arguments.length<=1?void 0:arguments[1]}};{const e=(arguments.length<=0?void 0:arguments[0])||{};if(!e.hasOwnProperty("key")&&!e.hasOwnProperty("name"))throw new Error("You need to specify name or key when calling navigate with an object as the argument. See https://reactnavigation.org/docs/navigation-actions#navigate for usage.");return{type:"NAVIGATE",payload:e}}}function dt(e){return{type:"RESET",payload:e}}function ht(e){return{type:"SET_PARAMS",payload:{params:e}}}const gt=Object.freeze(Object.defineProperty({__proto__:null,goBack:lt,navigate:ft,reset:dt,setParams:ht},Symbol.toStringTag,{value:"Module"})),Et="The 'navigation' object hasn't been initialized yet. This might happen if you don't have a navigator mounted, or if the navigator hasn't finished mounting. See https://reactnavigation.org/docs/navigating-without-navigation-prop#handling-initialization for more details.";function yt(){const e=[...Object.keys(gt),"addListener","removeListener","resetRoot","dispatch","isFocused","canGoBack","getRootState","getState","getParent","getCurrentRoute","getCurrentOptions"],t={},r=(s,f)=>{t[s]&&(t[s]=t[s].filter(l=>l!==f))};let c=null;return{get current(){return c},set current(s){c=s,s!=null&&Object.entries(t).forEach(f=>{let[l,g]=f;g.forEach(_=>{s.addListener(l,_)})})},isReady:()=>c==null?!1:c.isReady(),...e.reduce((s,f)=>(s[f]=function(){for(var l=arguments.length,g=new Array(l),_=0;_<l;_++)g[_]=arguments[_];if(c==null)switch(f){case"addListener":{const[h,p]=g;return t[h]=t[h]||[],t[h].push(p),()=>r(h,p)}case"removeListener":{const[h,p]=g;r(h,p);break}default:console.error(Et)}else return c[f](...g)},s),{})}}var _t={},mt=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),$e="%[a-f0-9]{2}",Ce=new RegExp("("+$e+")|([^%]+?)","gi"),Ne=new RegExp("("+$e+")+","gi");function Ee(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),c=e.slice(t);return Array.prototype.concat.call([],Ee(r),Ee(c))}function pt(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Ce)||[],r=1;r<t.length;r++)e=Ee(t,r).join(""),t=e.match(Ce)||[];return e}}function Rt(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=Ne.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var c=pt(r[0]);c!==r[0]&&(t[r[0]]=c)}r=Ne.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),s=0;s<a.length;s++){var f=a[s];e=e.replace(new RegExp(f,"g"),t[f])}return e}var bt=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Rt(e)}},St=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},Ot=function(e,t){for(var r={},c=Object.keys(e),a=Array.isArray(t),s=0;s<c.length;s++){var f=c[s],l=e[f];(a?t.indexOf(f)!==-1:t(f,l,e))&&(r[f]=l)}return r};(function(e){const t=mt,r=bt,c=St,a=Ot,s=n=>n==null,f=Symbol("encodeFragmentIdentifier");function l(n){switch(n.arrayFormat){case"index":return i=>(u,o)=>{const d=u.length;return o===void 0||n.skipNull&&o===null||n.skipEmptyString&&o===""?u:o===null?[...u,[h(i,n),"[",d,"]"].join("")]:[...u,[h(i,n),"[",h(d,n),"]=",h(o,n)].join("")]};case"bracket":return i=>(u,o)=>o===void 0||n.skipNull&&o===null||n.skipEmptyString&&o===""?u:o===null?[...u,[h(i,n),"[]"].join("")]:[...u,[h(i,n),"[]=",h(o,n)].join("")];case"colon-list-separator":return i=>(u,o)=>o===void 0||n.skipNull&&o===null||n.skipEmptyString&&o===""?u:o===null?[...u,[h(i,n),":list="].join("")]:[...u,[h(i,n),":list=",h(o,n)].join("")];case"comma":case"separator":case"bracket-separator":{const i=n.arrayFormat==="bracket-separator"?"[]=":"=";return u=>(o,d)=>d===void 0||n.skipNull&&d===null||n.skipEmptyString&&d===""?o:(d=d===null?"":d,o.length===0?[[h(u,n),i,h(d,n)].join("")]:[[o,h(d,n)].join(n.arrayFormatSeparator)])}default:return i=>(u,o)=>o===void 0||n.skipNull&&o===null||n.skipEmptyString&&o===""?u:o===null?[...u,h(i,n)]:[...u,[h(i,n),"=",h(o,n)].join("")]}}function g(n){let i;switch(n.arrayFormat){case"index":return(u,o,d)=>{if(i=/\[(\d*)\]$/.exec(u),u=u.replace(/\[\d*\]$/,""),!i){d[u]=o;return}d[u]===void 0&&(d[u]={}),d[u][i[1]]=o};case"bracket":return(u,o,d)=>{if(i=/(\[\])$/.exec(u),u=u.replace(/\[\]$/,""),!i){d[u]=o;return}if(d[u]===void 0){d[u]=[o];return}d[u]=[].concat(d[u],o)};case"colon-list-separator":return(u,o,d)=>{if(i=/(:list)$/.exec(u),u=u.replace(/:list$/,""),!i){d[u]=o;return}if(d[u]===void 0){d[u]=[o];return}d[u]=[].concat(d[u],o)};case"comma":case"separator":return(u,o,d)=>{const m=typeof o=="string"&&o.includes(n.arrayFormatSeparator),y=typeof o=="string"&&!m&&p(o,n).includes(n.arrayFormatSeparator);o=y?p(o,n):o;const O=m||y?o.split(n.arrayFormatSeparator).map(L=>p(L,n)):o===null?o:p(o,n);d[u]=O};case"bracket-separator":return(u,o,d)=>{const m=/(\[\])$/.test(u);if(u=u.replace(/\[\]$/,""),!m){d[u]=o&&p(o,n);return}const y=o===null?[]:o.split(n.arrayFormatSeparator).map(O=>p(O,n));if(d[u]===void 0){d[u]=y;return}d[u]=[].concat(d[u],y)};default:return(u,o,d)=>{if(d[u]===void 0){d[u]=o;return}d[u]=[].concat(d[u],o)}}}function _(n){if(typeof n!="string"||n.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function h(n,i){return i.encode?i.strict?t(n):encodeURIComponent(n):n}function p(n,i){return i.decode?r(n):n}function x(n){return Array.isArray(n)?n.sort():typeof n=="object"?x(Object.keys(n)).sort((i,u)=>Number(i)-Number(u)).map(i=>n[i]):n}function v(n){const i=n.indexOf("#");return i!==-1&&(n=n.slice(0,i)),n}function N(n){let i="";const u=n.indexOf("#");return u!==-1&&(i=n.slice(u)),i}function R(n){n=v(n);const i=n.indexOf("?");return i===-1?"":n.slice(i+1)}function S(n,i){return i.parseNumbers&&!Number.isNaN(Number(n))&&typeof n=="string"&&n.trim()!==""?n=Number(n):i.parseBooleans&&n!==null&&(n.toLowerCase()==="true"||n.toLowerCase()==="false")&&(n=n.toLowerCase()==="true"),n}function b(n,i){i=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},i),_(i.arrayFormatSeparator);const u=g(i),o=Object.create(null);if(typeof n!="string"||(n=n.trim().replace(/^[?#&]/,""),!n))return o;for(const d of n.split("&")){if(d==="")continue;let[m,y]=c(i.decode?d.replace(/\+/g," "):d,"=");y=y===void 0?null:["comma","separator","bracket-separator"].includes(i.arrayFormat)?y:p(y,i),u(p(m,i),y,o)}for(const d of Object.keys(o)){const m=o[d];if(typeof m=="object"&&m!==null)for(const y of Object.keys(m))m[y]=S(m[y],i);else o[d]=S(m,i)}return i.sort===!1?o:(i.sort===!0?Object.keys(o).sort():Object.keys(o).sort(i.sort)).reduce((d,m)=>{const y=o[m];return y&&typeof y=="object"&&!Array.isArray(y)?d[m]=x(y):d[m]=y,d},Object.create(null))}e.extract=R,e.parse=b,e.stringify=(n,i)=>{if(!n)return"";i=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},i),_(i.arrayFormatSeparator);const u=y=>i.skipNull&&s(n[y])||i.skipEmptyString&&n[y]==="",o=l(i),d={};for(const y of Object.keys(n))u(y)||(d[y]=n[y]);const m=Object.keys(d);return i.sort!==!1&&m.sort(i.sort),m.map(y=>{const O=n[y];return O===void 0?"":O===null?h(y,i):Array.isArray(O)?O.length===0&&i.arrayFormat==="bracket-separator"?h(y,i)+"[]":O.reduce(o(y),[]).join("&"):h(y,i)+"="+h(O,i)}).filter(y=>y.length>0).join("&")},e.parseUrl=(n,i)=>{i=Object.assign({decode:!0},i);const[u,o]=c(n,"#");return Object.assign({url:u.split("?")[0]||"",query:b(R(n),i)},i&&i.parseFragmentIdentifier&&o?{fragmentIdentifier:p(o,i)}:{})},e.stringifyUrl=(n,i)=>{i=Object.assign({encode:!0,strict:!0,[f]:!0},i);const u=v(n.url).split("?")[0]||"",o=e.extract(n.url),d=e.parse(o,{sort:!1}),m=Object.assign(d,n.query);let y=e.stringify(m,i);y&&(y=`?${y}`);let O=N(n.url);return n.fragmentIdentifier&&(O=`#${i[f]?h(n.fragmentIdentifier,i):n.fragmentIdentifier}`),`${u}${y}${O}`},e.pick=(n,i,u)=>{u=Object.assign({parseFragmentIdentifier:!0,[f]:!1},u);const{url:o,query:d,fragmentIdentifier:m}=e.parseUrl(n,u);return e.stringifyUrl({url:o,query:a(d,i),fragmentIdentifier:m},u)},e.exclude=(n,i,u)=>{const o=Array.isArray(i)?d=>!i.includes(d):(d,m)=>!i(d,m);return e.pick(n,o,u)}})(_t);var we={};Object.defineProperty(we,"__esModule",{value:!0});var Ie=A,Tt=typeof document<"u"?Ie.useLayoutEffect:Ie.useEffect;we.default=Tt;const ne=yt();var Y=(e=>(e[e.searchTerm=3]="searchTerm",e[e.searchResultAmount=4]="searchResultAmount",e[e.searchType=5]="searchType",e[e.searchResultTitle=6]="searchResultTitle",e[e.searchResultUrl=7]="searchResultUrl",e[e.searchResultType=8]="searchResultType",e[e.searchResultSelected=9]="searchResultSelected",e[e.contentTitle=10]="contentTitle",e[e.contentSubject=11]="contentSubject",e[e.contentTeam=12]="contentTeam",e[e.contentPublicationDate=13]="contentPublicationDate",e[e.contentType=14]="contentType",e[e.userIntext=15]="userIntext",e[e.searchMachine=16]="searchMachine",e[e.pageType=17]="pageType",e[e.contentId=20]="contentId",e[e.newState=36]="newState",e[e.routeName=43]="routeName",e[e.pushTitle=44]="pushTitle",e[e.pushContent=45]="pushContent",e[e.isPushNotificationDeeplink=47]="isPushNotificationDeeplink",e))(Y||{}),se=(e=>(e[e.userType=1]="userType",e[e.userCity=2]="userCity",e[e.appVersion=18]="appVersion",e[e.appVersionWithBuild=19]="appVersionWithBuild",e[e.reduceMotionEnabled=21]="reduceMotionEnabled",e[e.screenReaderEnabled=22]="screenReaderEnabled",e[e.accessibilityServiceEnabled=23]="accessibilityServiceEnabled",e[e.boldTextEnabled=24]="boldTextEnabled",e[e.grayscaleEnabled=25]="grayscaleEnabled",e[e.invertColorsEnabled=26]="invertColorsEnabled",e[e.reduceTransparencyEnabled=27]="reduceTransparencyEnabled",e[e.fontScale=28]="fontScale",e[e.isLandscape=29]="isLandscape",e[e.isPortrait=30]="isPortrait",e[e.isTablet=31]="isTablet",e[e.hasCameraPermission=32]="hasCameraPermission",e[e.hasPhotosPermission=33]="hasPhotosPermission",e[e.hasLocationPermission=34]="hasLocationPermission",e[e.hasNotificationPermission=35]="hasNotificationPermission",e[e.contactModule=37]="contactModule",e[e.redirectsModule=38]="redirectsModule",e[e.wasteGuideModule=39]="wasteGuideModule",e[e.reportProblemModule=40]="reportProblemModule",e[e.constructionWorkModule=41]="constructionWorkModule",e[e.constructionWorkEditorModule=42]="constructionWorkEditorModule",e[e.cityPassModule=46]="cityPassModule",e))(se||{}),vt=(e=>(e.accessibilityAction="accessibilityAction",e.accessibilityChange="accessibilityChange",e.addressAdd="addressAdd",e.addressChange="addressChange",e.blur="blur",e.buttonPress="buttonPress",e.deviceInfoChange="deviceInfoChange",e.finishedReport="finishedReport",e.locationOrAddressSelectionChange="locationOrAddressSelectionChange",e.moduleChange="moduleChange",e.pushNotificationDisplay="pushNotificationDisplay",e.pushNotificationTap="pushNotificationTap",e.radioChange="radioChange",e.startUp="startUp",e.swipeOut="swipeOut",e.toForeground="toForeground",e.toggle="toggle",e))(vt||{}),ce=(e=>(e.alreadyInitialized="Piwik Pro SDK has been already initialized",e.missingEnvVars="PIWIK_PRO_URL or PIWIK_PRO_ID are not defined in env",e))(ce||{});const Pt=e=>{if(e)return Object.keys(e).filter(t=>e[t]!==void 0).reduce((t,r)=>({...t,[r]:e[r]}),{})},Ct="1.7.0",Nt=tt(),Ge=Ze?Ct:rt(),It=`${Ge}.${Nt}`,At={[se.appVersion]:Ge,[se.appVersionWithBuild]:It},Dt=(e,t=!1)=>t?Object.keys(e).reduce((r,c)=>{const a=se[c]??Y[c];return a&&(r[a]=e[c]),r},{}):e,F=(e,t=!1)=>Pt(Dt({...At,...e},t)),xt=e=>{const t={};return e&&Object.keys(e).forEach(r=>{if(typeof e[r]!="string"&&typeof e[r]!="number")return;const c=r==="id"?"contentId":r;Object.values(Y).includes(c)&&(t[Y[c]]=e[r].toString())}),{appInsights:F(t,!0),piwik:F(t,!1)}},Ae=e=>{const t=(e==null?void 0:e.screenTitle)??(e==null?void 0:e.screenHeaderTitle);if(t)return decodeURIComponent(t)};var ye={},U={},W={},oe={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.encodeString=Ft;const D=Array.from({length:256},(e,t)=>"%"+((t<16?"0":"")+t.toString(16)).toUpperCase()),jt=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function Ft(e){const t=e.length;if(t===0)return"";let r="",c=0,a=0;e:for(;a<t;a++){let s=e.charCodeAt(a);for(;s<128;){if(jt[s]!==1&&(c<a&&(r+=e.slice(c,a)),c=a+1,r+=D[s]),++a===t)break e;s=e.charCodeAt(a)}if(c<a&&(r+=e.slice(c,a)),s<2048){c=a+1,r+=D[192|s>>6]+D[128|s&63];continue}if(s<55296||s>=57344){c=a+1,r+=D[224|s>>12]+D[128|s>>6&63]+D[128|s&63];continue}if(++a,a>=t)throw new Error("URI malformed");const f=e.charCodeAt(a)&1023;c=a+1,s=65536+((s&1023)<<10|f),r+=D[240|s>>18]+D[128|s>>12&63]+D[128|s>>6&63]+D[128|s&63]}return c===0?e:c<t?r+e.slice(c):r}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=e.defaultShouldSerializeObject=e.defaultValueSerializer=void 0;const t=le,r=s=>{switch(typeof s){case"string":return(0,t.encodeString)(s);case"bigint":case"boolean":return""+s;case"number":if(Number.isFinite(s))return s<1e21?""+s:(0,t.encodeString)(""+s);break}return s instanceof Date?(0,t.encodeString)(s.toISOString()):""};e.defaultValueSerializer=r;const c=s=>s instanceof Date;e.defaultShouldSerializeObject=c;const a=s=>s;e.defaultOptions={nesting:!0,nestingSyntax:"dot",arrayRepeat:!1,arrayRepeatSyntax:"repeat",delimiter:38,valueDeserializer:a,valueSerializer:e.defaultValueSerializer,keyDeserializer:a,shouldSerializeObject:e.defaultShouldSerializeObject}})(oe);Object.defineProperty(W,"__esModule",{value:!0});W.getDeepObject=Vt;W.stringifyObject=Be;const M=oe,Lt=le;function Mt(e){return e==="__proto__"||e==="constructor"||e==="prototype"}function Vt(e,t,r,c,a){if(Mt(t))return e;const s=e[t];return typeof s=="object"&&s!==null?s:!c&&(a||typeof r=="number"||typeof r=="string"&&r*0===0&&r.indexOf(".")===-1)?e[t]=[]:e[t]={}}const Ut=20,zt="[]",$t="[",wt="]",Gt=".";function Be(e,t,r=0,c,a){const{nestingSyntax:s=M.defaultOptions.nestingSyntax,arrayRepeat:f=M.defaultOptions.arrayRepeat,arrayRepeatSyntax:l=M.defaultOptions.arrayRepeatSyntax,nesting:g=M.defaultOptions.nesting,delimiter:_=M.defaultOptions.delimiter,valueSerializer:h=M.defaultOptions.valueSerializer,shouldSerializeObject:p=M.defaultOptions.shouldSerializeObject}=t,x=typeof _=="number"?String.fromCharCode(_):_,v=a===!0&&f,N=s==="dot"||s==="js"&&!a;if(r>Ut)return"";let R="",S=!0,b=!1;for(const n in e){const i=e[n];if(i===void 0)continue;let u;c?(u=c,v?l==="bracket"&&(u+=zt):N?(u+=Gt,u+=n):(u+=$t,u+=n,u+=wt)):u=n,S||(R+=x),typeof i=="object"&&i!==null&&!p(i)?(b=i.pop!==void 0,(g||f&&b)&&(R+=Be(i,t,r+1,u,b))):(R+=(0,Lt.encodeString)(u),R+="=",R+=h(i,n)),S&&(S=!1)}return R}var De=12,Bt=0,de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function Kt(e){var t=e.indexOf("%");if(t===-1)return e;for(var r=e.length,c="",a=0,s=0,f=t,l=De;t>-1&&t<r;){var g=xe(e[t+1],4),_=xe(e[t+2],0),h=g|_,p=de[h];if(l=de[256+l+p],s=s<<6|h&de[364+p],l===De)c+=e.slice(a,f),c+=s<=65535?String.fromCharCode(s):String.fromCharCode(55232+(s>>10),56320+(s&1023)),s=0,a=t+3,t=f=e.indexOf("%",a);else{if(l===Bt)return null;if(t+=3,t<r&&e.charCodeAt(t)===37)continue;return null}}return c+e.slice(a)}var Ht={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function xe(e,t){var r=Ht[e];return r===void 0?255:r<<t}var Yt=Kt,Wt=z&&z.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(U,"__esModule",{value:!0});U.numberValueDeserializer=U.numberKeyDeserializer=void 0;U.parse=Xt;const Q=W,V=oe,Ke=Wt(Yt),kt=e=>{const t=Number(e);return Number.isNaN(t)?e:t};U.numberKeyDeserializer=kt;const qt=e=>{const t=Number(e);return Number.isNaN(t)?e:t};U.numberValueDeserializer=qt;const He=/\+/g,Ye=function(){};Ye.prototype=Object.create(null);function J(e,t,r,c,a){let s=e.substring(t,r);return c&&(s=s.replace(He," ")),a&&(s=(0,Ke.default)(s)||s),s}function Xt(e,t){const{valueDeserializer:r=V.defaultOptions.valueDeserializer,keyDeserializer:c=V.defaultOptions.keyDeserializer,arrayRepeatSyntax:a=V.defaultOptions.arrayRepeatSyntax,nesting:s=V.defaultOptions.nesting,arrayRepeat:f=V.defaultOptions.arrayRepeat,nestingSyntax:l=V.defaultOptions.nestingSyntax,delimiter:g=V.defaultOptions.delimiter}=t??{},_=typeof g=="string"?g.charCodeAt(0):g,h=l==="js",p=new Ye;if(typeof e!="string")return p;const x=e.length;let v="",N=-1,R=-1,S=-1,b=p,n,i="",u="",o=!1,d=!1,m=!1,y=!1,O=!1,L=!1,q=!1,j=0,w=-1,G=-1,me=-1;for(let T=0;T<x+1;T++){if(j=T!==x?e.charCodeAt(T):_,j===_){if(q=R>N,q||(R=T),S!==R-1&&(u=J(e,S+1,w>-1?w:R,m,o),i=c(u),n!==void 0&&(b=(0,Q.getDeepObject)(b,n,i,h&&O,h&&L))),q||i!==""){q&&(v=e.slice(R+1,T),y&&(v=v.replace(He," ")),d&&(v=(0,Ke.default)(v)||v));const B=r(v,i);if(f){const X=b[i];X===void 0?w>-1?b[i]=[B]:b[i]=B:X.pop?X.push(B):b[i]=[X,B]}else b[i]=B}v="",N=T,R=T,o=!1,d=!1,m=!1,y=!1,O=!1,L=!1,w=-1,S=T,b=p,n=void 0,i=""}else j===93?(f&&a==="bracket"&&me===91&&(w=G),s&&(l==="index"||h)&&R<=N&&(S!==G&&(u=J(e,S+1,T,m,o),i=c(u),n!==void 0&&(b=(0,Q.getDeepObject)(b,n,i,void 0,h)),n=i,m=!1,o=!1),S=T,L=!0,O=!1)):j===46?s&&(l==="dot"||h)&&R<=N&&(S!==G&&(u=J(e,S+1,T,m,o),i=c(u),n!==void 0&&(b=(0,Q.getDeepObject)(b,n,i,h)),n=i,m=!1,o=!1),O=!0,L=!1,S=T):j===91?s&&(l==="index"||h)&&R<=N&&(S!==G&&(u=J(e,S+1,T,m,o),i=c(u),h&&n!==void 0&&(b=(0,Q.getDeepObject)(b,n,i,h)),n=i,m=!1,o=!1,O=!1,L=!0),S=T):j===61?R<=N?R=T:d=!0:j===43?R>N?y=!0:m=!0:j===37&&(R>N?d=!0:o=!0);G=T,me=j}return p}var _e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.stringify=Jt;const Qt=W;function Jt(e,t){if(e===null||typeof e!="object")return"";const r=t??{};return(0,Qt.stringifyObject)(e,r)}(function(e){var t=z&&z.__createBinding||(Object.create?function(s,f,l,g){g===void 0&&(g=l);var _=Object.getOwnPropertyDescriptor(f,l);(!_||("get"in _?!f.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return f[l]}}),Object.defineProperty(s,g,_)}:function(s,f,l,g){g===void 0&&(g=l),s[g]=f[l]}),r=z&&z.__exportStar||function(s,f){for(var l in s)l!=="default"&&!Object.prototype.hasOwnProperty.call(f,l)&&t(f,s,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=e.parse=void 0;var c=U;Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return c.parse}});var a=_e;Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),r(oe,e)})(ye);const Zt=e=>{if(!e)return"";const t={};return Object.keys(ye.parse(e)).forEach(r=>{t[r]="___"}),`?${ye.stringify(t)}`},er=e=>e?`#${e.split("/").map(()=>"___").join("/")}`:"",tr=(e="")=>{const[t,r,...c]=e.split("#"),[a,s,...f]=t.split("?");if(c.length||f.length)return a;const l=Zt(s),g=er(r);return`${a}${l}${g}`},Z=()=>Ve("piwik not initialized"),ee="useTrackEvents.ts",rr=(e,t,r,c,a,s)=>({ready:!!c,trackCustomEvent:(f,l,g,_=t,h=void 0)=>{c?c.trackCustomEvent(_,l,{path:a,customDimensions:F(g),value:h}).catch(()=>{e(K.piwikTrackCustomEvent,ee,{category:_,action:l,name:f,routeName:a,value:h})}):Z(),r.trackEvent({name:l,properties:{...F(g,!0),value:h,routeName:a,category:_}})},trackOutlink:(f,l)=>{const g=tr(f);c?c.trackOutlink(g,{...l,customDimensions:F({...l==null?void 0:l.customDimensions,[Y.routeName]:a})}).catch(()=>{e(K.piwikTrackOutlink,ee,{url:g})}):Z(),r.trackEvent({name:"outlink",properties:{...F(l==null?void 0:l.customDimensions,!0),url:g,routeName:a,category:t}})},trackScreen:f=>{const l=f??a;if(!l)return;const{appInsights:g,piwik:_}=xt(s);c?c.trackScreen(l,{title:Ae(s),customDimensions:_}).catch(()=>{e(K.piwikTrackScreen,ee,{path:f})}):Z(),r.trackPageView({name:l},{...g,title:Ae(s)})},trackSearch:(f,l)=>{c?c.trackSearch(f,{...l,customDimensions:F(l==null?void 0:l.customDimensions)}).catch(()=>{e(K.piwikTrackSearch,ee)}):Z(),r.trackEvent({name:"search",properties:{...F(l==null?void 0:l.customDimensions,!0),keyword:f,routeName:a,category:t}})}});function ar(e){if(!Number.isInteger(e))throw new Error("Parameter must be an integer number")}function ae(e){e&&Object.entries(e).forEach(t=>{let[r,c]=t;const a=parseInt(r,10);if(r!==a.toString())throw new Error("ID (key) must be an integer");if(a<1)throw new Error("ID (key) must be an integer greater than 0")})}function k(e){e.forEach(t=>{let r=t.customDimensions;if(r){if(Object.keys(r).length>20)throw new Error("Max 20 product custom dimensions, 20 is max ID.");ae(r)}})}function nr(e){if(!/^[0-9a-f]{16}$/.test(e))throw new Error(`Visitor ID ${e} has invalid format. The format must match the regular expression: ^[0-9a-f]{16}$`)}const sr="1.1.0",cr=`The package 'react-native-piwik-pro-sdk' doesn't seem to be linked. Make sure: 

`+nt.select({ios:`- You have run 'pod install'
`,default:""})+`- You rebuilt the app after installing the package
- You are not using Expo managed workflow
`,E=pe.PiwikProSdk?pe.PiwikProSdk:new Proxy({},{get(){throw new Error(cr)}});async function ir(e,t){return await E.init(e,t,sr)}async function ur(e,t){return C(t),await E.trackScreen(e,t)}async function or(e,t,r){return C(r),await E.trackCustomEvent(e,t,r)}async function lr(e,t){return C(t),await E.trackException(e,t)}async function fr(e,t,r){return C(r),await E.trackSocialInteraction(e,t,r)}async function dr(e,t){return C(t),await E.trackDownload(e,t)}async function hr(){return await E.trackApplicationInstall()}async function gr(e,t){return C(t),await E.trackOutlink(e,t)}async function Er(e,t){return C(t),await E.trackSearch(e,t)}async function yr(e,t){return C(t),await E.trackImpression(e,t)}async function _r(e,t,r){return C(r),await E.trackInteraction(e,t,r)}async function mr(e,t){return C(t),await E.trackGoal(e,t)}async function pr(e,t,r){return await E.trackEcommerce(e,t,r)}async function Rr(e,t){return C(t),k(e),await E.trackEcommerceProductDetailView(e,t)}async function br(e,t,r){return C(r),k(e),await E.trackEcommerceCartUpdate(e,t,r)}async function Sr(e,t){return C(t),k(e),await E.trackEcommerceAddToCart(e,t)}async function Or(e,t){return C(t),k(e),await E.trackEcommerceRemoveFromCart(e,t)}async function Tr(e,t,r,c){return C(c),k(r),await E.trackEcommerceOrder(e,t,r,c)}async function vr(e){return await E.trackCampaign(e)}async function Pr(e){if(Array.isArray(e)){if(!e.length)throw new Error("Profile attributes cannot be an empty array");return await E.trackProfileAttributes(e)}return await E.trackProfileAttributes([e])}async function Cr(){return await E.getProfileAttributes()}async function Nr(e){return await E.checkAudienceMembership(e)}async function Ir(e){return await E.setUserId(e)}async function Ar(){return await E.getUserId()}async function Dr(e){return await E.setUserEmail(e)}async function xr(){return await E.getUserEmail()}async function jr(e){return nr(e),await E.setVisitorId(e)}async function Fr(){return await E.getVisitorId()}async function Lr(e){return await E.setSessionTimeout(e)}async function Mr(){return await E.getSessionTimeout()}async function Vr(){return await E.startNewSession()}async function Ur(){return await E.dispatch()}async function zr(e){return ar(e),await E.setDispatchInterval(e)}async function $r(){return await E.getDispatchInterval()}async function wr(e){return await E.setIncludeDefaultCustomVariables(e)}async function Gr(){return await E.getIncludeDefaultCustomVariables()}async function Br(e){return await E.setAnonymizationState(e)}async function Kr(){return await E.isAnonymizationOn()}async function Hr(e){return await E.setOptOut(e)}async function Yr(e){return await E.setDryRun(e)}async function Wr(){return await E.getDryRun()}async function kr(){return await E.getOptOut()}async function qr(e){return await E.setPrefixing(e)}async function Xr(){return await E.isPrefixingOn()}function C(e){ae(e==null?void 0:e.customDimensions),ae(e==null?void 0:e.visitCustomVariables),ae(e==null?void 0:e.screenCustomVariables)}const H={init:ir,trackScreen:ur,trackCustomEvent:or,trackException:lr,trackSocialInteraction:fr,trackDownload:dr,trackApplicationInstall:hr,trackOutlink:gr,trackSearch:Er,trackImpression:yr,trackInteraction:_r,trackGoal:mr,trackEcommerce:pr,trackEcommerceProductDetailView:Rr,trackEcommerceCartUpdate:br,trackEcommerceAddToCart:Sr,trackEcommerceRemoveFromCart:Or,trackEcommerceOrder:Tr,trackCampaign:vr,trackProfileAttributes:Pr,getProfileAttributes:Cr,checkAudienceMembership:Nr,setUserId:Ir,getUserId:Ar,setUserEmail:Dr,getUserEmail:xr,setVisitorId:jr,getVisitorId:Fr,setSessionTimeout:Lr,getSessionTimeout:Mr,startNewSession:Vr,dispatch:Ur,setDispatchInterval:zr,getDispatchInterval:$r,setIncludeDefaultCustomVariables:wr,getIncludeDefaultCustomVariables:Gr,setAnonymizationState:Br,isAnonymizationOn:Kr,setOptOut:Hr,getOptOut:kr,setDryRun:Yr,getDryRun:Wr,setPrefixing:qr,isPrefixingOn:Xr},[je,Fe]=et?[We,ke]:[qe,Xe],Qr=async()=>!je||!Fe?Promise.reject(ce.missingEnvVars):(await H.init(je,Fe),await H.trackApplicationInstall(),await H.setIncludeDefaultCustomVariables(!0),Promise.resolve()),ie=A.createContext(void 0),Le=({children:e})=>{const t=Me(),[r,c]=A.useState();return A.useEffect(()=>{r===void 0&&Qr().then(()=>{c(H)}).catch(a=>{if(a.message===ce.alreadyInitialized){c(H);return}c(null),a.message!==ce.missingEnvVars&&t(K.piwikInitialization,"piwik.provider.tsx",{error:a})})},[r,t]),at.jsx(ie.Provider,{value:r,children:e})};try{ie.displayName="PiwikContext",ie.__docgenInfo={description:"The PiwikContext contains the object with all methods, to be used via the usePiwik hook only.",displayName:"PiwikContext",props:{}}}catch{}try{Le.displayName="PiwikProvider",Le.__docgenInfo={description:"",displayName:"PiwikProvider",props:{}}}catch{}const Jr=()=>{if(ne.isReady()){const e=ne.getRootState(),t=e==null?void 0:e.routes;if(t)for(let r=t.length-1;r>=0;r--){const c=Qe[t[r].name];if(c)return c}}},Zr=()=>{const e=A.useContext(ie),t=ne.isReady()?ne.getCurrentRoute():void 0,r=Jr()??"general",c=Je(),a=Me();return A.useMemo(()=>rr(a,r,c,e,t==null?void 0:t.name,t==null?void 0:t.params),[e,a,r,c,t==null?void 0:t.name,t==null?void 0:t.params])},ea=e=>{const t=e.logName??e["logging-label"]??e.testID;return t||Ve("No name found in props"),t},la=({logAction:e,logCategory:t,logDimensions:r={},logValue:c,onEvent:a,testID:s,logName:f,"logging-label":l})=>{const{trackCustomEvent:g}=Zr();return A.useCallback((_,{nameSuffix:h,dimensions:p={},action:x=e}={})=>{a==null||a(_);const v=ea({testID:s,logName:f,"logging-label":l});if(v){const N=h?`:${h}`:"";g(`${v}${N}`,x,{...r,...p},t,c)}},[e,t,r,f,c,a,l,s,g])};export{gt as C,Et as N,Y as P,Ge as V,vt as a,oa as b,Zr as c,se as d,Jr as g,ye as m,_t as q,dt as r,la as u};
