import{aZ as ye,j as e,ad as ne,al as xe,ae as U,am as se,a_ as ie,a$ as v,an as je,ao as ve,b0 as be,b1 as G,ag as ae,S as re,b2 as V,a0 as Pe,r as De,b3 as W,b4 as b,b5 as _e,V as w,b6 as Se,ai as Te,C as Z,T as O,f as Ce,a as we,aC as P,m as Ae,R as ke,B as R,X as j,at as Ee,$ as Me,aH as Ve,a1 as Ie,e as Le}from"./iframe-CtEaAvsw.js";import{P as Be}from"./ParkingSessionFormProvider-DjGY-d6I.js";import{b as oe,a as le}from"./index.esm-5SSNdrVS.js";import{T as Oe,a as I,D as Re,P as qe}from"./Track-DAchX7t3.js";import{S as Ge}from"./SingleSelectable-DqM5ZEdJ.js";import"./index-C0zmd9Yg.js";import{G as $e,u as z,a as N,b as He}from"./gestureObjects-DTf3S7Wf.js";import{f as Ue}from"./formatTimeRangeToDisplay-cBUL04p9.js";import{f as We}from"./formatTimeToDisplay-Bio-SmIt.js";import{u as Ze}from"./useCurrentParkingPermit.web-DmQ3l2wt.js";import"./preload-helper-Dp1pzeXC.js";import"./formatDate-DRo-eHjv.js";import"./permit.mock-FELEZYM1.js";var C=(t=>(t.Success="success",t.Warning="warning",t.Error="error",t))(C||{}),g=(t=>(t.Light="light",t.Medium="medium",t.Heavy="heavy",t.Soft="soft",t.Rigid="rigid",t))(g||{});const L={[C.Success]:[40,100,40],[C.Warning]:[50,100,50],[C.Error]:[60,100,60,100,60],[g.Light]:[40],[g.Medium]:[50],[g.Heavy]:[60],[g.Soft]:[35],[g.Rigid]:[45],selection:[50]};function B(){return typeof window<"u"&&"navigator"in window&&"vibrate"in navigator}const D={async notificationAsync(t){B()&&navigator.vibrate(L[t])},async impactAsync(t){B()&&navigator.vibrate(L[t])},async selectionAsync(){B()&&navigator.vibrate(L.selection)}};async function ze(t=g.Medium){if(!(D!=null&&D.impactAsync))throw new ye("Haptic","impactAsync");await D.impactAsync(t)}const Ne=()=>e.jsxs(ne,{fill:"none",height:160,viewBox:"0 0 160 160",width:160,children:[e.jsxs(xe,{clipPath:"url(#clip0_4356_5678)",children:[e.jsx(U,{d:"M143.86 78.5C143.86 42.8776 114.982 14 79.3599 14V9C117.744 9 148.86 40.1162 148.86 78.5C148.86 116.884 117.744 148 79.3599 148V143C114.982 143 143.86 114.122 143.86 78.5Z",fill:"url(#paint0_linear_4356_5678)"}),e.jsx(U,{d:"M69 145.86L84.5412 136.888L84.5412 154.833L69 145.86Z",fill:"#00A03C"})]}),e.jsxs(se,{children:[e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"paint0_linear_4356_5678",x1:"81.0001",x2:"79.3599",y1:"43.5",y2:"138",children:[e.jsx(v,{stopColor:"#00A03C",stopOpacity:0}),e.jsx(v,{offset:1,stopColor:"#00A03C"})]}),e.jsx(je,{id:"clip0_4356_5678",children:e.jsx(ve,{fill:"white",height:160,width:160})})]})]}),{width:Xe,height:Ye}=be.get("window"),a=Math.min(Math.min(Ye,Xe)*.7,350),X=16,Ke=G.createAnimatedComponent(ae),Je=G.createAnimatedComponent(ne),Y=t=>{"worklet";const r=Math.round(t/6),d=Math.floor(r/60),n=r%60;return{hours:d,minutes:n}},_=(t,r)=>{"worklet";return t*360+r*6},K=(t,r,d,n,s,l)=>{"worklet";return t<d||t===d&&r<n?{hours:d,minutes:n,clamped:!0}:t>s||t===s&&r>l?{hours:s,minutes:l,clamped:!0}:{hours:t,minutes:r,clamped:!1}},q=({onChange:t,maxHours:r,maxMinutes:d,minHours:n=0,minMinutes:s=0,initialHours:l=0,initialMinutes:o=0})=>{const i=V(_(l,o)),{value:p,enable:x,disable:A}=Pe(!1);De.useEffect(()=>{p||(i.value=W(_(l,o),{damping:10,stiffness:90,overshootClamping:!0}))},[l,o,i]);const c=V(0),u=V(0),k=$e.Pan().onStart(h=>{const m=a/2,f=a/2,y=h.x-m,E=h.y-f;c.value=Math.atan2(E,y),b(x)()}).onUpdate(h=>{const m=a/2,f=a/2,y=h.x-m,E=h.y-f,M=(Math.atan2(E,y)-c.value)*180/Math.PI,{hours:fe,minutes:ge}=Y(i.value+M),{hours:$,minutes:H,clamped:pe}=K(fe,ge,n,s,r??1/0,d??1/0);pe?i.value=_($,H):i.value+=M,u.value=M,b(t)($,H)}).onEnd(()=>{u.value>1&&(i.value=W(i.value+u.value*5,{damping:10,stiffness:90,overshootClamping:!0}));const{hours:h,minutes:m}=Y(i.value),{hours:f,minutes:y}=K(h,m,n,s,r??1/0,d??1/0);i.value=_(f,y),b(t)(f,y),b(A)()}),ce=_e(()=>({transform:[{rotate:`${i.value}deg`}]})),de=z(()=>i.value>=360?0:Math.PI*a*(-1+i.value%360/360)),ue=N(()=>({strokeDashoffset:de.value})),me=z(()=>i.value-90),he=N(()=>({transform:[{rotate:`${me.value}deg`}]}));return e.jsxs(w,{style:S.container,children:[e.jsxs(Je,{animatedProps:he,height:a+20,style:S.progressBar,testID:"TimeDurationSpinner",width:a+20,children:[e.jsx(se,{children:e.jsxs(ie,{gradientUnits:"userSpaceOnUse",id:"gradient",x1:"100%",x2:"0%",y1:"50%",y2:"50%",children:[e.jsx(v,{offset:"0%",stopColor:"#000000",stopOpacity:"1"}),e.jsx(v,{offset:"10%",stopColor:"#004699",stopOpacity:"1"}),e.jsx(v,{offset:"100%",stopColor:"#009DE6",stopOpacity:"1"})]})}),e.jsx(ae,{cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"#ddd",strokeWidth:10}),e.jsx(Ke,{animatedProps:ue,cx:(a+20)/2,cy:(a+20)/2,fill:"none",r:a/2,stroke:"url(#gradient)",strokeDasharray:`${Math.PI*a}`,strokeLinecap:"round",strokeWidth:10})]}),e.jsx(He,{gesture:k,children:e.jsxs(G.View,{style:[S.circle,ce],children:[Array.from({length:X}).map((h,m)=>{const f=360/X*m;return e.jsx(w,{style:[S.line,{transform:[{rotate:`${f}deg`},{translateY:-a/2+40}]}],testID:`TimeDurationSpinnerLine${m}`},m)}),l===0&&o===0&&e.jsx(Se,{duration:5e3,children:e.jsx(Ne,{})})]})})]})},S=re.create({container:{height:a+20,width:a+20,justifyContent:"center",alignItems:"center"},circle:{width:a,height:a,borderRadius:a/2,justifyContent:"center",alignItems:"center"},progressBar:{position:"absolute"},line:{position:"absolute",width:2,height:20,backgroundColor:"#000"}});try{q.displayName="TimeDurationSpinner",q.__docgenInfo={description:"",displayName:"TimeDurationSpinner",props:{initialHours:{defaultValue:{value:"0"},description:"",name:"initialHours",required:!1,type:{name:"number"}},initialMinutes:{defaultValue:{value:"0"},description:"",name:"initialMinutes",required:!1,type:{name:"number"}},maxHours:{defaultValue:null,description:"",name:"maxHours",required:!1,type:{name:"number"}},maxMinutes:{defaultValue:null,description:"",name:"maxMinutes",required:!1,type:{name:"number"}},minHours:{defaultValue:{value:"0"},description:"",name:"minHours",required:!1,type:{name:"number"}},minMinutes:{defaultValue:{value:"0"},description:"",name:"minMinutes",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(hours: number, minutes: number) => void"}}}}}catch{}const J=({currentPermit:t,minimumEndTime:r})=>{const{watch:d}=oe(),n=d("startTime"),{field:{value:s,onChange:l}}=le({name:"endTime"}),o=t.max_session_length_in_days===1?n.endOf("day"):void 0,i=r??n,p=i.diff(n,"hour"),x=i.diff(n.add(p,"hours"),"minute"),{isPortrait:A}=Te();return e.jsxs(Oe,{align:"around",children:[e.jsxs(Z,{gutter:"lg",halign:"center",children:[e.jsxs(Ge,{children:[e.jsx(O,{level:"h1",text:Ue(n,s??n),textAlign:"center"}),e.jsx(O,{level:"h5",text:"Parkeertijd",textAlign:"center"})]}),e.jsxs(Ce,{children:[e.jsx(we,{name:"clock",size:"sm",testID:"ParkingSessionEndTimeIcon"})," ","Eindtijd"," ",We(s??n,{includeHoursLabel:!0})]})]}),e.jsx(P,{height:"lg"}),e.jsxs(I,{testID:"ParkingSessionDurationTimePickerTabs",children:[!!A&&e.jsx(I.Tab,{accessibilityLabel:"Parkeertijd kiezen",label:"Parkeertijd",children:e.jsxs(Z,{halign:"center",children:[e.jsx(P,{height:"xl"}),e.jsx(q,{initialHours:(s==null?void 0:s.diff(n,"hour"))??0,initialMinutes:s?s.diff(n,"minute")-s.diff(n,"hour")*60:0,maxHours:t.max_session_length_in_days===1?n.endOf("day").diff(n,"hour"):void 0,maxMinutes:t.max_session_length_in_days===1?n.endOf("day").diff(n,"minutes")-n.endOf("day").diff(n,"hour")*60:void 0,minHours:p,minMinutes:x,onChange:(c,u)=>{const k=n.add(c,"hour").add(u,"minute");l(k),Ae.OS==="ios"&&ze(g.Light)}}),e.jsxs(w,{style:Q.floatingButtons,children:[e.jsx(P,{height:"md"}),e.jsxs(ke,{align:"between",grow:1,children:[e.jsx(R,{accessibilityLabel:"Verminder parkeertijd met 5 minuten",label:"-5 min",onPress:()=>{const c=s?s.add(-5,"minute"):void 0,u=i&&(c!=null&&c.isBefore(i))?i:c;l(u)},testID:"ParkingSessionDurationDecreaseButton",variant:"tertiary"}),e.jsx(R,{accessibilityLabel:"Verleng parkeertijd met 5 minuten",label:"+5 min",onPress:()=>{const c=s?s.add(5,"minute"):n.add(5,"minute"),u=o&&c.isAfter(o)?o:c;l(u)},testID:"ParkingSessionDurationIncreaseButton",variant:"tertiary"})]})]}),e.jsx(P,{height:"lg"})]})}),e.jsx(I.Tab,{accessibilityLabel:"Eindtijd kiezen",label:"Eindtijd",children:e.jsx(Re,{date:(s==null?void 0:s.toDate())??n.toDate(),is24hourSource:"locale",locale:"nl-NL",maximumDate:o==null?void 0:o.toDate(),minimumDate:i.toDate(),mode:"time",onDateChange:c=>{l(j(c))},style:Q.centerSelf,theme:"light"})})]})]})},Q=re.create({centerSelf:{alignSelf:"center"},floatingButtons:{position:"absolute",width:"100%"}});try{J.displayName="ParkingSessionDurationTimePicker",J.__docgenInfo={description:"",displayName:"ParkingSessionDurationTimePicker",props:{currentPermit:{defaultValue:null,description:"",name:"currentPermit",required:!0,type:{name:"ParkingPermit"}},minimumEndTime:{defaultValue:null,description:"",name:"minimumEndTime",required:!1,type:{name:"Dayjs"}}}}}catch{}const Qe=()=>{const{watch:t}=oe(),r=t("startTime"),{field:{value:d,onChange:n}}=le({name:"endTime"}),{close:s}=Ee(),l=Ze(),o=Me(),{height:i,visible:p}=Ve(),{max_session_length_in_days:x}=l;return(o==null?void 0:o.scope)===Ie.visitor?j.max(j(),j(t("originalEndTime"))):j(),e.jsxs(Le,{grow:!0,children:[e.jsxs(e.Fragment,{children:[e.jsx(O,{level:"h5",text:"Kies eindtijd en datum",textAlign:"center"}),e.jsx(qe,{dateTime:d??r,maxDateTime:r.add(x,"day").endOf("day"),setDateTime:n})]}),e.jsx(R,{label:"Gereed",onPress:s,testID:"ParkingSessionEndTimeBottomSheetContentDoneButton"}),!!p&&e.jsx(w,{style:{height:i}})]})},ft={component:Qe,decorators:t=>e.jsx(Be,{children:e.jsx(t,{})})},T={args:{}};var F,ee,te;T.parameters={...T.parameters,docs:{...(F=T.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {}
}`,...(te=(ee=T.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};const gt=["Default"];export{T as Default,gt as __namedExportsOrder,ft as default};
